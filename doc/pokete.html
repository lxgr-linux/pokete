<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>pokete API documentation</title>
<meta name="description" content="This software is licensed under the GPL3
You should have gotten an copy of the GPL3 license anlonside this software
Feel free to contribute what ever â€¦" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>pokete</code></h1>
</header>
<section id="section-intro">
<p>This software is licensed under the GPL3
You should have gotten an copy of the GPL3 license anlonside this software
Feel free to contribute what ever you want to this game
New Pokete contributions are especially welcome
For this see the comments in the definations area
You can contribute here: <a href="https://github.com/lxgr-linux/pokete">https://github.com/lxgr-linux/pokete</a>
Thanks to MaFeLP for your code review and your great feedback</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">#!/usr/bin/env python3
&#34;&#34;&#34;This software is licensed under the GPL3
You should have gotten an copy of the GPL3 license anlonside this software
Feel free to contribute what ever you want to this game
New Pokete contributions are especially welcome
For this see the comments in the definations area
You can contribute here: https://github.com/lxgr-linux/pokete
Thanks to MaFeLP for your code review and your great feedback&#34;&#34;&#34;

import random
import time
import os
import sys
import threading
import math
import socket
import json
from pathlib import Path
import pprint as pp
import scrap_engine as se
import pokete_data as p_data
from pokete_classes.color import Color
from pokete_classes.effects import effects
from pokete_classes.ui_elements import StdFrame2, Box, ChooseBox, InfoBox, InputBox
from pokete_classes.classes import PlayMap, Settings, OutP, ResizeScreen, LoadingScreen
from pokete_classes.health_bar import HealthBar
from pokete_classes.inv_items import InvItem, LearnDisc
from pokete_classes.types import Types
from pokete_general_use_fns import *
from release import *

__t = time.time()


# Class definition
##################

class HightGrass(se.Object):
    &#34;&#34;&#34;Object on the map, that triggers a fight&#34;&#34;&#34;

    def action(self, ob):
        &#34;&#34;&#34;Action triggers the fight&#34;&#34;&#34;
        if random.randint(0, 8) == 0:
            fight(Poke(&#34;__fallback__&#34;, 0)
                  if len([poke for poke in figure.pokes[:6]
                          if poke.hp &gt; 0]) == 0
                  else [poke for poke in figure.pokes[:6] if poke.hp &gt; 0][0],
                  Poke(random.choices(self.arg_proto[&#34;pokes&#34;],
                                      weights=[p_data.pokes[i][&#34;rarity&#34;]
                                               for i in self.arg_proto[&#34;pokes&#34;]])[0],
                       random.choices(list(range(self.arg_proto[&#34;minlvl&#34;],
                                                 self.arg_proto[&#34;maxlvl&#34;])))[0],
                       player=False, shiny=(random.randint(0, 500) == 0)))


class Poketeball(se.Object):
    &#34;&#34;&#34;Poketeball that can be picked up on the map&#34;&#34;&#34;

    def __init__(self, name):
        self.name = name
        super().__init__(Color.thicc + Color.red + &#34;o&#34; + Color.reset, state=&#34;float&#34;)

    def action(self, ob):
        &#34;&#34;&#34;Action triggers the pick up&#34;&#34;&#34;
        figure.give_item(&#34;poketeball&#34;)
        used_npcs.append(self.name)
        self.remove()


class NPCTrigger(se.Object):
    &#34;&#34;&#34;Object on the map, that triggers a npc&#34;&#34;&#34;

    def __init__(self, npc):
        super().__init__(&#34; &#34;, state=&#34;float&#34;)
        self.npc = npc

    def action(self, ob):
        &#34;&#34;&#34;Action triggers the NPCs action&#34;&#34;&#34;
        self.npc.action()


class NPC(se.Box):
    &#34;&#34;&#34;An NPC to talk to&#34;&#34;&#34;

    def __init__(self, name, texts, fn=None, args=()):
        super().__init__(0, 0)
        self.will = True
        self.name = name
        self.texts = texts
        self.__fn = fn
        self.args = args
        for i, j in zip([-1, 1, 0, 0], [0, 0, 1, -1]):
            self.add_ob(NPCTrigger(self), i, j)
        self.add_ob(se.Object(&#34;a&#34;), 0, 0)

    def action(self):
        &#34;&#34;&#34;Interaction with the NPC triggered by NPCTrigger.action&#34;&#34;&#34;
        if not self.will or (self.name in used_npcs and settings.save_trainers):
            return
        movemap.full_show()
        time.sleep(0.7)
        try:
            exclamation.add(movemap, self.x - movemap.x, self.y - 1 - movemap.y)
        except se.CoordinateError:
            pass
        movemap.show()
        time.sleep(1)
        exclamation.remove()
        movemap_text(self.x, self.y, self.texts)
        self.fn()

    def fn(self):
        &#34;&#34;&#34;The function that&#39;s executed after the interaction&#34;&#34;&#34;
        if self.__fn is not None:
            eval(self.__fn)(*self.args)

    @staticmethod
    def give(_map, npc, name, item):
        &#34;&#34;&#34;Method thats gifts an item to the player&#34;&#34;&#34;
        item = getattr(Inv, item)
        _map = ob_maps[_map]
        npc = getattr(_map, npc)
        npc.will = False
        used_npcs.append(npc.name)
        if ask_bool(movemap,
                    f&#34;{name} gifted you a &#39;{item.pretty_name}&#39;. Do you want to accept it?&#34;):
            figure.give_item(item.name)


class Trainer(se.Object):
    &#34;&#34;&#34;Trauner class to fight against&#34;&#34;&#34;

    def __init__(self, poke, name, gender, texts, lose_texts, no_poke_texts,
                 win_texts, sx, sy, arg_proto={}):
        super().__init__(&#34;a&#34;, state=&#34;solid&#34;)
        # attributes
        self.arg_proto = arg_proto
        self.name = name
        self.gender = gender
        self.poke = poke
        self.texts = texts
        self.lose_texts = lose_texts
        self.no_poke_texts = no_poke_texts
        self.win_texts = win_texts
        self.sx = sx
        self.sy = sy

    def do(self, _map):
        &#34;&#34;&#34;Interaction with the trainer&#34;&#34;&#34;
        if figure.has_item(&#34;shut_the_fuck_up_stone&#34;):
            return
        if figure.x == self.x and self.poke.hp &gt; 0 and (self.name not in used_npcs or not settings.save_trainers):
            for i in range(figure.y + 1 if figure.y &lt; self.y else self.y + 1,
                           self.y if figure.y &lt; self.y else figure.y):
                if any(j.state == &#34;solid&#34; for j in _map.obmap[i][self.x]):
                    return
            movemap.full_show()
            time.sleep(0.7)
            try:
                exclamation.add(movemap, self.x - movemap.x, self.y - 1 - movemap.y)
            except se.CoordinateError:
                pass
            movemap.show()
            time.sleep(1)
            exclamation.remove()
            while self.y != figure.y + (2 if self.y &gt; figure.y else -2):
                self.set(self.x, self.y + (-1 if self.y &gt; figure.y + 1 or self.y == figure.y - 1 else 1))
                movemap.full_show()
                time.sleep(0.3)
            if any([poke.hp &gt; 0 for poke in figure.pokes[:6]]):
                movemap_text(self.x, self.y, self.texts)
                winner = fight([poke for poke in figure.pokes[:6] if poke.hp &gt; 0][0],
                               self.poke, info={&#34;type&#34;: &#34;duel&#34;, &#34;player&#34;: self})
                movemap_text(self.x, self.y, {True: self.lose_texts,
                                              False: self.win_texts + [&#34; &lt; Here u go 20$&#34;]}[winner == self.poke])
                if winner != self.poke:
                    figure.add_money(20)
                    used_npcs.append(self.name)
            else:
                movemap_text(self.x, self.y, self.no_poke_texts)
                used_npcs.append(self.name)
            while self.y != self.sy:
                self.set(self.x, self.y + (1 if self.y &lt; self.sy else -1))
                movemap.full_show()
                time.sleep(0.3)


class CenterInteract(se.Object):
    &#34;&#34;&#34;Triggers a conversation in the Pokete center&#34;&#34;&#34;

    def action(self, ob):
        &#34;&#34;&#34;Triggers the interaction in the Pokete center&#34;&#34;&#34;
        global ev
        ev = &#34;&#34;
        movemap.full_show()
        movemap_text(int(movemap.width / 2), 3,
                     [&#34; &lt; Welcome to the Pokete-Center&#34;,
                      &#34; &lt; What do you want to do?&#34;,
                      &#34; &lt; a: See your full deck\n b: Heal all your Poketes\n c: Go&#34;])
        while True:
            if ev == &#34;&#39;a&#39;&#34;:
                ev = &#34;&#34;
                while &#34;__fallback__&#34; in [p.identifier for p in figure.pokes]:
                    figure.pokes.pop([p.identifier for p in figure.pokes].index(&#34;__fallback__&#34;))
                balls_label_rechar()
                deck(figure.pokes)
                break
            elif ev == &#34;&#39;b&#39;&#34;:
                ev = &#34;&#34;
                heal()
                time.sleep(0.5)
                movemap_text(int(movemap.width / 2), 3, [&#34; &lt; ...&#34;,
                                                         &#34; &lt; Your Poketes are now healed!&#34;])
                break
            elif ev == &#34;&#39;c&#39;&#34;:
                ev = &#34;&#34;
                break
            std_loop()
            time.sleep(0.05)
        movemap.full_show(init=True)


class ShopInteract(se.Object):
    &#34;&#34;&#34;Triggers an conversation in the shop&#34;&#34;&#34;

    def action(self, ob):
        &#34;&#34;&#34;Triggers an interaction in the shop&#34;&#34;&#34;
        global ev
        ev = &#34;&#34;
        movemap.full_show()
        movemap_text(int(movemap.width / 2), 3, [&#34; &lt; Welcome to the Pokete-Shop&#34;,
                                                 &#34; &lt; Wanna buy something?&#34;])
        buy()
        movemap.full_show(init=True)
        movemap_text(int(movemap.width / 2), 3, [&#34; &lt; Have a great day!&#34;])


class CenterDor(se.Object):
    &#34;&#34;&#34;Dor class for the map to enter centers and shops&#34;&#34;&#34;

    def action(self, ob):
        &#34;&#34;&#34;Trigger&#34;&#34;&#34;
        figure.remove()
        i = figure.map.name
        figure.add(figure.oldmap,
                   figure.oldmap.dor.x
                   if figure.map == centermap
                   else figure.oldmap.shopdor.x,
                   figure.oldmap.dor.y + 1
                   if figure.map == centermap
                   else figure.oldmap.shopdor.y + 1)
        figure.oldmap = ob_maps[i]
        game(figure.map)


class Dor(se.Object):
    &#34;&#34;&#34;Dor class for the map to enter other maps&#34;&#34;&#34;

    def action(self, ob):
        &#34;&#34;&#34;Trigger&#34;&#34;&#34;
        figure.remove()
        i = figure.map.name
        figure.add(ob_maps[self.arg_proto[&#34;map&#34;]], self.arg_proto[&#34;x&#34;],
                   self.arg_proto[&#34;y&#34;])
        figure.oldmap = ob_maps[i]
        game(ob_maps[self.arg_proto[&#34;map&#34;]])


class DorToCenter(Dor):
    &#34;&#34;&#34;Dor that leads to the Pokete center&#34;&#34;&#34;

    def __init__(self):
        super().__init__(&#34;#&#34;, state=&#34;float&#34;,
                         arg_proto={&#34;map&#34;: &#34;centermap&#34;,
                                    &#34;x&#34;: int(centermap.width / 2), &#34;y&#34;: 7})


class DorToShop(Dor):
    &#34;&#34;&#34;Dor that leads to the shop&#34;&#34;&#34;

    def __init__(self):
        super().__init__(&#34;#&#34;, state=&#34;float&#34;,
                         arg_proto={&#34;map&#34;: &#34;shopmap&#34;,
                                    &#34;x&#34;: int(shopmap.width / 2), &#34;y&#34;: 7})


class ChanceDor(Dor):
    &#34;&#34;&#34;Same as dor but with a chance&#34;&#34;&#34;

    def action(self, ob):
        &#34;&#34;&#34;Trigger&#34;&#34;&#34;
        if random.randint(0, self.arg_proto[&#34;chance&#34;]) == 0:
            super().action(ob)


class Poke:
    &#34;&#34;&#34;The Pokete class&#34;&#34;&#34;

    def __init__(self, poke, xp, _hp=&#34;SKIP&#34;, _attacks=None,
                 player=True, shiny=False):
        self.inf = p_data.pokes[poke]
        # Attributes
        self.enem = None
        self.oldhp = 0
        self.xp = xp
        self.identifier = poke
        self.shiny = shiny
        self.atc = 0
        self.defense = 0
        self.initiative = 0
        self.hp = self.inf[&#34;hp&#34;]
        self.name = self.inf[&#34;name&#34;]
        self.miss_chance = self.inf[&#34;miss_chance&#34;]
        self.lose_xp = self.inf[&#34;lose_xp&#34;]
        self.evolve_poke = self.inf[&#34;evolve_poke&#34;]
        self.evolve_lvl = self.inf[&#34;evolve_lvl&#34;]
        self.types = [getattr(types, i) for i in self.inf[&#34;types&#34;]]
        self.type = self.types[0]
        self.attac_obs = []
        self.atc_labels = []
        self.effects = []
        if _attacks is not None:
            assert (len(_attacks) &lt;= 4), f&#34;A Pokete {poke} can&#39;t have more than 4 attacks!&#34;
            self.attacks = [atc for atc in _attacks
                            if self.lvl() &gt;= p_data.attacks[atc][&#34;min_lvl&#34;]]
        else:
            self.attacks = self.inf[&#34;attacks&#34;][:4]
        if self.shiny:
            self.hp += 5
        self.set_player(player)
        # Backup vars
        self.full_hp = self.hp
        self.full_miss_chance = self.miss_chance
        # Labels
        self.hp_bar = HealthBar(self)
        self.hp_bar.make(self.hp)
        self.desc = se.Text(liner(self.inf[&#34;desc&#34;], se.screen_width - 34))
        self.ico = se.Box(4, 11)
        for ico in self.inf[&#34;ico&#34;]:
            esccode = (str.join(&#34;&#34;, [getattr(Color, i) for i in ico[&#34;esc&#34;]])
                       if ico[&#34;esc&#34;] is not None
                       else &#34;&#34;)
            self.ico.add_ob(se.Text(ico[&#34;txt&#34;], state=&#34;float&#34;,
                                    esccode=esccode,
                                    ignore=f&#39;{esccode} {Color.reset}&#39;), 0, 0)
        self.text_hp = se.Text(f&#34;HP:{self.hp}&#34;, state=&#34;float&#34;)
        self.text_lvl = se.Text(f&#34;Lvl:{self.lvl()}&#34;, state=&#34;float&#34;)
        self.text_name = se.Text(self.name,
                                 esccode=Color.underlined + (Color.yellow
                                                             if self.shiny
                                                             else &#34;&#34;),
                                 state=&#34;float&#34;)
        self.text_xp = se.Text(
            f&#34;XP:{self.xp - (self.lvl() ** 2 - 1)}/{((self.lvl() + 1) ** 2 - 1) - (self.lvl() ** 2 - 1)}&#34;,
            state=&#34;float&#34;)
        self.text_type = se.Text(self.type.name.capitalize(),
                                 state=&#34;float&#34;, esccode=self.type.color)
        self.tril = se.Object(&#34;&lt;&#34;, state=&#34;float&#34;)
        self.trir = se.Object(&#34;&gt;&#34;, state=&#34;float&#34;)
        self.pball_small = se.Object(&#34;o&#34;)
        self.set_vars()

    def set_player(self, player):
        &#34;&#34;&#34;Sets the player attribute when the Pokete changes the owner&#34;&#34;&#34;
        self.player = player
        self.affil = &#34;you&#34; if self.player else &#34;enemy&#34;
        self.ext_name = f&#39;{self.name}({self.affil})&#39;

    def set_vars(self):
        &#34;&#34;&#34;Updates/sets some vars&#34;&#34;&#34;
        for name in [&#34;atc&#34;, &#34;defense&#34;, &#34;initiative&#34;]:
            setattr(self, name, self.lvl() + self.inf[name] + (2 if self.shiny else 0))
        i = [Attack(atc)
             for atc in self.attacks
             if self.lvl() &gt;= p_data.attacks[atc][&#34;min_lvl&#34;]]
        for old_ob, obj in zip(self.attac_obs, i):
            obj.ap = old_ob.ap
        self.attac_obs = i
        for obj in self.atc_labels:
            fightbox.rem_ob(obj)
        self.atc_labels = [se.Text(&#34;&#34;) for _ in self.attac_obs]
        self.label_rechar()

    def dict(self):
        &#34;&#34;&#34;Returns a dict with all information about the Pokete&#34;&#34;&#34;
        return {&#34;name&#34;: self.identifier, &#34;xp&#34;: self.xp, &#34;hp&#34;: self.hp,
                &#34;ap&#34;: [atc.ap for atc in self.attac_obs],
                &#34;effects&#34;: [e.c_name for e in self.effects],
                &#34;attacks&#34;: self.attacks,
                &#34;shiny&#34;: self.shiny}

    def set_ap(self, dic):
        &#34;&#34;&#34;Sets attack aps form a list&#34;&#34;&#34;
        for atc, ap in zip(self.attac_obs, dic):
            atc.ap = ap if ap != &#34;SKIP&#34; else atc.ap
        self.label_rechar()

    def label_rechar(self):
        &#34;&#34;&#34;Rechars the attack labels&#34;&#34;&#34;
        for i, atc in enumerate(self.attac_obs):
            self.atc_labels[i].rechar(f&#34;{i + 1}: &#34;)
            self.atc_labels[i] += se.Text(atc.name, esccode=atc.type.color) + se.Text(f&#34;-{atc.ap}&#34;)

    def lvl(self):
        &#34;&#34;&#34;Returns level&#34;&#34;&#34;
        return int(math.sqrt(self.xp + 1))

    def attack(self, attac, enem):
        &#34;&#34;&#34;Attack process&#34;&#34;&#34;
        if attac.ap &gt; 0:
            for e in self.effects:
                e.remove()
            for e in self.effects:
                if (i := e.effect()) == 1:
                    self.label_rechar()
                    return
                elif i == 0:
                    pass
            if any([type(i) is effects.confusion for i in self.effects]):
                self.enem = enem = self
            else:
                self.enem = enem
            enem.oldhp = enem.hp
            self.oldhp = self.hp
            effectivity = (1.3 if enem.type.name in attac.type.effective
                           else 0.5
                           if enem.type.name in attac.type.ineffective
                           else 1
                           )
            n_hp = round((self.atc * attac.factor / (enem.defense if enem.defense &gt;= 1 else 1)) *
                         random.choices([0, 0.75, 1, 1.26], weights=[attac.miss_chance + self.miss_chance, 1, 1, 1],
                                        k=1)[0] * effectivity)
            enem.hp -= max(n_hp, 0)
            enem.hp = max(enem.hp, 0)
            time.sleep(0.4)
            for i in attac.move:
                getattr(self, f&#34;move_{i}&#34;)()
            exec(attac.action)
            attac.ap -= 1
            fightmap.outp.outp(
                f&#39;{self.ext_name} used {attac.name}! {self.name + &#34; missed!&#34; if n_hp == 0 and attac.factor != 0 else &#34;&#34;}\n{&#34;That was very effective! &#34; if effectivity == 1.3 and n_hp &gt; 0 else &#34;&#34;}{&#34;That was not effective! &#34; if effectivity == 0.5 and n_hp &gt; 0 else &#34;&#34;}&#39;)
            if enem == self:
                time.sleep(1)
                fightmap.outp.outp(f&#39;{self.ext_name} hurt it self!&#39;)
            if n_hp != 0 or attac.factor == 0:
                attac.give_effect(enem)
            for obj in [enem, self] if enem != self else [enem]:
                obj.hp_bar.update(obj.oldhp)
            self.label_rechar()
            fightmap.show()

    def move_attack(self):
        &#34;&#34;&#34;Attack move&#34;&#34;&#34;
        for i, j, t in zip([3, -3], [2, -2], [0.3, 0]):
            self.ico.move(i if self.player else -i, -j if self.player else j)
            fightmap.show()
            time.sleep(t)

    def move_pound(self):
        &#34;&#34;&#34;Pound move&#34;&#34;&#34;
        for i in [-1, 1]:
            self.ico.move(0, i)
            fightmap.show()
            time.sleep(0.3)

    def move_arch(self):
        &#34;&#34;&#34;Arch move&#34;&#34;&#34;
        if self.enem == self:
            return
        line = se.Line(Color.thicc + Color.yellow + &#34;-&#34; + Color.reset,
                       self.enem.ico.x - self.ico.x + (-11 if self.player else 11),
                       self.enem.ico.y - self.ico.y, l_type=&#34;crippled&#34;)
        line.add(self.ico.map, self.ico.x + (11 if self.player else -1),
                 self.ico.y + 1)
        self.ico.map.show()
        time.sleep(1)
        line.remove()
        del line

    def move_throw(self, txt=&#34;#&#34;):
        &#34;&#34;&#34;Throw move&#34;&#34;&#34;
        if self.enem == self:
            return
        line = se.Line(&#34; &#34;, self.enem.ico.x - self.ico.x + (-11 if self.player else 11),
                       self.enem.ico.y - self.ico.y, l_type=&#34;crippled&#34;)
        line.add(self.ico.map, self.ico.x + (11 if self.player else -1),
                 self.ico.y + 1)
        self.ico.map.show()
        for i in range(len(line.obs)):
            line.obs[i].rechar(txt)
            if i != 0:
                line.obs[i - 1].rechar(line.char)
            time.sleep(0.05)
            self.ico.map.show()
        line.remove()
        del line

    def move_fireball(self):
        &#34;&#34;&#34;Fireball move&#34;&#34;&#34;
        self.move_throw(txt=Color.thicc + Color.red + &#34;*&#34; + Color.reset)

    def move_shine(self, ico=Color.thicc + Color.green + &#34;*&#34; + Color.reset):
        &#34;&#34;&#34;Shine Move&#34;&#34;&#34;
        shines = [se.Object(ico) for _ in range(4)]
        for i, x, y in zip(shines, [self.ico.x - 1, self.ico.x + 11, self.ico.x - 1,
                                    self.ico.x + 11],
                           [self.ico.y, self.ico.y, self.ico.y + 3, self.ico.y + 3]):
            i.add(self.ico.map, x, y)
            self.ico.map.show()
            time.sleep(0.2)
        time.sleep(0.2)
        for i in shines:
            i.remove()
        self.ico.map.show()

    def move_downgrade(self):
        &#34;&#34;&#34;Downgrade move&#34;&#34;&#34;
        self.enem.move_shine(ico=Color.thicc + Color.red + &#34;-&#34; + Color.reset)

    def evolve(self):
        &#34;&#34;&#34;Evolves the Pokete to its evolve_poke&#34;&#34;&#34;
        if not self.player:
            return
        new = Poke(self.evolve_poke, self.xp, _attacks=self.attacks)
        self.ico.remove()
        self.ico.add(evomap, round(evomap.width / 2 - 4),
                     round((evomap.height - 8) / 2))
        self.move_shine()
        evomap.outp.outp(&#34;Look!&#34;)
        time.sleep(0.5)
        evomap.outp.outp(f&#34;{evomap.outp.text}\n{self.name} is evolving!&#34;)
        time.sleep(1)
        for i in range(8):
            for j, k in zip([self.ico, new.ico], [new.ico, self.ico]):
                j.remove()
                k.add(evomap, round(evomap.width / 2 - 4),
                      round((evomap.height - 8) / 2))
                time.sleep(0.7 - i * 0.09999)
                evomap.show()
        self.ico.remove()
        new.ico.add(evomap, round(evomap.width / 2 - 4),
                    round((evomap.height - 8) / 2))
        evomap.show()
        time.sleep(0.01)
        new.move_shine()
        evomap.outp.outp(f&#34;{self.name} evolved to {new.name}!&#34;)
        time.sleep(5)
        figure.pokes[figure.pokes.index(self)] = new
        if new.identifier not in caught_poketes:
            caught_poketes.append(new.identifier)
        del self


class Station(se.Square):
    &#34;&#34;&#34;Selectable station for Roadmap&#34;&#34;&#34;
    choosen = None
    obs = []

    def __init__(self, associate, additionals, width, height, char=&#34;#&#34;,
                 w_next=&#34;&#34;, a_next=&#34;&#34;, s_next=&#34;&#34;, d_next=&#34;&#34;, state=&#34;solid&#34;,
                 arg_proto={}):
        self.org_char = char
        self.associates = [associate] + [ob_maps[i] for i in additionals]
        self.color = &#34;&#34;
        super().__init__(char, width, height)
        for i in [&#34;w_next&#34;, &#34;a_next&#34;, &#34;s_next&#34;, &#34;d_next&#34;]:
            exec(f&#34;self.{i}={i}&#34;)
        Station.obs.append(self)

    def choose(self):
        &#34;&#34;&#34;Chooses and hightlights the station&#34;&#34;&#34;
        self.rechar(Color.red + Color.thicc + self.org_char + Color.reset)
        Station.choosen = self
        roadmap.info_label.rechar(self.associates[0].pretty_name if
                                  self.has_been_visited() else
                                  &#34;???&#34;)

    def unchoose(self):
        &#34;&#34;&#34;Unchooses the station&#34;&#34;&#34;
        self.rechar(self.color + self.org_char + Color.reset)

    def next(self, ev):
        &#34;&#34;&#34;Chooses the next station in a certain direction&#34;&#34;&#34;
        ev = ev.strip(&#34;&#39;&#34;)
        if (ne := getattr(self, ev + &#34;_next&#34;)) != &#34;&#34;:
            self.unchoose()
            getattr(roadmap, ne).choose()

    def has_been_visited(self):
        &#34;&#34;&#34;Returns if the stations map has been visited before&#34;&#34;&#34;
        return self.associates[0].name in visited_maps

    def is_city(self):
        &#34;&#34;&#34;Returns if the station is a city&#34;&#34;&#34;
        return &#34;pokecenter&#34; in p_data.map_data[self.associates[0].name][&#34;hard_obs&#34;]

    def set_color(self, choose=False):
        &#34;&#34;&#34;Marks a station as visited&#34;&#34;&#34;
        if self.has_been_visited() and (self.is_city() if choose else True):
            self.color = Color.yellow
        else:
            self.color = &#34;&#34;
        self.unchoose()


class Figure(se.Object):
    &#34;&#34;&#34;The figure that moves around on the map and represents the player&#34;&#34;&#34;

    def __init__(self, char, state=&#34;solid&#34;, arg_proto={}):
        super().__init__(char, state=&#34;solid&#34;, arg_proto={})
        self.__money = 10
        self.inv = {&#34;poketeballs&#34;: 10}
        self.name = &#34;&#34;
        self.pokes = []
        self.oldmap = ob_maps[&#34;playmap_1&#34;]
        self.direction = &#34;t&#34;

    def set_args(self, si):
        &#34;&#34;&#34;Processes data from save file&#34;&#34;&#34;
        self.name = si[&#34;user&#34;]
        self.pokes = [Poke((si[&#34;pokes&#34;][poke][&#34;name&#34;]
                            if type(poke) is int else poke),
                           si[&#34;pokes&#34;][poke][&#34;xp&#34;], si[&#34;pokes&#34;][poke][&#34;hp&#34;],
                           shiny=(False
                                  if &#34;shiny&#34; not in si[&#34;pokes&#34;][poke]
                                  else si[&#34;pokes&#34;][poke][&#34;shiny&#34;]),
                           _attacks=(si[&#34;pokes&#34;][poke][&#34;attacks&#34;]
                                     if &#34;attacks&#34; in si[&#34;pokes&#34;][poke]
                                     else None)
                           )
                      for poke in si[&#34;pokes&#34;]]
        for j, poke in enumerate(self.pokes):
            poke.set_ap(si[&#34;pokes&#34;][j][&#34;ap&#34;])
            if &#34;effects&#34; in si[&#34;pokes&#34;][j]:
                for e in si[&#34;pokes&#34;][j][&#34;effects&#34;]:
                    poke.effects.append(getattr(effects, e)(poke))
        try:
            # Looking if figure would be in centermap, so the player may spawn out of the center
            if si[&#34;map&#34;] in [&#34;centermap&#34;,
                             &#34;shopmap&#34;]:
                _map = ob_maps[si[&#34;map&#34;]]
                self.add(_map, _map.dor_back1.x, _map.dor_back1.y - 1)
            else:
                if self.add(ob_maps[si[&#34;map&#34;]], si[&#34;x&#34;], si[&#34;y&#34;]) == 1:
                    raise se.CoordinateError(self, ob_maps[si[&#34;map&#34;]], si[&#34;x&#34;], si[&#34;y&#34;])
        except se.CoordinateError:
            self.add(ob_maps[&#34;playmap_1&#34;], 6, 5)
        # Those if statemnets are important to ensure compatibility with older versions
        if &#34;oldmap&#34; in si:
            self.oldmap = ob_maps[si[&#34;oldmap&#34;]]
        if &#34;inv&#34; in si:
            self.inv = si[&#34;inv&#34;]
        if &#34;money&#34; in si:
            self.set_money(si[&#34;money&#34;])
        movemap.name_label = se.Text(self.name, esccode=Color.thicc)
        movemap.balls_label = se.Text(&#34;&#34;, esccode=Color.thicc)
        movemap.code_label.rechar(self.map.pretty_name)
        balls_label_rechar()
        movemap_add_obs()

    def add_money(self, money):
        &#34;&#34;&#34;Adds money&#34;&#34;&#34;
        self.set_money(self.__money + money)

    def get_money(self):
        &#34;&#34;&#34;Returns the current money&#34;&#34;&#34;
        return self.__money

    def set_money(self, money):
        &#34;&#34;&#34;Sets the money to a certain value&#34;&#34;&#34;
        assert money &gt;= 0, &#34;money has to be positive&#34;
        self.__money = money
        for cls in [inv, buy]:
            cls.money_label.rechar(str(self.__money) + &#34;$&#34;)
            cls.box.set_ob(cls.money_label,
                           cls.box.width - 2 - len(cls.money_label.text), 0)

    def add_poke(self, poke, idx=None):
        &#34;&#34;&#34;Adds a Pokete to the players Poketes&#34;&#34;&#34;
        poke.set_player(True)
        caught_poketes.append(poke.identifier)
        if idx is None:
            self.pokes.append(poke)
        else:
            self.pokes[idx] = poke

    def give_item(self, item, amount=1):
        &#34;&#34;&#34;Gives an item to the player&#34;&#34;&#34;
        assert amount &gt; 0, &#34;Amounts have to be positive&#34;
        if item not in self.inv:
            self.inv[item] = amount
        else:
            self.inv[item] += amount

    def has_item(self, item):
        &#34;&#34;&#34;Checks if an item is already present&#34;&#34;&#34;
        if item not in self.inv:
            return False
        elif self.inv[item] &gt; 0:
            return True
        else:
            return False

    def remove_item(self, item, amount=1):
        &#34;&#34;&#34;Removes a certain amount of an item from the inv&#34;&#34;&#34;
        assert amount &gt; 0, &#34;Amounts have to be positive&#34;
        assert item in self.inv, f&#34;Item {item} is not in the inventory&#34;
        assert self.inv[item] - amount &gt;= 0, f&#34;There are not enought {item}s in the inventory&#34;
        self.inv[item] -= amount


class Attack:
    &#34;&#34;&#34;Attack that can be used by a Pokete&#34;&#34;&#34;

    def __init__(self, index):
        inf = p_data.attacks[index]
        # Attributes
        self.name = inf[&#34;name&#34;]
        self.factor = inf[&#34;factor&#34;]
        self.action = inf[&#34;action&#34;]
        self.world_action = inf[&#34;world_action&#34;]
        self.move = inf[&#34;move&#34;]
        self.miss_chance = inf[&#34;miss_chance&#34;]
        self.min_lvl = inf[&#34;min_lvl&#34;]
        self.desc = inf[&#34;desc&#34;]
        self.effect = inf[&#34;effect&#34;]
        self.is_generic = inf[&#34;is_generic&#34;]
        self.ap = inf[&#34;ap&#34;]
        self.type = getattr(types, inf[&#34;type&#34;])
        self.max_ap = self.ap
        # labels
        self.label_name = se.Text(self.name, esccode=Color.underlined,
                                  state=&#34;float&#34;)
        self.label_ap = se.Text(f&#34;AP:{self.ap}/{self.max_ap}&#34;, state=&#34;float&#34;)
        self.label_factor = se.Text(f&#34;Attack:{self.factor}&#34;, state=&#34;float&#34;)
        self.label_desc = se.Text(self.desc[:int(width / 2 - 1)], state=&#34;float&#34;)
        self.label_type_1 = se.Text(&#34;Type:&#34;, state=&#34;float&#34;)
        self.label_type_2 = se.Text(self.type.name.capitalize(),
                                    esccode=self.type.color, state=&#34;float&#34;)

    def give_effect(self, enem):
        &#34;&#34;&#34;Gives the associated effect to a Pokete&#34;&#34;&#34;
        if self.effect is not None:
            time.sleep(1.5)
            getattr(effects, self.effect)().add(enem)


class Setting(se.Box):
    &#34;&#34;&#34;The setting label for the menu&#34;&#34;&#34;

    def __init__(self, text, setting, options={}):
        super().__init__(0, 0)
        self.options = options
        self.setting = setting
        self.index = [j for j in self.options].index(getattr(settings, self.setting))
        self.text = se.Text(text + &#34;: &#34;, state=&#34;float&#34;)
        self.option_text = se.Text(self.options[getattr(settings, self.setting)],
                                   state=&#34;float&#34;)
        self.add_ob(self.text, 0, 0)
        self.add_ob(self.option_text, len(self.text.text), 0)

    def change(self):
        &#34;&#34;&#34;Change the setting&#34;&#34;&#34;
        self.index = self.index + 1 if self.index &lt; len(self.options) - 1 else 0
        setattr(settings, self.setting, [i for i in self.options][self.index])
        self.option_text.rechar(self.options[getattr(settings, self.setting)])


class Debug:
    &#34;&#34;&#34;Debug class&#34;&#34;&#34;

    @classmethod
    def pos(cls):
        &#34;&#34;&#34;Prints the position&#34;&#34;&#34;
        print(figure.x, figure.y, figure.map.name)


class Deck:
    &#34;&#34;&#34;Deck to see Poketes in&#34;&#34;&#34;

    def __init__(self):
        self.map = se.Map(height - 1, width, &#34; &#34;)
        self.submap = se.Submap(self.map, 0, 0, height=height - 1, width=width)
        self.exit_label = se.Text(&#34;1: Exit  &#34;)
        self.move_label = se.Text(&#34;2: Move    &#34;)
        self.move_free = se.Text(&#34;3: Free&#34;)
        self.index = se.Object(&#34;*&#34;)
        # adding
        self.exit_label.add(self.submap, 0, self.submap.height - 1)
        self.move_label.add(self.submap, 9, self.submap.height - 1)
        self.move_free.add(self.submap, 20, self.submap.height - 1)

    def rem_pokes(self, pokes):
        &#34;&#34;&#34;Removes all Poketes from the Deck&#34;&#34;&#34;
        for poke in pokes:
            self.remove(poke)

    def __call__(self, pokes, label=&#34;Your full deck&#34;, in_fight=False):
        &#34;&#34;&#34;Opens the deck&#34;&#34;&#34;
        global ev
        ev = &#34;&#34;
        ret_action = None
        self.map.resize(5 * int((len(pokes) + 1) / 2) + 2, width, self.map.background)
        # decksubmap.resize(height-1, width)
        se.Text(label, esccode=Color.thicc).add(self.map, 2, 0)
        se.Square(&#34;|&#34;, 1, self.map.height - 2).add(self.map,
                                                   round(self.map.width / 2), 1)
        StdFrame2(self.map.height - 1, self.map.width).add(self.map, 0, 0)
        self.move_label.rechar(&#34;2: Move    &#34;)
        indici = []
        self.add_all(pokes, True)
        self.index.index = 0
        if len(pokes) &gt; 0:
            self.index.add(self.map,
                           pokes[self.index.index].text_name.x + len(pokes[self.index.index].text_name.text) + 1,
                           pokes[self.index.index].text_name.y)
        self.submap.full_show(init=True)
        while True:
            if ev in [&#34;&#39;1&#39;&#34;, &#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                ev = &#34;&#34;
                self.rem_pokes(pokes)
                while len(self.map.obs) &gt; 0:
                    self.map.obs[0].remove()
                self.submap.set(0, 0)
                if ret_action is not None:
                    abb_funcs[ret_action]()
                return
            elif ev == &#34;&#39;2&#39;&#34;:
                ev = &#34;&#34;
                if len(pokes) == 0:
                    continue
                if not indici:
                    indici.append(self.index.index)
                    self.move_label.rechar(&#34;2: Move to &#34;)
                else:
                    indici.append(self.index.index)
                    figure.pokes[indici[0]], figure.pokes[indici[1]] = pokes[indici[1]], pokes[indici[0]]
                    pokes = figure.pokes[:len(pokes)]
                    indici = []
                    self.rem_pokes(pokes)
                    self.index.set(0, self.map.height - 1)
                    self.add_all(pokes)
                    self.index.set(
                        pokes[self.index.index].text_name.x + len(pokes[self.index.index].text_name.text) + 1,
                        pokes[self.index.index].text_name.y)
                    self.move_label.rechar(&#34;2: Move    &#34;)
                    self.submap.full_show()
            elif ev == &#34;&#39;3&#39;&#34;:
                ev = &#34;&#34;
                if ask_bool(self.submap, f&#34;Do you really want to free {figure.pokes[self.index.index].name}?&#34;):
                    self.rem_pokes(pokes)
                    figure.pokes[self.index.index] = Poke(&#34;__fallback__&#34;, 10, 0)
                    pokes = figure.pokes[:len(pokes)]
                    self.add_all(pokes)
                    self.index.set(
                        pokes[self.index.index].text_name.x + len(pokes[self.index.index].text_name.text) + 1,
                        pokes[self.index.index].text_name.y)
                    balls_label_rechar()
            elif ev in [&#34;&#39;w&#39;&#34;, &#34;&#39;a&#39;&#34;, &#34;&#39;s&#39;&#34;, &#34;&#39;d&#39;&#34;]:
                self.control(pokes, ev)
                ev = &#34;&#34;
            elif ev == &#34;Key.enter&#34;:
                ev = &#34;&#34;
                if len(pokes) == 0:
                    continue
                if in_fight:
                    if pokes[self.index.index].hp &gt; 0:
                        self.rem_pokes(pokes)
                        while len(self.map.obs) &gt; 0:
                            self.map.obs[0].remove()
                        self.submap.set(0, 0)
                        return self.index.index
                else:
                    self.rem_pokes(pokes)
                    ret_action = detail(pokes[self.index.index])
                    self.add_all(pokes)
                    if ret_action is not None:
                        ev = &#34;&#39;q&#39;&#34;
                        continue
                    self.submap.full_show(init=True)
            std_loop()
            if len(pokes) &gt; 0 and self.index.y - self.submap.y + 6 &gt; self.submap.height:
                self.submap.set(self.submap.x, self.submap.y + 1)
            elif len(pokes) &gt; 0 and self.index.y - 1 &lt; self.submap.y:
                self.submap.set(self.submap.x, self.submap.y - 1)
            time.sleep(0.05)
            self.submap.full_show()

    @staticmethod
    def add(poke, _map, x, y, in_deck=True):
        &#34;&#34;&#34;Adds a Pokete to the deck&#34;&#34;&#34;
        poke.text_name.add(_map, x + 12, y + 0)
        if poke.identifier != &#34;__fallback__&#34;:
            for obj, _x, _y in zip([poke.ico, poke.text_lvl, poke.text_hp,
                                    poke.tril, poke.trir, poke.hp_bar, poke.text_xp],
                                   [0, 12, 12, 18, 27, 19, 12],
                                   [0, 1, 2, 2, 2, 2, 3]):
                obj.add(_map, x + _x, y + _y)
            if figure.pokes.index(poke) &lt; 6 and in_deck:
                poke.pball_small.add(_map,
                                     round(_map.width / 2) - 1 if figure.pokes.index(poke) % 2 == 0 else _map.width - 2,
                                     y)
            for e in poke.effects:
                e.add_label()

    @staticmethod
    def remove(poke):
        &#34;&#34;&#34;Removes a Pokete from the deck&#34;&#34;&#34;
        for obj in [poke.ico, poke.text_name, poke.text_lvl, poke.text_hp,
                    poke.tril, poke.trir, poke.hp_bar, poke.text_xp,
                    poke.pball_small]:
            obj.remove()
        for e in poke.effects:
            e.cleanup()

    def add_all(self, pokes, init=False):
        &#34;&#34;&#34;Adds all Poketes to the deck&#34;&#34;&#34;
        j = 0
        for i, poke in enumerate(pokes):
            self.add(poke, self.map, 1 if i % 2 == 0 else round(self.map.width / 2) + 1, j * 5 + 1)
            if i % 2 == 0 and init:
                se.Square(&#34;-&#34;, self.map.width - 2, 1).add(self.map, 1, j * 5 + 5)
            if i % 2 == 1:
                j += 1

    def control(self, pokes, ev):
        &#34;&#34;&#34;Processes inputs&#34;&#34;&#34;
        if len(pokes) &lt;= 1:
            return
        for con, stat, fir, sec in zip([&#34;&#39;a&#39;&#34;, &#34;&#39;d&#39;&#34;, &#34;&#39;s&#39;&#34;, &#34;&#39;w&#39;&#34;],
                                       [self.index.index != 0, self.index.index != len(pokes) - 1,
                                        self.index.index + 2 &lt; len(pokes), self.index.index - 2 &gt;= 0],
                                       [-1, 1, 2, -2],
                                       [len(pokes) - 1, 0, self.index.index % 2,
                                        [i for i in range(len(pokes)) if i % 2 == self.index.index % 2][-1]]):
            if ev == con:
                if stat:
                    self.index.index += fir
                else:
                    self.index.index = sec
                break
        self.index.set(pokes[self.index.index].text_name.x + len(pokes[self.index.index].text_name.text) + 1,
                       pokes[self.index.index].text_name.y)


class Detail(Deck):
    &#34;&#34;&#34;Shows details about a Pokete&#34;&#34;&#34;

    def __init__(self):
        self.map = se.Map(height - 1, width, &#34; &#34;)
        self.name_label = se.Text(&#34;Details&#34;, esccode=Color.thicc)
        self.name_attacks = se.Text(&#34;Attacks&#34;, esccode=Color.thicc)
        self.frame = StdFrame2(17, self.map.width, state=&#34;float&#34;)
        self.attack_defense = se.Text(&#34;Attack:   Defense:&#34;)
        self.world_actions_label = se.Text(&#34;Abilities:&#34;)
        self.type_label = se.Text(&#34;Type:&#34;)
        self.initiative_label = se.Text(&#34;Initiative:&#34;)
        self.exit_label = se.Text(&#34;1: Exit&#34;)
        self.ability_label = se.Text(&#34;2: Use ability&#34;)
        self.line_sep1 = se.Square(&#34;-&#34;, self.map.width - 2, 1, state=&#34;float&#34;)
        self.line_sep2 = se.Square(&#34;-&#34;, self.map.width - 2, 1, state=&#34;float&#34;)
        self.line_middle = se.Square(&#34;|&#34;, 1, 10, state=&#34;float&#34;)
        # adding
        self.name_label.add(self.map, 2, 0)
        self.name_attacks.add(self.map, 2, 6)
        self.attack_defense.add(self.map, 13, 5)
        self.world_actions_label.add(self.map, 24, 4)
        self.type_label.add(self.map, 36, 5)
        self.initiative_label.add(self.map, 49, 5)
        self.exit_label.add(self.map, 0, self.map.height - 1)
        self.ability_label.add(self.map, 9, self.map.height - 1)
        self.line_sep1.add(self.map, 1, 6)
        self.line_sep2.add(self.map, 1, 11)
        self.frame.add(self.map, 0, 0)
        self.line_middle.add(self.map, round(self.map.width / 2), 7)

    def __call__(self, poke, abb=True):
        &#34;&#34;&#34;Shows details&#34;&#34;&#34;
        global ev
        ret_action = None
        self.add(poke, self.map, 1, 1, False)
        abb_obs = [i for i in poke.attac_obs
                   if i.world_action != &#34;&#34;]
        if abb_obs != [] and abb:
            self.world_actions_label.rechar(&#34;Abilities:&#34; + &#34; &#34;.join([i.name
                                                                     for i in abb_obs]))
            self.ability_label.rechar(&#34;2: Use ability&#34;)
        else:
            self.world_actions_label.rechar(&#34;&#34;)
            self.ability_label.rechar(&#34;&#34;)
        self.attack_defense.rechar(f&#34;Attack:{poke.atc}{(4 - len(str(poke.atc))) * &#39; &#39;}Defense:{poke.defense}&#34;)
        self.initiative_label.rechar(f&#34;Initiative:{poke.initiative}&#34;)
        for obj, x, y in zip([poke.desc, poke.text_type], [34, 41], [2, 5]):
            obj.add(self.map, x, y)
        for atc, x, y in zip(poke.attac_obs, [1, round(self.map.width / 2) + 1, 1,
                                              round(self.map.width / 2) + 1], [7, 7, 12, 12]):
            atc.temp_i = 0
            atc.temp_j = -30
            atc.label_desc.rechar(atc.desc[:int(width / 2 - 1)])
            atc.label_ap.rechar(f&#34;AP:{atc.ap}/{atc.max_ap}&#34;)
            for label, _x, _y in zip([atc.label_name, atc.label_factor,
                                      atc.label_type_1, atc.label_type_2,
                                      atc.label_ap, atc.label_desc],
                                     [0, 0, 11, 16, 0, 0], [0, 1, 1, 1, 2, 3]):
                label.add(self.map, x + _x, y + _y)
        self.map.show(init=True)
        while True:
            if ev in [&#34;&#39;1&#39;&#34;, &#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                ev = &#34;&#34;
                self.remove(poke)
                for obj in [poke.desc, poke.text_type]:
                    obj.remove()
                for atc in poke.attac_obs:
                    for obj in [atc.label_name, atc.label_factor, atc.label_ap,
                                atc.label_desc, atc.label_type_1, atc.label_type_2]:
                        obj.remove()
                    del atc.temp_i, atc.temp_j
                return ret_action
            elif ev == &#34;&#39;2&#39;&#34; and abb_obs != [] and abb:
                with ChooseBox(len(abb_obs) + 2, 25, name=&#34;Abilities&#34;,
                               c_obs=[se.Text(i.name)
                                      for i in abb_obs]).center_add(self.map) as box:
                    while True:
                        if ev in [&#34;&#39;s&#39;&#34;, &#34;&#39;w&#39;&#34;]:
                            box.input(ev)
                            self.map.show()
                            ev = &#34;&#34;
                        elif ev == &#34;Key.enter&#34;:
                            ret_action = abb_obs[box.index.index].world_action
                            ev = &#34;&#39;q&#39;&#34;
                            break
                        elif ev in [&#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                            ev = &#34;&#34;
                            break
                        std_loop()
                        time.sleep(0.05)
            std_loop()
            for atc in poke.attac_obs:  # This section generates the Text effect for attack labels
                if len(atc.desc) &gt; int((width - 3) / 2 - 1):
                    if atc.temp_j == 5:
                        atc.temp_i += 1
                        atc.temp_j = 0
                        if atc.temp_i == len(atc.desc) - int(width / 2 - 1) + 10:
                            atc.temp_i = 0
                            atc.temp_j = -30
                        atc.label_desc.rechar(atc.desc[atc.temp_i:int(width / 2 - 1) + atc.temp_i])
                    else:
                        atc.temp_j += 1
            time.sleep(0.05)
            self.map.show()


class Inv:
    &#34;&#34;&#34;Inventory to see and manage items in&#34;&#34;&#34;

    def __init__(self):
        self.box = ChooseBox(height - 3, 35, &#34;Inventory&#34;, &#34;R:remove&#34;)
        self.box2 = Box(7, 21)
        self.money_label = se.Text(str(figure.get_money()) + &#34;$&#34;)
        self.desc_label = se.Text(&#34; &#34;)
        # adding
        self.box.add_ob(self.money_label, self.box.width - 2 - len(self.money_label.text), 0)
        self.box2.add_ob(self.desc_label, 1, 1)

    def __call__(self):
        &#34;&#34;&#34;Opens the inventory&#34;&#34;&#34;
        global ev
        ev = &#34;&#34;
        items = self.add()
        with self.box.add(movemap, movemap.width - 35, 0):
            while True:
                if ev in [&#34;&#39;s&#39;&#34;, &#34;&#39;w&#39;&#34;]:
                    self.box.input(ev)
                    ev = &#34;&#34;
                elif ev in [&#34;&#39;4&#39;&#34;, &#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                    break
                elif ev == &#34;Key.enter&#34;:
                    obj = items[self.box.index.index]
                    self.box2.name_label.rechar(obj.pretty_name)
                    self.desc_label.rechar(liner(obj.desc, 19))
                    self.box2.add(movemap, self.box.x - 19, 3)
                    ev = &#34;&#34;
                    while True:
                        if ev == &#34;exit&#34;:
                            raise KeyboardInterrupt
                        elif ev in [&#34;Key.enter&#34;, &#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                            ev = &#34;&#34;
                            self.box2.remove()
                            if type(obj) is LearnDisc:
                                if ask_bool(movemap, f&#34;Do you want to teach &#39;{obj.attack_dict[&#39;name&#39;]}&#39;?&#34;):
                                    ex_cond = True
                                    while ex_cond:
                                        index = deck(figure.pokes[:6],
                                                     label=&#34;Your deck&#34;,
                                                     in_fight=True)
                                        if index is None:
                                            ex_cond = False
                                            movemap.show(init=True)
                                            break
                                        poke = figure.pokes[index]
                                        if getattr(types, obj.attack_dict[&#39;type&#39;]) in poke.types:
                                            break
                                        else:
                                            ex_cond = ask_bool(movemap,
                                                               f&#34;You cant&#39;t teach &#39;{obj.attack_dict[&#39;name&#39;]}&#39; to &#39;{poke.name}&#39;! \nDo you want to continue?&#34;)
                                    if not ex_cond:
                                        break
                                    if LearnAttack(poke, movemap)(obj.attack_name):
                                        items = self.rem_item(obj.name, items)
                                        if len(items) == 0:
                                            break
                                    ev = &#34;&#34;
                            break
                        time.sleep(0.05)
                        movemap.show()
                elif ev == &#34;&#39;r&#39;&#34;:
                    if ask_bool(movemap,
                                f&#34;Do you really want to throw {items[self.box.index.index].pretty_name} away?&#34;):
                        items = self.rem_item(items[self.box.index.index].name, items)
                        if len(items) == 0:
                            break
                    ev = &#34;&#34;
                std_loop()
                time.sleep(0.05)
                movemap.show()
        self.box.remove_c_obs()

    def rem_item(self, name, items):
        &#34;&#34;&#34;Removes an item to the inv&#34;&#34;&#34;
        figure.remove_item(name)
        for obj in self.box.c_obs:
            obj.remove()
        self.box.remove_c_obs()
        items = self.add()
        if not items:
            return items
        if self.box.index.index &gt;= len(items):
            self.box.set_index(len(items) - 1)
        return items

    def add(self):
        &#34;&#34;&#34;Adds all items to the box&#34;&#34;&#34;
        items = [getattr(self, i) for i in figure.inv if figure.inv[i] &gt; 0]
        self.box.add_c_obs([se.Text(f&#34;{i.pretty_name}s : {figure.inv[i.name]}&#34;) for i in items])
        return items


class Buy:
    &#34;&#34;&#34;Menu to buy items in, is triggered in shop&#34;&#34;&#34;

    def __init__(self):
        self.box = ChooseBox(height - 3, 35, &#34;Shop&#34;)
        self.box2 = Box(7, 21)
        self.items = [Inv.poketeball, Inv.superball, Inv.healing_potion,
                      Inv.super_potion, Inv.ap_potion]
        self.box.add_c_obs([se.Text(f&#34;{obj.pretty_name} : {obj.price}$&#34;)
                            for obj in self.items])
        self.money_label = se.Text(f&#34;{figure.get_money()}$&#34;)
        self.desc_label = se.Text(&#34; &#34;)
        # adding
        self.box.add_ob(self.money_label,
                        self.box.width - 2 - len(self.money_label.text), 0)
        self.box2.add_ob(self.desc_label, 1, 1)

    def __call__(self):
        &#34;&#34;&#34;Opens the buy menu&#34;&#34;&#34;
        global ev
        ev = &#34;&#34;
        with self.box.add(movemap, movemap.width - 35, 0):
            self.box2.add(movemap, self.box.x - 19, 3)
            self.rechar()
            movemap.show()
            while True:
                if ev in [&#34;&#39;s&#39;&#34;, &#34;&#39;w&#39;&#34;]:
                    self.box.input(ev)
                    self.rechar()
                    ev = &#34;&#34;
                elif ev in [&#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                    break
                elif ev == &#34;Key.enter&#34;:
                    obj = self.items[self.box.index.index]
                    if figure.get_money() - obj.price &gt;= 0:
                        figure.add_money(-obj.price)
                        figure.give_item(obj.name)
                    ev = &#34;&#34;
                std_loop()
                time.sleep(0.05)
                movemap.show()
        self.box2.remove()

    def rechar(self):
        &#34;&#34;&#34;Rechars the detail text&#34;&#34;&#34;
        obj = self.items[self.box.index.index]
        self.box2.name_label.rechar(obj.pretty_name)
        self.desc_label.rechar(liner(obj.desc, 19))


class Menu:
    &#34;&#34;&#34;Menu to manage settings and other stuff in&#34;&#34;&#34;

    def __init__(self):
        self.box = ChooseBox(height - 3, 35, &#34;Menu&#34;)
        self.playername_label = se.Text(&#34;Playername: &#34;, state=&#34;float&#34;)
        self.about_label = se.Text(&#34;About&#34;, state=&#34;float&#34;)
        self.save_label = se.Text(&#34;Save&#34;, state=&#34;float&#34;)
        self.exit_label = se.Text(&#34;Exit&#34;, state=&#34;float&#34;)
        self.realname_label = se.Text(session_info[&#34;user&#34;], state=&#34;float&#34;)
        self.box.add_c_obs([self.playername_label,
                            Setting(&#34;Autosave&#34;, &#34;autosave&#34;,
                                    {True: &#34;On&#34;, False: &#34;Off&#34;}),
                            Setting(&#34;Animations&#34;, &#34;animations&#34;,
                                    {True: &#34;On&#34;, False: &#34;Off&#34;}),
                            Setting(&#34;Save trainers&#34;, &#34;save_trainers&#34;,
                                    {True: &#34;On&#34;, False: &#34;Off&#34;}),
                            self.about_label, self.save_label,
                            self.exit_label])
        # adding
        self.box.add_ob(self.realname_label,
                        self.playername_label.rx + len(self.playername_label.text),
                        self.playername_label.ry)

    def __call__(self):
        &#34;&#34;&#34;Opens the menu&#34;&#34;&#34;
        global ev
        ev = &#34;&#34;
        self.realname_label.rechar(figure.name)
        with self.box.add(movemap, movemap.width - self.box.width, 0):
            while True:
                if ev == &#34;Key.enter&#34;:
                    # Fuck python for not having case statements
                    if ((i := self.box.c_obs[self.box.index.index]) ==
                            self.playername_label):
                        figure.name = text_input(self.realname_label, movemap,
                                                 figure.name, 18, 17)
                        movemap.underline.remove()
                        movemap.balls_label.set(0, 1)
                        movemap.name_label.rechar(figure.name,
                                                  esccode=Color.thicc)
                        movemap.balls_label.set(4 + len(movemap.name_label.text),
                                                movemap.height - 2)
                        movemap.underline.add(movemap, 0, movemap.height - 2)
                    elif i == self.save_label:  # When will python3.10 come out?
                        with InfoBox(&#34;Saving....&#34;, movemap):  # Shows a box displaying &#34;Saving....&#34; while saving
                            save()
                            time.sleep(1.5)
                    elif i == self.exit_label:
                        save()
                        exiter()
                    elif i == self.about_label:
                        about()
                    else:
                        i.change()
                    ev = &#34;&#34;
                elif ev in [&#34;&#39;s&#39;&#34;, &#34;&#39;w&#39;&#34;]:
                    self.box.input(ev)
                    ev = &#34;&#34;
                elif ev in [&#34;&#39;e&#39;&#34;, &#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                    ev = &#34;&#34;
                    break
                std_loop()
                time.sleep(0.05)
                movemap.show()


class About:
    &#34;&#34;&#34;The about text, that can be triggered in the menu&#34;&#34;&#34;

    def __init__(self):
        self.box = InfoBox(liner(f&#34;&#34;&#34;Pokete v{VERSION} -- {CODENAME}
by  lxgr-linux &lt;lxgr@protonmail.com&gt;

This  software is licensed under the GPL3, you should have gotten a copy of the GPL3 license alongside this software.
Feel  free to contribute what ever you want to this game, new Pokete contributions are especially welcome.
For  this see the comments in the definations area.
You  can contribute here: https://github.com/lxgr-linux/pokete&#34;&#34;&#34;,
                                 60, pre=&#34;&#34;), map=movemap)

    def __call__(self):
        &#34;&#34;&#34;Shows the about text&#34;&#34;&#34;
        global ev
        with self.box:
            while True:
                if ev in [&#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                    ev = &#34;&#34;
                    break
                std_loop()
                time.sleep(0.05)


class RoadMap:
    &#34;&#34;&#34;Map you can see and navigate maps on&#34;&#34;&#34;

    def __init__(self, stations):
        self.box = Box(11, 40, &#34;Roadmap&#34;)
        self.info_label = se.Text(&#34;&#34;)
        self.box.add_ob(self.info_label, 1, 1)
        for s in stations:
            obj = Station(ob_maps[s], **stations[s][&#39;gen&#39;])
            self.box.add_ob(obj, **stations[s][&#39;add&#39;])
            setattr(self, s, obj)

    def __call__(self, choose=False):
        &#34;&#34;&#34;Shows the roadmap&#34;&#34;&#34;
        global ev
        ev = &#34;&#34;
        for i in Station.obs:
            i.set_color(choose)
        [i for i in Station.obs
         if (figure.map
             if figure.map not in [shopmap, centermap]
             else figure.oldmap)
         in i.associates][0].choose()
        with self.box.add(movemap, movemap.width - self.box.width, 0):
            while True:
                if ev in [&#34;&#39;w&#39;&#34;, &#34;&#39;a&#39;&#34;, &#34;&#39;s&#39;&#34;, &#34;&#39;d&#39;&#34;]:
                    Station.choosen.next(ev)
                    ev = &#34;&#34;
                elif ev in [&#34;&#39;3&#39;&#34;, &#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                    ev = &#34;&#34;
                    break
                elif (ev == &#34;Key.enter&#34; and choose
                      and Station.choosen.has_been_visited()
                      and Station.choosen.is_city()):
                    return Station.choosen.associates[0]
                std_loop()
                time.sleep(0.05)
                movemap.show()
        Station.choosen.unchoose()


class Dex:
    &#34;&#34;&#34;The Pokete dex that shows stats about all Poketes ever caught&#34;&#34;&#34;

    def __init__(self, _map):
        self.box = ChooseBox(_map.height - 3, 35, &#34;Poketedex&#34;)
        self.detail_box = Box(16, 35)
        self.map = _map
        self.idx = 0
        self.obs = []
        self.detail_info = se.Text(&#34;&#34;, state=&#34;float&#34;)
        self.detail_desc = se.Text(&#34;&#34;, state=&#34;float&#34;)
        self.detail_box.add_ob(self.detail_info, 16, 1)
        self.detail_box.add_ob(self.detail_desc, 3, 7)

    def add_c_obs(self):
        &#34;&#34;&#34;Adds c_obs to box&#34;&#34;&#34;
        self.box.add_c_obs(self.obs[self.idx * (self.box.height - 2):(self.idx + 1) * (self.box.height - 2)])

    def rem_c_obs(self):
        &#34;&#34;&#34;Removes c_obs to box&#34;&#34;&#34;
        for c_ob in self.box.c_obs:
            c_ob.remove()
        self.box.remove_c_obs()

    def detail(self, poke):
        &#34;&#34;&#34;Shows details about the Pokete&#34;&#34;&#34;
        global ev
        ev = &#34;&#34;

        poke = Poke(poke, 0)
        desc_text = liner(poke.desc.text.replace(&#34;\n&#34;, &#34; &#34;) +
                          (f&#34;\n\n Evolves to {poke.evolve_poke if poke.evolve_poke in caught_poketes else &#39;???&#39;}.&#34;
                           if poke.evolve_lvl != 0 else &#34;&#34;), 29)
        self.detail_box.resize(9 + len(desc_text.split(&#34;\n&#34;)), 35)
        self.detail_box.name_label.rechar(poke.name)
        self.detail_box.add_ob(poke.ico, 3, 2)
        self.detail_desc.rechar(desc_text)
        self.detail_info.rechar(&#34;Type: &#34;)
        self.detail_info += se.Text(poke.type.name.capitalize(),
                                    esccode=poke.type.color) + se.Text((f&#34;&#34;&#34;
HP: {poke.hp}
Attack: {poke.atc}
Defense: {poke.defense}
Initiative: {poke.initiative}&#34;&#34;&#34;))
        with self.detail_box.center_add(self.map):
            while True:
                if ev in [&#34;&#39;e&#39;&#34;, &#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                    ev = &#34;&#34;
                    break
                std_loop()
                time.sleep(0.05)
                self.map.show()
        self.detail_box.rem_ob(poke.ico)

    def __call__(self, pokes):
        &#34;&#34;&#34;Opens the dex&#34;&#34;&#34;
        global ev
        ev = &#34;&#34;
        self.idx = 0

        p_dict = {i[1]: i[-1] for i in
                  sorted([(pokes[j][&#34;types&#34;][0], j, pokes[j])
                          for j in list(pokes)[1:]])}
        self.obs = [se.Text(f&#34;{i + 1} {p_dict[poke][&#39;name&#39;] if poke in caught_poketes else &#39;???&#39;}&#34;, state=&#34;float&#34;)
                    for i, poke in enumerate(p_dict)]
        self.add_c_obs()
        with self.box.add(self.map, self.map.width - self.box.width, 0):
            while True:
                for event, idx, n_idx, add, idx_2 in zip([&#34;&#39;s&#39;&#34;, &#34;&#39;w&#39;&#34;],
                                                         [len(self.box.c_obs) - 1, 0], [0, self.box.height - 3],
                                                         [1, -1], [-1, 0]):
                    if ev == event and self.box.index.index == idx:
                        if self.box.c_obs[self.box.index.index] != self.obs[idx_2]:
                            self.rem_c_obs()
                            self.idx += add
                            self.add_c_obs()
                            self.box.set_index(n_idx)
                        ev = &#34;&#34;
                if ev == &#34;Key.enter&#34;:
                    if &#34;???&#34; not in self.box.c_obs[self.box.index.index].text:
                        self.detail(list(p_dict)[self.idx * (self.box.height - 2)
                                                 + self.box.index.index])
                    ev = &#34;&#34;
                elif ev in [&#34;&#39;s&#39;&#34;, &#34;&#39;w&#39;&#34;]:
                    self.box.input(ev)
                    ev = &#34;&#34;
                elif ev in [&#34;&#39;e&#39;&#34;, &#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                    ev = &#34;&#34;
                    break
                std_loop()
                time.sleep(0.05)
                self.map.show()
            self.rem_c_obs()


class Help(About):
    &#34;&#34;&#34;Helptext that can be displayed by pressing &#39;?&#39;&#34;&#34;&#34;

    def __init__(self, _map):
        self.map = _map
        self.help_text = &#34;&#34;&#34;
Controls:
&#39;w&#39;:up, &#39;a&#39;:left,
&#39;s&#39;:down, &#39;d&#39;:right,
&#39;e&#39;:menu

When walking into the high grass (&#39;;&#39;) you may get attacked
by wild Poketes, those can be killed or weakened and caught.
NPCs will talk to you when walking up to them.
For more information about how to play this game, check out
https://git.io/JRRqe
&#34;&#34;&#34;
        self.box = InfoBox(self.help_text, self.map)
        self.box.name_label.rechar(&#34;Help&#34;)
        self.box.info_label.rechar(&#34;q:close&#34;)


class LearnAttack:
    &#34;&#34;&#34;Lets a Pokete learn a new attack&#34;&#34;&#34;

    def __init__(self, poke, _map=None):
        if _map is None:
            self.map = fightmap
        else:
            self.map = _map
        self.poke = poke
        self.box = ChooseBox(6, 25, name=&#34;Attacks&#34;, info=&#34;1: Details&#34;)

    def __call__(self, attack=None):
        &#34;&#34;&#34;Starts the learning process&#34;&#34;&#34;
        global ev
        attacks = p_data.attacks
        if attack is None:
            pool = [i for i in attacks
                    if attacks[i][&#34;type&#34;] in
                    [i.name for i in self.poke.types]
                    and attacks[i][&#34;is_generic&#34;]]
            full_pool = [i for i in self.poke.inf[&#34;attacks&#34;] +
                         self.poke.inf[&#34;pool&#34;] + pool
                         if i not in self.poke.attacks
                         and attacks[i][&#34;min_lvl&#34;] &lt;= self.poke.lvl()]
            if len(full_pool) == 0:
                return False
            new_attack = random.choice(full_pool)
        else:
            new_attack = attack
        if ask_bool(self.map, f&#34;{self.poke.name} wants to learn {attacks[new_attack][&#39;name&#39;]}!&#34;):
            if len(self.poke.attac_obs) != len(self.poke.attacks):
                self.poke.attacks[-1] = new_attack
            elif len(self.poke.attacks) &lt; 4:
                self.poke.attacks.append(new_attack)
            else:
                self.box.add_c_obs([se.Text(f&#34;{i + 1}: {j.name}&#34;, state=float)
                                    for i, j in enumerate(self.poke.attac_obs)])
                with self.box.center_add(self.map):
                    while True:
                        if ev in [&#34;&#39;s&#39;&#34;, &#34;&#39;w&#39;&#34;]:
                            self.box.input(ev)
                            self.map.show()
                            ev = &#34;&#34;
                        elif ev == &#34;Key.enter&#34;:
                            self.poke.attacks[self.box.index.index] = new_attack
                            with InfoBox(f&#34;{self.poke.name} learned {attacks[new_attack][&#39;name&#39;]}!&#34;, self.map):
                                time.sleep(3)
                            ev = &#34;&#34;
                            break
                        elif ev == &#34;&#39;1&#39;&#34;:
                            ev = &#34;&#34;
                            detail(self.poke, False)
                            self.map.show(init=True)
                        elif ev in [&#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                            ev = &#34;&#34;
                            break
                        std_loop()
                        time.sleep(0.05)
                self.box.remove_c_obs()
            self.poke.set_vars()
            return True
        else:
            return False


# General use functions
#######################

def heal():
    &#34;&#34;&#34;Heals all poketes&#34;&#34;&#34;
    for poke in figure.pokes:
        poke.hp = poke.full_hp
        poke.effects = []
        poke.miss_chance = poke.full_miss_chance
        poke.text_hp.rechar(f&#34;HP:{poke.hp}&#34;)
        poke.set_vars()
        poke.hp_bar.make(poke.hp)
        for atc in poke.attac_obs:
            atc.ap = atc.max_ap
        poke.label_rechar()
        balls_label_rechar()


def autosave():
    &#34;&#34;&#34;Autosaves the game every 5 mins&#34;&#34;&#34;
    while True:
        time.sleep(300)
        if settings.autosave:
            save()


def save():
    &#34;&#34;&#34;Saves all relevant data to savefile&#34;&#34;&#34;
    session_info = {
        &#34;user&#34;: figure.name,
        &#34;ver&#34;: VERSION,
        &#34;map&#34;: figure.map.name,
        &#34;oldmap&#34;: figure.oldmap.name,
        &#34;x&#34;: figure.x,
        &#34;y&#34;: figure.y,
        &#34;pokes&#34;: {i: poke.dict() for i, poke in enumerate(figure.pokes)},
        &#34;inv&#34;: figure.inv,
        &#34;money&#34;: figure.get_money(),
        &#34;settings&#34;: settings.dict(),
        &#34;caught_poketes&#34;: list(dict.fromkeys(caught_poketes + [i.identifier for i in figure.pokes])),
        &#34;visited_maps&#34;: visited_maps,
        &#34;startup_time&#34;: __t,
        &#34;used_npcs&#34;: list(dict.fromkeys(used_npcs)),  # filters doublicates from used_npcs
    }
    with open(home + SAVEPATH + &#34;/pokete.py&#34;, &#34;w+&#34;) as file:
        # writes the data to the save file in a nice format
        file.write(f&#34;session_info = {pp.pformat(session_info, sort_dicts=False)}&#34;)


def on_press(key):
    &#34;&#34;&#34;Sets the ev variable&#34;&#34;&#34;
    global ev
    ev = str(key)


def reset_terminal():
    &#34;&#34;&#34;Resets the terminals state&#34;&#34;&#34;
    if sys.platform == &#34;linux&#34;:
        termios.tcsetattr(fd, termios.TCSADRAIN, old_settings)


def exiter():
    &#34;&#34;&#34;Exit function&#34;&#34;&#34;
    reset_terminal()
    sys.exit()


def std_loop():
    &#34;&#34;&#34;Standart action executed in most loops&#34;&#34;&#34;
    global ev
    if ev == &#34;exit&#34;:
        raise KeyboardInterrupt


def text_input(obj, _map, name, wrap_len, max_len=1000000):
    &#34;&#34;&#34;Processes text input&#34;&#34;&#34;
    global ev
    ev = &#34;&#34;
    obj.rechar(hard_liner(wrap_len, name + &#34;â–ˆ&#34;))
    bname = name
    _map.show()
    while True:
        if ev in [&#34;Key.enter&#34;, &#34;Key.esc&#34;]:
            ev = &#34;&#34;
            obj.rechar(hard_liner(wrap_len, name))
            _map.show()
            return name
        elif ev == &#34;Key.backspace&#34;:
            if len(name) &lt;= 0:
                ev = &#34;&#34;
                obj.rechar(bname)
                _map.show()
                return bname
            name = name[:-1]
            obj.rechar(hard_liner(wrap_len, name + &#34;â–ˆ&#34;))
            _map.show()
            ev = &#34;&#34;
        elif ev not in [&#34;&#34;, &#34;Key.enter&#34;, &#34;exit&#34;, &#34;Key.backspace&#34;, &#34;Key.shift&#34;,
                        &#34;Key.shift_r&#34;, &#34;Key.esc&#34;] and len(name) &lt; max_len:
            if ev == &#34;Key.space&#34;:
                ev = &#34;&#39; &#39;&#34;
            name += str(ev.strip(&#34;&#39;&#34;))
            obj.rechar(hard_liner(wrap_len, name + &#34;â–ˆ&#34;))
            _map.show()
            ev = &#34;&#34;
        std_loop()
        time.sleep(0.05)


# Functions needed for movemap
##############################

def fast_change(arr, setob):
    &#34;&#34;&#34;Changes fast between a list of texts&#34;&#34;&#34;
    _i = 1
    while _i &lt; len(arr):
        arr[_i - 1].remove()
        arr[_i].add(fightmap, setob.x, setob.y)
        fightmap.show()
        time.sleep(0.1)
        _i += 1


def balls_label_rechar():
    &#34;&#34;&#34;Rechars the balls label&#34;&#34;&#34;
    movemap.balls_label.text = &#34;&#34;
    for i in range(6):
        movemap.balls_label.text += &#34;-&#34; if i &gt;= len(figure.pokes) or figure.pokes[i].identifier == &#34;__fallback__&#34;\
                                        else &#34;o&#34; if figure.pokes[i].hp &gt; 0 else &#34;x&#34;
    movemap.balls_label.rechar(movemap.balls_label.text, esccode=Color.thicc)


def mapresize(_map):
    &#34;&#34;&#34;Resizes a map&#34;&#34;&#34;
    width, height = os.get_terminal_size()
    if _map.width != width or _map.height != height - 1:
        _map.resize(height - 1, width, &#34; &#34;)
        return True
    return False


def codes(string):
    &#34;&#34;&#34;Cheats&#34;&#34;&#34;
    for i in string:
        if i == &#34;w&#34;:
            save()
        elif i == &#34;!&#34;:
            exec(string[string.index(&#34;!&#34;) + 2:])
            return
        elif i == &#34;e&#34;:
            try:
                exec(string[string.index(&#34;e&#34;) + 2:])
            except Exception as exc:
                print(exc)
            return
        elif i == &#34;q&#34;:
            exiter()


def movemap_text(x, y, arr):
    &#34;&#34;&#34;Shows dialog text on movemap&#34;&#34;&#34;
    global ev
    # This ensures the game does not crash when big chunks of text are displayed
    for c, i, j, k in zip([x, y], [&#34;x&#34;, &#34;y&#34;],
                          [movemap.width, movemap.height], [17, 10]):
        while c - getattr(movemap, i) + k &gt;= j:
            movemap.set(movemap.x + (1 if i == &#34;x&#34; else 0),
                        movemap.y + (1 if i == &#34;y&#34; else 0))
            movemap.show()
            time.sleep(0.045)
    # End section
    multitext.rechar(&#34;&#34;)
    multitext.add(movemap, x - movemap.x + 1, y - movemap.y)
    arr = [arr[i] + (&#34; &gt;&#34; if i != len(arr) - 1 else &#34;&#34;) for i in range(len(arr))]
    for t in arr:
        ev = &#34;&#34;
        multitext.rechar(&#34;&#34;)
        for i in range(len(t) + 1):
            multitext.outp(liner(t[:i], movemap.width - (x - movemap.x + 1), &#34;   &#34;))
            time.sleep(0.045)
            std_loop()
            if ev != &#34;&#34;:
                ev = &#34;&#34;
                break
        multitext.outp(liner(t, movemap.width - (x - movemap.x + 1), &#34;   &#34;))
        while True:
            std_loop()
            if ev != &#34;&#34;:
                break
            time.sleep(0.05)
    multitext.remove()


def movemap_add_obs():
    &#34;&#34;&#34;Adds needed labels to movemap&#34;&#34;&#34;
    movemap.underline = se.Square(&#34;-&#34;, movemap.width, 1)
    movemap.name_label.add(movemap, 2, movemap.height - 2)
    movemap.balls_label.add(movemap, 4 + len(movemap.name_label.text),
                            movemap.height - 2)
    movemap.underline.add(movemap, 0, movemap.height - 2)
    movemap.label.add(movemap, 0, movemap.height - 1)
    movemap.code_label.add(movemap, 0, 0)


# Functions for fight
#####################

def fight_clean_up(player, enemy):
    &#34;&#34;&#34;Removes all labels from fightmap&#34;&#34;&#34;
    for obj in [enemy.text_name, enemy.text_lvl, enemy.text_hp, enemy.ico,
                enemy.hp_bar, enemy.tril, enemy.trir, player.text_name,
                player.text_lvl, player.text_hp, player.ico, player.hp_bar,
                player.tril, player.trir, enemy.pball_small]:
        obj.remove()
    fightbox.remove_c_obs()
    for i in [player, enemy]:
        for j in i.effects:
            j.cleanup()


def fight_add_3(player, enemy):
    &#34;&#34;&#34;Adds player labels&#34;&#34;&#34;
    if player.identifier != &#34;__fallback__&#34;:
        player.text_name.add(fightmap, fightmap.width - 17, fightmap.height - 9)
        player.text_lvl.add(fightmap, fightmap.width - 17, fightmap.height - 8)
        player.tril.add(fightmap, fightmap.width - 11, fightmap.height - 7)
        player.trir.add(fightmap, fightmap.width - 2, fightmap.height - 7)
        player.hp_bar.add(fightmap, fightmap.width - 10, fightmap.height - 7)
        player.text_hp.add(fightmap, fightmap.width - 17, fightmap.height - 7)
        player.ico.add(fightmap, 3, fightmap.height - 10)
    return [player, enemy]


def fight_add_1(player, enemy):
    &#34;&#34;&#34;Adds enemy and general labels to fightmap&#34;&#34;&#34;
    for obj, x, y in zip([enemy.tril, enemy.trir,
                          enemy.text_name, enemy.text_lvl,
                          enemy.text_hp, enemy.ico, enemy.hp_bar],
                         [7, 16, 1, 1, 1, fightmap.width - 14, 8],
                         [3, 3, 1, 2, 3, 2, 3]):
        obj.add(fightmap, x, y)
    if enemy.identifier in caught_poketes:
        enemy.pball_small.add(fightmap, len(fightmap.e_underline.text) - 1, 1)
    if player.identifier != &#34;__fallback__&#34;:
        fightbox.add_c_obs(player.atc_labels)
        fightbox.set_index(0)
    return [player, enemy]


def fight_add_2(player, enemy):
    &#34;&#34;&#34;Adds player labels with sleeps&#34;&#34;&#34;
    if player.identifier != &#34;__fallback__&#34;:
        player.text_name.add(fightmap, fightmap.width - 17, fightmap.height - 9)
        time.sleep(0.05)
        fightmap.show()
        player.text_lvl.add(fightmap, fightmap.width - 17, fightmap.height - 8)
        time.sleep(0.05)
        fightmap.show()
        player.tril.add(fightmap, fightmap.width - 11, fightmap.height - 7)
        player.trir.add(fightmap, fightmap.width - 2, fightmap.height - 7)
        player.hp_bar.add(fightmap, fightmap.width - 10, fightmap.height - 7)
        player.text_hp.add(fightmap, fightmap.width - 17, fightmap.height - 7)
        time.sleep(0.05)
        fightmap.show()
        player.ico.add(fightmap, 3, fightmap.height - 10)


def fight_throw(obj, enem, info, chance, name):
    &#34;&#34;&#34;Throws a Poketeball&#34;&#34;&#34;
    if obj.identifier == &#34;__fallback__&#34; or info[&#34;type&#34;] == &#34;duel&#34;:
        return 1
    fightmap.outp.rechar(f&#34;You threw a {name.capitalize()}!&#34;)
    fast_change([enem.ico, deadico1, deadico2, pball], enem.ico)
    time.sleep(random.choice([1, 2, 3, 4]))
    figure.remove_item(name)
    catch_chance = 20 if figure.map == ob_maps[&#34;playmap_1&#34;] else 0
    for effect in enem.effects:
        catch_chance += effect.catch_chance
    if random.choices([True, False],
                      weights=[(enem.full_hp / enem.hp) * chance + catch_chance,
                               enem.full_hp], k=1)[0]:
        figure.add_poke(enem)
        fightmap.outp.outp(f&#34;You catched {enem.name}&#34;)
        time.sleep(2)
        pball.remove()
        fight_clean_up(obj, enem)
        balls_label_rechar()
        return 2
    else:
        fightmap.outp.outp(&#34;You missed!&#34;)
        fightmap.show()
        pball.remove()
        enem.ico.add(fightmap, enem.ico.x, enem.ico.y)
        fightmap.show()


def fight_potion(obj, enem, info, hp, name):
    &#34;&#34;&#34;Potion function&#34;&#34;&#34;
    figure.remove_item(name)
    obj.oldhp = obj.hp
    if obj.hp + hp &gt; obj.full_hp:
        obj.hp = obj.full_hp
    else:
        obj.hp += hp
    obj.hp_bar.update(obj.oldhp)
    return


def fight_heal_potion(obj, enem, info):
    &#34;&#34;&#34;Healing potion function&#34;&#34;&#34;
    return fight_potion(obj, enem, info, 5, &#34;healing_potion&#34;)


def fight_super_potion(obj, enem, info):
    &#34;&#34;&#34;Super potion function&#34;&#34;&#34;
    return fight_potion(obj, enem, info, 15, &#34;super_potion&#34;)


def fight_poketeball(obj, enem, info):
    &#34;&#34;&#34;Poketeball function&#34;&#34;&#34;
    return fight_throw(obj, enem, info, 1, &#34;poketeball&#34;)


def fight_superball(obj, enem, info):
    &#34;&#34;&#34;Superball function&#34;&#34;&#34;
    return fight_throw(obj, enem, info, 6, &#34;superball&#34;)


def fight_hyperball(obj, enem, info):
    &#34;&#34;&#34;Hyperball function&#34;&#34;&#34;
    return fight_throw(obj, enem, info, 1000, &#34;hyperball&#34;)


def fight_ap_potion(obj, enem, info):
    &#34;&#34;&#34;AP potion function&#34;&#34;&#34;
    figure.remove_item(&#34;ap_potion&#34;)
    for atc in obj.attac_obs:
        atc.ap = atc.max_ap
    obj.label_rechar()


# Playmap extra action functions
# Those are adding additional actions to playmaps
#################################################

class ExtraActions:
    &#34;&#34;&#34;Extra actions class to keep track of extra actions&#34;&#34;&#34;

    @staticmethod
    def water(obs):
        &#34;&#34;&#34;Water animation&#34;&#34;&#34;
        if settings.animations:
            for obj in obs:
                if random.randint(0, 9) == 0:
                    if &#34; &#34; not in obj.char:
                        obj.rechar([i for i in
                                    [Color.lightblue + &#34;~&#34; + Color.reset,
                                     Color.blue + &#34;~&#34; + Color.reset]
                                    if i != obj.char][0])
                        if obj.x == figure.x and obj.y == figure.y:
                            figure.redraw()

    @staticmethod
    def playmap_4():
        &#34;&#34;&#34;Water animation&#34;&#34;&#34;
        ExtraActions.water(ob_maps[&#34;playmap_4&#34;].lake_1.obs)

    @staticmethod
    def playmap_11():
        &#34;&#34;&#34;Water animation&#34;&#34;&#34;
        ExtraActions.water(ob_maps[&#34;playmap_11&#34;].lake_1.obs)

    @staticmethod
    def playmap_18():
        &#34;&#34;&#34;Water animation&#34;&#34;&#34;
        ExtraActions.water(ob_maps[&#34;playmap_18&#34;].lake_1.obs)

    @staticmethod
    def playmap_21():
        &#34;&#34;&#34;Water animation&#34;&#34;&#34;
        ExtraActions.water(ob_maps[&#34;playmap_21&#34;].lake_1.obs)

    @staticmethod
    def playmap_7():
        &#34;&#34;&#34;Cave animation&#34;&#34;&#34;
        for obj in ob_maps[&#34;playmap_7&#34;].inner_walls.obs + ob_maps[&#34;playmap_7&#34;].trainers + [
            getattr(ob_maps[&#34;playmap_7&#34;], i) for i in p_data.map_data[&#34;playmap_7&#34;][&#34;balls&#34;] if
                &#34;playmap_7.&#34; + i not in used_npcs or not save_trainers]:
            if obj.added and math.sqrt((obj.y - figure.y) ** 2 + (obj.x - figure.x) ** 2) &lt;= 3:
                obj.rechar(obj.bchar)
            else:
                obj.rechar(&#34; &#34;)


# NPC functions
###############

def playmap_17_boy():
    &#34;&#34;&#34;Interaction with boy&#34;&#34;&#34;
    npc = ob_maps[&#34;playmap_17&#34;].boy_1
    if &#34;choka&#34; in [i.identifier for i in figure.pokes[:6]]:
        movemap_text(npc.x, npc.y,
                     [&#34; &lt; Oh, cool!&#34;, &#34; &lt; You have a Choka!&#34;,
                      &#34; &lt; I&#39;ve never seen one before!&#34;, &#34; &lt; Here you go, 200$&#34;])
        if ask_bool(movemap, &#34;Young boy gifted you 200$. Do you want to accept it?&#34;):
            figure.add_money(200)
        npc.will = False
        used_npcs.append(npc.name)
    else:
        movemap_text(npc.x, npc.y,
                     [&#34; &lt; In this region lives the wÃ¼rgos Pokete.&#34;,
                      f&#34; &lt; At level {p_data.pokes[&#39;wÃ¼rgos&#39;][&#39;evolve_lvl&#39;]} it evolves to Choka.&#34;,
                      &#34; &lt; I have never seen one before!&#34;])


def playmap_20_trader():
    &#34;&#34;&#34;Interaction with trader&#34;&#34;&#34;
    npc = ob_maps[&#34;playmap_20&#34;].trader_2
    movemap_text(npc.x, npc.y,
                 [&#34; &lt; I&#39;ve lived in this town for long time and therefore have found some cool Poketes.&#34;,
                  &#34; &lt; Do you want to trade my cool Pokete?&#34;])
    if ask_bool(movemap, &#34;Do you want to trade a Pokete?&#34;):
        if (index := deck(figure.pokes[:6], &#34;Your deck&#34;, True)) is None:
            return
        figure.add_poke(Poke(&#34;ostri&#34;, 500), index)
        used_npcs.append(npc.name)
        with InfoBox(f&#34;You received: {figure.pokes[index].name.capitalize()} at level {figure.pokes[index].lvl()}.&#34;,
                     movemap):
            time.sleep(3)
        movemap_text(npc.x, npc.y, [&#34; &lt; Cool, huh?&#34;])


def playmap_23_npc_8():
    &#34;&#34;&#34;Interaction with npc_8&#34;&#34;&#34;
    npc = ob_maps[&#34;playmap_23&#34;].npc_8
    if ask_bool(movemap, &#34;The man gifted you 100$. Do you want to accept it?&#34;):
        npc.will = False
        used_npcs.append(npc.name)
        figure.add_money(100)


# main functions
################

def teleport():
    &#34;&#34;&#34;Teleports the player to another towns pokecenter&#34;&#34;&#34;
    if (obj := roadmap(choose=True)) is None:
        return
    else:
        cen_d = p_data.map_data[obj.name][&#34;hard_obs&#34;][&#34;pokecenter&#34;]
        Dor(&#34;&#34;, state=&#34;float&#34;, arg_proto={&#34;map&#34;: obj.name,
                                          &#34;x&#34;: cen_d[&#34;x&#34;] + 5, &#34;y&#34;: cen_d[&#34;y&#34;] + 6}).action(None)


def swap_poke():
    &#34;&#34;&#34;Trading with other players in the local network&#34;&#34;&#34;
    if not ask_bool(movemap, &#34;Do you want to trade with another trainer?&#34;):
        return
    port = 65432
    save()
    do = ask_bool(movemap, &#34;Do you want to be the host?&#34;)
    if (index := deck(figure.pokes[:6], &#34;Your deck&#34;, True)) is None:
        return
    if do:
        with InfoBox(f&#34;Hostname: {socket.gethostname()}\nWaiting...&#34;, movemap):
            host = &#39;&#39;
            with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:
                s.bind((host, port))
                s.listen()
                conn, addr = s.accept()
                with conn:
                    while True:
                        data = conn.recv(1024)
                        if not data:
                            break
                        decode_data = json.loads(data.decode())
                        conn.sendall(str.encode(json.dumps({&#34;name&#34;: figure.name,
                                                            &#34;poke&#34;: figure.pokes[index].dict()})))
    else:
        host = &#34;&#34;
        while host == &#34;&#34;:
            host = ask_text(movemap, &#34;Please type in the hosts hostname&#34;,
                            &#34;Host:&#34;, &#34;&#34;, 30)
            if host in [&#34;localhost&#34;, &#34;127.0.0.1&#34;, socket.gethostname()]:
                with InfoBox(&#34;You&#39;re not allowed trade with your self!\nYou fool!&#34;, movemap):
                    time.sleep(5)
                host = &#34;&#34;
        with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:
            try:
                s.connect((host, port))
            except Exception as err:
                with InfoBox(str(err), movemap):
                    time.sleep(5)
                return
            s.sendall(str.encode(json.dumps({&#34;name&#34;: figure.name,
                                             &#34;poke&#34;: figure.pokes[index].dict()})))
            data = s.recv(1024)
            decode_data = json.loads(data.decode())
    figure.add_poke(Poke(decode_data[&#34;poke&#34;][&#34;name&#34;],
                         decode_data[&#34;poke&#34;][&#34;xp&#34;],
                         decode_data[&#34;poke&#34;][&#34;hp&#34;]), index)
    figure.pokes[index].set_ap(decode_data[&#34;poke&#34;][&#34;ap&#34;])
    save()  # to avoid duping
    with InfoBox(
            f&#34;You received: {figure.pokes[index].name.capitalize()} at level {figure.pokes[index].lvl()} from {decode_data[&#39;name&#39;]}.&#34;,
            movemap):
        time.sleep(3)


def ask_bool(_map, text):
    &#34;&#34;&#34;Asks the player to aswer a yes/no question&#34;&#34;&#34;
    global ev
    assert len(text) &gt;= 12, &#34;Text has to be longer then 12 characters!&#34;
    text_len = sorted([len(i) for i in text.split(&#39;\n&#39;)])[-1]
    with InfoBox(f&#34;{text}\n{round(text_len / 2 - 6) * &#39; &#39;}[Y]es   [N]o&#34;, _map):
        while True:
            if ev == &#34;&#39;y&#39;&#34;:
                ret = True
                break
            elif ev in [&#34;&#39;n&#39;&#34;, &#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                ret = False
                break
            std_loop()
            time.sleep(0.05)
            _map.show()
        ev = &#34;&#34;
    return ret


def ask_text(_map, infotext, introtext, text, max_len):
    &#34;&#34;&#34;Asks the player to input a text&#34;&#34;&#34;
    with InputBox(infotext, introtext, text, max_len, _map) as inputbox:
        ret = text_input(inputbox.text, _map, text, max_len + 1, max_len=max_len)
    return ret


def fight(player, enemy, info={&#34;type&#34;: &#34;wild&#34;, &#34;player&#34;: &#34; &#34;}):
    &#34;&#34;&#34;Fight&#34;&#34;&#34;
    global ev
    # fancy stuff
    if settings.animations:
        fancymap = se.Map(background=&#34; &#34;, width=width, height=height - 1)
        vec_list = [se.Line(&#34; &#34;, i * int(width / 2), j * int((height - 1) / 2))
                    for i, j in zip([1, 1, -1, -1], [1, -1, -1, 1])]
        for i in vec_list:
            i.add(fancymap, int(width / 2), int((height - 1) / 2))
        fancymap.show()
        for j, l in zip(list(zip(*[i.obs for i in vec_list])),
                        list(zip(*[list(2 * &#34; &#34;) + k
                                   for k in [i.obs for i in vec_list]])), ):
            for i in j:
                i.rechar(&#34;-&#34;)
            for k in l:
                if k != &#34; &#34;:
                    k.rechar(&#34; &#34;)
            fancymap.show()
            time.sleep(0.005)
        for i in vec_list:
            i.remove()
        del fancymap
    # fancy stuff end
    players = fight_add_1(player, enemy)
    if info[&#34;type&#34;] == &#34;wild&#34;:
        fightmap.outp.outp(f&#34;A wild {enemy.name} appeared!&#34;)
    elif info[&#34;type&#34;] == &#34;duel&#34;:
        fightmap.outp.outp(f&#34;{info[&#39;player&#39;].name} started a fight!&#34;)
        time.sleep(1)
        fightmap.outp.outp(f&#39;{fightmap.outp.text}\n{info[&#34;player&#34;].gender} used {enemy.name} against you!&#39;)
    time.sleep(1)
    fight_add_2(player, enemy)
    if player.identifier != &#34;__fallback__&#34;:
        fast_change([player.ico, deadico2, deadico1, player.ico], player.ico)
        fightmap.outp.outp(f&#34;You used {player.name}&#34;)
    fightmap.show()
    time.sleep(0.5)
    if player.identifier == &#34;__fallback__&#34;:
        obj, enem = players
    else:
        enem = sorted(zip([i.initiative for i in players],
                          [1, 0], players))[0][-1]  # The [1, 0] array is needed to avoid comparing two Poke objects
        obj = [i for i in players if i != enem][-1]
    for i in players:
        for j in i.effects:
            j.readd()
    while True:
        if obj.player:
            fightmap.outp.append(se.Text((&#34;\n&#34;
                                          if &#34;\n&#34; not in fightmap.outp.text
                                          else &#34;&#34;) +
                                         &#34;What do you want to do?&#34;, state=&#34;float&#34;))
            if obj.identifier == &#34;__fallback__&#34;:
                time.sleep(1)
                fightmap.outp.outp(&#34;You don&#39;t have any living poketes left!&#34;)
            while True:  # Inputloop for general options
                if ev == &#34;&#39;1&#39;&#34;:
                    ev = &#34;&#34;
                    if player.identifier == &#34;__fallback__&#34;:
                        continue
                    with fightbox.add(fightmap, 1, fightmap.height - 7):
                        while True:  # Inputloop for attack options
                            if ev in [&#34;&#39;s&#39;&#34;, &#34;&#39;w&#39;&#34;]:
                                fightbox.input(ev)
                                fightmap.show()
                                ev = &#34;&#34;
                            elif ev in [f&#34;&#39;{i + 1}&#39;&#34; for i in
                                        range(len(obj.attac_obs))] + [&#34;Key.enter&#34;]:
                                attack = obj.attac_obs[fightbox.index.index
                                                       if ev == &#34;Key.enter&#34;
                                                       else int(ev.strip(&#34;&#39;&#34;)) - 1]
                                ev = &#34;&#34;
                                if attack.ap == 0:
                                    continue
                                break
                            elif ev in [&#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                                ev = &#34;&#34;
                                attack = &#34;&#34;
                                break
                            std_loop()
                            time.sleep(0.05)
                    if attack != &#34;&#34;:
                        break
                elif ev == &#34;&#39;2&#39;&#34;:
                    ev = &#34;&#34;
                    if ((info[&#34;type&#34;] == &#34;duel&#34;
                         and player.identifier != &#34;__fallback__&#34;)
                            or not ask_bool(fightmap, &#34;Do you really want to run away?&#34;)):
                        continue
                    fightmap.outp.outp(&#34;You ran away!&#34;)
                    time.sleep(1)
                    fight_clean_up(player, enemy)
                    return enem
                elif ev == &#34;&#39;3&#39;&#34;:
                    ev = &#34;&#34;
                    items = [getattr(Inv, i)
                             for i in figure.inv
                             if getattr(Inv, i).fn is not None
                             and figure.inv[i] &gt; 0]
                    if not items:
                        fightmap.outp.outp(&#34;You don&#39;t have any items left!\nWhat do you want to do?&#34;)
                        continue
                    fight_invbox.add_c_obs([se.Text(f&#34;{i.pretty_name}s : {figure.inv[i.name]}&#34;) for i in items])
                    fight_invbox.set_index(0)
                    with fight_invbox.add(fightmap, fightmap.width - 35, 0):
                        while True:
                            if ev in [&#34;&#39;s&#39;&#34;, &#34;&#39;w&#39;&#34;]:
                                fight_invbox.input(ev)
                                fightmap.show()
                                ev = &#34;&#34;
                            elif ev in [&#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                                item = &#34;&#34;
                                break
                            elif ev == &#34;Key.enter&#34;:
                                item = items[fight_invbox.index.index]
                                break
                            std_loop()
                            time.sleep(0.05)
                    fight_invbox.remove_c_obs()
                    if item == &#34;&#34;:
                        continue
                    i = eval(item.fn)(obj, enem, info)  # I hate you python for not having switch statements
                    if i == 1:
                        continue
                    elif i == 2:
                        return
                    attack = &#34;&#34;
                    break
                elif ev == &#34;&#39;4&#39;&#34;:
                    ev = &#34;&#34;
                    if obj.identifier == &#34;__fallback__&#34;:
                        continue
                    fight_clean_up(player, enemy)
                    index = deck(figure.pokes[:6], &#34;Your deck&#34;, True)
                    player = player if index is None else figure.pokes[index]
                    fight_add_1(player, enemy)
                    fightbox.set_index(0)
                    players = fight_add_3(player, enemy)
                    fightmap.outp.outp(f&#34;You have choosen {player.name}&#34;)
                    for i in players:
                        for j in i.effects:
                            time.sleep(1)
                            j.readd()
                    attack = &#34;&#34;
                    break
                std_loop()
                time.sleep(0.1)
        else:
            attack = random.choices([i for i in obj.attac_obs],
                                    weights=[i.ap * ((1.5
                                                      if enem.type.name in i.type.effective
                                                      else 0.5
                                                      if enem.type.name in i.type.ineffective
                                                      else 1)
                                                     if info[&#34;type&#34;] == &#34;duel&#34;
                                                     else 1)
                                             for i in obj.attac_obs])[0]
        time.sleep(0.3)
        if attack != &#34;&#34;:
            obj.attack(attack, enem)
        fightmap.show()
        time.sleep(0.5)
        if any([i.hp &lt;= 0 for i in players]):
            winner = [i for i in players if i.hp &gt; 0][0]
            break
        elif all([i.ap == 0 for i in obj.attac_obs]):
            winner = [i for i in players if i != obj][0]
            time.sleep(2)
            fightmap.outp.outp(f&#34;{obj.ext_name} has used all its&#39; attacks!&#34;)
            time.sleep(3)
            break
        obj = [i for i in players if i != obj][-1]
        enem = [i for i in players if i != obj][-1]
    loser = [obj for obj in players if obj != winner][0]
    xp = (loser.lose_xp + (1 if loser.lvl() &gt; winner.lvl() else 0)) * (2 if info[&#34;type&#34;] == &#34;duel&#34; else 1)
    fightmap.outp.outp(f&#34;{winner.ext_name} won!&#34; + (f&#39;\nXP + {xp}&#39;
                                                    if winner.player else &#39;&#39;))
    if winner.player:
        old_lvl = winner.lvl()
        winner.xp += xp
        winner.text_xp.rechar(
            f&#34;XP:{winner.xp - (winner.lvl() ** 2 - 1)}/{((winner.lvl() + 1) ** 2 - 1) - (winner.lvl() ** 2 - 1)}&#34;)
        winner.text_lvl.rechar(f&#34;Lvl:{winner.lvl()}&#34;)
        if old_lvl &lt; winner.lvl():
            time.sleep(1)
            fightmap.outp.outp(f&#34;{winner.name} reached lvl {winner.lvl()}!&#34;)
            winner.move_shine()
            time.sleep(0.5)
            winner.set_vars()
            if winner.lvl() % 5 == 0:
                LearnAttack(winner)()
            if winner.evolve_poke != &#34;&#34; and winner.lvl() &gt;= winner.evolve_lvl:
                winner.evolve()
    fightmap.show()
    time.sleep(1)
    ico = [obj for obj in players if obj != winner][0].ico
    fast_change([ico, deadico1, deadico2], ico)
    deadico2.remove()
    fightmap.show()
    fight_clean_up(player, enemy)
    balls_label_rechar()
    return winner


def game(_map):
    &#34;&#34;&#34;Game function&#34;&#34;&#34;
    global ev, width, height
    ev = &#34;&#34;
    print(&#34;\033]0;Pokete - &#34; + _map.pretty_name + &#34;\a&#34;, end=&#34;&#34;)
    if _map.name not in visited_maps:
        visited_maps.append(_map.name)
    movemap.code_label.rechar(figure.map.pretty_name)
    movemap.set(0, 0)
    movemap.bmap = _map
    movemap.full_show()
    inp_dict = {&#34;&#39;1&#39;&#34;: &#39;deck(figure.pokes[:6], &#34;Your deck&#34;)&#39;,
                &#34;&#39;3&#39;&#34;: &#39;roadmap()&#39;, &#34;&#39;4&#39;&#34;: &#39;inv()&#39;,
                &#34;&#39;5&#39;&#34;: &#39;pokete_dex(pokes)&#39;, &#34;&#39;e&#39;&#34;: &#39;menu()&#39;,
                &#34;&#39;?&#39;&#34;: &#39;help_page()&#39;}
    while True:
        for name, _dir, x, y in zip([&#34;&#39;w&#39;&#34;, &#34;&#39;a&#39;&#34;, &#34;&#39;s&#39;&#34;, &#34;&#39;d&#39;&#34;],
                                    [&#34;t&#34;, &#34;l&#34;, &#34;b&#34;, &#34;r&#34;],  # Directions are not beening used yet
                                    [0, -1, 0, 1], [-1, 0, 1, 0]):
            if ev == name:
                figure.direction = _dir
                figure.set(figure.x + x, figure.y + y)
                ev = &#34;&#34;
                break
        else:
            if ev in inp_dict:
                exec(inp_dict[ev])
                ev = &#34;&#34;
                movemap.show(init=True)
            elif ev == &#34;&#39;2&#39;&#34;:
                ev = &#34;&#34;
                if ask_bool(movemap, &#34;Do you realy want to exit?&#34;):
                    save()
                    exiter()
            elif ev == &#34;&#39;:&#39;&#34;:
                ev = &#34;&#34;
                inp = text_input(movemap.code_label, movemap, &#34;:&#34;,
                                 movemap.width,
                                 (movemap.width - 2) * movemap.height - 1)[1:]
                movemap.code_label.outp(figure.map.pretty_name)
                codes(inp)
                ev = &#34;&#34;
        std_loop()
        _map.extra_actions()
        for trainer in _map.trainers:
            trainer.do(_map)
        time.sleep(0.05)
        for statement, x, y in zip([figure.x + 6 &gt; movemap.x + movemap.width,
                                    figure.x &lt; movemap.x + 6,
                                    figure.y + 6 &gt; movemap.y + movemap.height,
                                    figure.y &lt; movemap.y + 6],
                                   [1, -1, 0, 0], [0, 0, 1, -1]):
            if statement:
                movemap.set(movemap.x + x, movemap.y + y)
        # checking for resizing
        width, height = os.get_terminal_size()
        if movemap.width != width or movemap.height != height - 1:
            for obj in [movemap.underline, movemap.label, movemap.code_label,
                        movemap.name_label, movemap.balls_label]:
                obj.remove()
            movemap.resize(height - 1, width, &#34; &#34;)
            movemap_add_obs()
        movemap.full_show()


def intro():
    &#34;&#34;&#34;Intro to Pokete&#34;&#34;&#34;
    movemap.set(0, 0)
    movemap.bmap = ob_maps[&#34;intromap&#34;]
    movemap.full_show()
    while figure.name in [&#34;DEFAULT&#34;, &#34;&#34;]:
        figure.name = ask_text(movemap,
                               &#34;Welcome to Pokete!\nPlease choose your name!\n&#34;,
                               &#34;Name:&#34;, &#34;&#34;, 17)
    movemap.underline.remove()
    movemap.balls_label.set(0, 1)
    movemap.name_label.rechar(figure.name, esccode=Color.thicc)
    movemap.balls_label.set(4 + len(movemap.name_label.text), movemap.height - 2)
    movemap.underline.add(movemap, 0, movemap.height - 2)
    movemap_text(4, 3, [&#34; &lt; Hello my child.&#34;,
                        &#34; &lt; You&#39;re now ten years old.&#34;,
                        &#34; &lt; And I think it&#39;s now time for you to travel the world and be a Pokete-trainer.&#34;,
                        &#34;&lt; Therefore I give you this powerfull &#39;Steini&#39;, 15 &#39;Poketeballs&#39; to catch Poketes and a &#34;
                        &#34;&#39;Healing potion&#39;.&#34;,
                        &#34; &lt; You will be the best Pokete-Trainer in Nice town.&#34;,
                        &#34; &lt; Now go out and become the best!&#34;])
    game(ob_maps[&#34;intromap&#34;])


def parse_obj(_map, name, obj, _dict):
    &#34;&#34;&#34;Parses an object to an maps attribute and adds it&#34;&#34;&#34;
    setattr(_map, name, obj)
    obj.add(_map, _dict[&#34;x&#34;], _dict[&#34;y&#34;])


def gen_obs():
    &#34;&#34;&#34;Genrates all objests on the maps&#34;&#34;&#34;
    map_data = p_data.map_data
    npcs = p_data.npcs
    trainers = p_data.trainers
    # generating objects from map_data
    for ob_map in map_data:
        _map = ob_maps[ob_map]
        for hard_ob in map_data[ob_map][&#34;hard_obs&#34;]:
            parse_obj(_map, hard_ob,
                      se.Text(map_data[ob_map][&#34;hard_obs&#34;][hard_ob][&#34;txt&#34;],
                              ignore=&#34; &#34;),
                      map_data[ob_map][&#34;hard_obs&#34;][hard_ob])
        for soft_ob in map_data[ob_map][&#34;soft_obs&#34;]:
            parse_obj(_map, soft_ob,
                      se.Text(map_data[ob_map][&#34;soft_obs&#34;][soft_ob][&#34;txt&#34;],
                              ignore=Color.green + &#34; &#34; + Color.reset,
                              ob_class=HightGrass,
                              ob_args=_map.poke_args,
                              state=&#34;float&#34;, esccode=Color.green),
                      map_data[ob_map][&#34;soft_obs&#34;][soft_ob])
        for dor in map_data[ob_map][&#34;dors&#34;]:
            parse_obj(_map, dor,
                      Dor(&#34; &#34;, state=&#34;float&#34;,
                          arg_proto=map_data[ob_map][&#34;dors&#34;][dor][&#34;args&#34;]),
                      map_data[ob_map][&#34;dors&#34;][dor])
        for ball in map_data[ob_map][&#34;balls&#34;]:
            if f&#39;{ob_map}.{ball}&#39; not in used_npcs or not settings.save_trainers:
                parse_obj(_map, ball,
                          Poketeball(f&#34;{ob_map}.{ball}&#34;),
                          map_data[ob_map][&#34;balls&#34;][ball])
    # NPCs
    for npc in npcs:
        parse_obj(ob_maps[npcs[npc][&#34;map&#34;]], npc,
                  NPC(npc, npcs[npc][&#34;texts&#34;], npcs[npc][&#34;fn&#34;],
                      npcs[npc][&#34;args&#34;]),
                  npcs[npc])

    # adding all trainer to map
    for i in trainers:
        _map = ob_maps[i]
        for j in trainers[i]:
            _map.trainers.append(Trainer(Poke(*j[&#34;poke&#34;], player=False),
                                         *j[&#34;args&#34;]))
    for ob_map in map_data:
        _map = ob_maps[ob_map]
        for trainer in _map.trainers:
            trainer.add(_map, trainer.sx, trainer.sy)


def gen_maps():
    &#34;&#34;&#34;Genrates all maps&#34;&#34;&#34;
    maps = {}
    for ob_map in p_data.maps:
        args = p_data.maps[ob_map]
        args[&#34;extra_actions&#34;] = (getattr(ExtraActions, args[&#34;extra_actions&#34;],
                                         None)
                                 if args[&#34;extra_actions&#34;] is not None
                                 else None)
        maps[ob_map] = PlayMap(name=ob_map, **args)
    return maps


def check_version(sinfo):
    &#34;&#34;&#34;Checks if version in save file is the same as current version&#34;&#34;&#34;
    if &#34;ver&#34; not in sinfo:
        return
    else:
        ver = sinfo[&#34;ver&#34;]
    if VERSION != ver and sort_vers([VERSION, ver])[-1] == ver:
        if not ask_bool(loading_screen.map,
                        liner(f&#34;The save file was created \
on version &#39;{ver}&#39;, the current version is &#39;{VERSION}&#39;, \
such a downgrade may result in data loss! \
Do you want to continue?&#34;, int(width * 2 / 3))):
            exiter()


def main():
    &#34;&#34;&#34;Main function&#34;&#34;&#34;
    os.system(&#34;&#34;)
    recognising = threading.Thread(target=recogniser)
    autosaveing = threading.Thread(target=autosave)
    recognising.daemon = True
    autosaveing.daemon = True
    recognising.start()
    autosaveing.start()
    check_version(session_info)
    if figure.name == &#34;DEFAULT&#34;:
        intro()
    game(figure.map)


def map_additions():
    # playmap_1
    _map = ob_maps[&#34;playmap_1&#34;]
    _map.dor = DorToCenter()
    # adding
    _map.dor.add(_map, 25, 4)

    # cave_1
    _map = ob_maps[&#34;cave_1&#34;]
    _map.inner = se.Text(&#34;&#34;&#34;##########################################
##        ################################
#         ################################
#         ######################        ##
#                    ###########   #######
#         #########  ###########   #######
#         #########  ###########   #######
###################  ###########   #######
##############                     #######
##############                     #######
##############  ##########################
##############  ##########################
########        ##########################
#######  ###    ##########################
#######  ###    ##########################
#######         ##########################
##############  ##########################
##############  ##########################
##############  ##########################
##############  ##########################&#34;&#34;&#34;, ignore=&#34;#&#34;,
                         ob_class=HightGrass,
                         ob_args={&#34;pokes&#34;: [&#34;steini&#34;, &#34;bato&#34;, &#34;lilstone&#34;, &#34;rato&#34;], &#34;minlvl&#34;: 40,
                                  &#34;maxlvl&#34;: 128},
                         state=&#34;float&#34;)
    # adding
    _map.inner.add(_map, 0, 0)

    # playmap_3
    _map = ob_maps[&#34;playmap_3&#34;]
    _map.dor = DorToCenter()
    _map.shopdor = DorToShop()
    # adding
    _map.dor.add(_map, 25, 6)
    _map.shopdor.add(_map, 61, 6)

    # playmap_4
    _map = ob_maps[&#34;playmap_4&#34;]
    _map.dor_playmap_5 = ChanceDor(&#34;~&#34;, state=&#34;float&#34;,
                                   arg_proto={&#34;chance&#34;: 6,
                                              &#34;map&#34;: &#34;playmap_5&#34;,
                                              &#34;x&#34;: 17, &#34;y&#34;: 16})
    _map.lake_1 = se.Text(&#34;&#34;&#34;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~         ~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~                 ~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~                    ~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~                                ~~~~~~~~~~~~~~
~~~~~~~~~                                           ~~~~~~~~
~~~&#34;&#34;&#34;, esccode=Color.blue, ignore=Color.blue + &#34; &#34; + Color.reset,
                          ob_class=HightGrass,
                          ob_args={&#34;pokes&#34;: [&#34;karpi&#34;, &#34;blub&#34;], &#34;minlvl&#34;: 180, &#34;maxlvl&#34;: 230},
                          state=&#34;float&#34;)
    # adding
    _map.dor_playmap_5.add(_map, 56, 1)
    _map.lake_1.add(_map, 0, 0)

    # playmap_5
    _map = ob_maps[&#34;playmap_5&#34;]
    _map.inner = se.Square(&#34; &#34;, 11, 11, state=&#34;float&#34;, ob_class=HightGrass,
                           ob_args=_map.poke_args)
    # adding
    _map.inner.add(_map, 26, 1)

    # playmap_7
    _map = ob_maps[&#34;playmap_7&#34;]
    _map.inner = se.Text(&#34;&#34;&#34;##############################
#########        #############
#########        #############
#########        #############
#########        #############
#########               ######
##   ####     ####      ######
#    ####     ####     #######
#             ################
#    ####     ################
#########     ################
#########     ################
#########                   ##
#########     ################
#########     ################
#########     ################
#########             ########
###################   ########
####################  ########
##############################&#34;&#34;&#34;, ignore=&#34;#&#34;, ob_class=HightGrass,
                         ob_args=_map.poke_args, state=&#34;float&#34;)
    for ob in (_map.inner_walls.obs + _map.trainers +
               [getattr(_map, i) for i in p_data.map_data[&#34;playmap_7&#34;][&#34;balls&#34;]
                if &#34;playmap_7.&#34; + i not in used_npcs
                   or not settings.save_trainers]):
        ob.bchar = ob.char
        ob.rechar(&#34; &#34;)
    # adding
    _map.inner.add(_map, 0, 0)

    # playmap_9
    _map = ob_maps[&#34;playmap_9&#34;]
    _map.inner = se.Text(&#34;&#34;&#34;
#########################
#########################
###       #  #         ##
#         ####          #
#                       #
##                      #
#               #########
############ ############
#########################&#34;&#34;&#34;, ignore=&#34;#&#34;, ob_class=HightGrass,
                         ob_args=_map.poke_args, state=&#34;float&#34;)
    # adding
    _map.inner.add(_map, 2, 1)

    # playmap_11
    _map = ob_maps[&#34;playmap_11&#34;]
    _map.lake_1 = se.Text(&#34;&#34;&#34;~~~~~                                                 ~~~~~~
~~~~~~~~~~~~                                 ~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~                       ~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~                   ~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~          ~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&#34;&#34;&#34;,
                          esccode=Color.blue, ignore=Color.blue + &#34; &#34; + Color.reset,
                          ob_class=HightGrass,
                          ob_args={&#34;pokes&#34;: [&#34;karpi&#34;, &#34;clampi&#34;, &#34;clampi&#34;], &#34;minlvl&#34;: 290,
                                   &#34;maxlvl&#34;: 350},
                          state=&#34;float&#34;)
    # adding
    _map.lake_1.add(_map, 0, 12)

    # playmap_13
    _map = ob_maps[&#34;playmap_13&#34;]
    _map.dor = DorToCenter()
    _map.shopdor = DorToShop()
    # adding
    _map.dor.add(_map, 14, 29)
    _map.shopdor.add(_map, 52, 29)

    # playmap_18
    _map = ob_maps[&#34;playmap_18&#34;]
    _map.lake_1 = se.Text(&#34;&#34;&#34;  ~~
 ~~~~
~~~~~~~
~~~~~~~~
~~~~~~~~
~~~~~~~~
~~~~~~
 ~~~~
 ~~&#34;&#34;&#34;, esccode=Color.blue, ignore=Color.blue + &#34; &#34; + Color.reset,
                          ob_class=HightGrass,
                          ob_args={&#34;pokes&#34;: [&#34;karpi&#34;, &#34;blub&#34;, &#34;clampi&#34;],
                                   &#34;minlvl&#34;: 540, &#34;maxlvl&#34;: 640},
                          state=&#34;float&#34;)
    # adding
    _map.lake_1.add(_map, 72, 7)

    # playmap_19
    _map = ob_maps[&#34;playmap_19&#34;]
    _map.inner = se.Text(&#34;&#34;&#34;                         ####
                         #  #   ############
                         #  #   #          #
                         #  #   #          #
        ##############   #  #####          #
        ##           #   #                 #
        #            #   #  #####          #
        #            #####  #   #          #
        #                   #   #         ##
        #            #####  #   ############
        ##############   #  #
                         #  #
         #################  ####################
         #                                    ##
     #####                                     #
     #                                         #
     #                        #######          #
     #                        #     #          #
     ######## #################     ######  ####
            # #                          #  #
            # #                          #  #
            # #                          #  #
            # #                          #  #
            # #                          #  #
            # #                   ########  #
            # #                  ##         #
            # #                   ###########
            # #
            # #
            ###&#34;&#34;&#34;, ignore=&#34;#&#34;, ob_class=HightGrass,
                         ob_args=_map.poke_args, state=&#34;float&#34;)
    # adding
    _map.inner.add(_map, 0, 0)

    # playmap_21
    _map = ob_maps[&#34;playmap_21&#34;]
    _map.dor_playmap_19 = Dor(&#34;_&#34;, state=&#34;float&#34;,
                              arg_proto={&#34;map&#34;: ob_maps[&#34;playmap_19&#34;],
                                         &#34;x&#34;: 26, &#34;y&#34;: 1})
    _map.dor = DorToCenter()
    _map.shopdor = DorToShop()
    _map.lake_1 = se.Text(&#34;&#34;&#34;       ~~~~~~~~~~~
   ~~~~~~~~~~~~~~~~~~
 ~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~
 ~~~~~~~~~~~~~~~~~~~~~
    ~~~~~~~~~~~~~~
       ~~~~~~~~&#34;&#34;&#34;, esccode=Color.blue, ignore=Color.blue + &#34; &#34; + Color.reset,
                          ob_class=HightGrass,
                          ob_args={&#34;pokes&#34;: [&#34;karpi&#34;, &#34;blub&#34;], &#34;minlvl&#34;: 540, &#34;maxlvl&#34;: 640},
                          state=&#34;float&#34;)
    # adding
    _map.dor_playmap_19.add(_map, 5, 26)
    _map.dor.add(_map, 10, 7)
    _map.shopdor.add(_map, 34, 7)
    _map.lake_1.add(_map, 65, 10)

    # playmap_30
    _map = ob_maps[&#34;playmap_30&#34;]
    _map.dor = DorToCenter()
    _map.shopdor = DorToShop()
    # adding
    _map.dor.add(_map, 13, 7)
    _map.shopdor.add(_map, 30, 7)


# Actual code execution
#######################
if __name__ == &#34;__main__&#34;:
    # deciding on wich input to use
    if sys.platform == &#34;linux&#34;:
        import tty
        import termios
    
    
        def recogniser():
            &#34;&#34;&#34;Use another (not on xserver relying) way to read keyboard input,
                to make this shit work in tty or via ssh,
                where no xserver is available&#34;&#34;&#34;
            global ev, fd, old_settings
    
            fd = sys.stdin.fileno()
            old_settings = termios.tcgetattr(fd)
            tty.setraw(fd)
            while True:
                char = sys.stdin.read(1)
                ev = {ord(char): f&#34;&#39;{char.rstrip()}&#39;&#34;, 13: &#34;Key.enter&#34;,
                      127: &#34;Key.backspace&#34;, 32: &#34;Key.space&#34;,
                      27: &#34;Key.esc&#34;}[ord(char)]
                if ord(char) == 3:
                    reset_terminal()
                    ev = &#34;exit&#34;
    else:
        from pynput.keyboard import Key, Listener
    
    
        def recogniser():
            &#34;&#34;&#34;Gets keyboard input from pynput&#34;&#34;&#34;
            global ev
            while True:
                with Listener(on_press=on_press) as listener:
                    listener.join()
    
    # resizing screen
    tss = ResizeScreen()
    width, height = tss()
    # loading screen
    loading_screen = LoadingScreen(VERSION, CODENAME)
    loading_screen()
    # validating data
    p_data.validate()
    # types
    types = Types(p_data.types)
    
    # reading config file
    home = str(Path.home())
    Path(home + SAVEPATH).mkdir(parents=True, exist_ok=True)
    Path(home + SAVEPATH + &#34;/pokete.py&#34;).touch(exist_ok=True)
    # Default test session_info
    session_info = {
        &#34;user&#34;: &#34;DEFAULT&#34;,
        &#34;ver&#34;: VERSION,
        &#34;map&#34;: &#34;intromap&#34;,
        &#34;oldmap&#34;: &#34;playmap_1&#34;,
        &#34;x&#34;: 4,
        &#34;y&#34;: 5,
        &#34;pokes&#34;: {
            0: {&#34;name&#34;: &#34;steini&#34;, &#34;xp&#34;: 50, &#34;hp&#34;: &#34;SKIP&#34;, &#34;ap&#34;: [&#34;SKIP&#34;, &#34;SKIP&#34;]}
        },
        &#34;inv&#34;: {&#34;poketeball&#34;: 15, &#34;healing_potion&#34;: 1},
        &#34;settings&#34;: {},
        &#34;caught_poketes&#34;: [&#34;steini&#34;],
        &#34;visited_maps&#34;: [&#34;playmap_1&#34;],
        &#34;startup_time&#34;: 0,
        &#34;used_npcs&#34;: []
    }
    with open(home + SAVEPATH + &#34;/pokete.py&#34;) as file:
        exec(file.read())
    
    if &#34;settings&#34; in session_info:
        settings = Settings(**session_info[&#34;settings&#34;])
    else:
        settings = Settings()
    
    if &#34;used_npcs&#34; in session_info:
        used_npcs = session_info[&#34;used_npcs&#34;]
    else:
        used_npcs = []
    
    if &#34;caught_poketes&#34; in session_info:
        caught_poketes = session_info[&#34;caught_poketes&#34;]
    else:
        caught_poketes = []
    
    if &#34;visited_maps&#34; in session_info:
        visited_maps = session_info[&#34;visited_maps&#34;]
    else:
        visited_maps = [&#34;playmap_1&#34;]
    
    # comprehending settings
    # This is needed to just apply some changes when restarting the game to avoid running into errors
    save_trainers = settings.save_trainers
    
    # Defining and adding of objetcs and maps
    #########################################
    
    # maps
    ob_maps = gen_maps()
    
    # Those two maps cant to sourced out, because `height` and `width`
    # are global variables exclusive to pokete.py
    centermap = PlayMap(height - 1, width, name=&#34;centermap&#34;,
                        pretty_name=&#34;Pokete-Center&#34;)
    shopmap = PlayMap(height - 1, width, name=&#34;shopmap&#34;,
                      pretty_name=&#34;Pokete-Shop&#34;)
    
    ob_maps[&#34;centermap&#34;] = centermap
    ob_maps[&#34;shopmap&#34;] = shopmap
    
    # movemap
    movemap = se.Submap(ob_maps[&#34;playmap_1&#34;], 0, 0, height=height - 1, width=width)
    figure = Figure(&#34;a&#34;)
    exclamation = se.Object(&#34;!&#34;)
    multitext = OutP(&#34;&#34;, state=&#34;float&#34;)
    movemap.label = se.Text(&#34;1: Deck  2: Exit  3: Map  4: Inv.  5: Dex  ?: Help&#34;)
    movemap.code_label = OutP(&#34;&#34;)
    
    # Definiton of objects for the playmaps
    # Most of the objects ar generated from map_data for maps.py
    # .poke_arg is relevant for meadow genration
    ############################################################
    
    
    gen_obs()
    # side fn definitions
    detail = Detail()
    pokete_dex = Dex(movemap)
    help_page = Help(movemap)
    roadmap = RoadMap(p_data.stations)
    deck = Deck()
    menu = Menu()
    about = About()
    inv = Inv()
    # A dict that contains all world action functions for Attacks
    abb_funcs = {&#34;teleport&#34;: teleport}
    # items
    for _name in p_data.items:
        _obj = InvItem(_name, p_data.items[_name][&#34;pretty_name&#34;],
                       p_data.items[_name][&#34;desc&#34;],
                       p_data.items[_name][&#34;price&#34;], p_data.items[_name][&#34;fn&#34;])
        setattr(Inv, _name, _obj)
    Inv.ld_bubble_bomb = LearnDisc(&#34;bubble_bomb&#34;, p_data.attacks)
    Inv.ld_flying = LearnDisc(&#34;flying&#34;, p_data.attacks)
    
    buy = Buy()
    map_additions()
    
    # centermap
    centermap.inner = se.Text(&#34;&#34;&#34; ________________
     |______________|
     |     |a |     |
     |     Â¯ Â¯Â¯     |
     |              |
     |______  ______|
     |_____|  |_____|&#34;&#34;&#34;, ignore=&#34; &#34;)
    
    centermap.interact = CenterInteract(&#34;Â¯&#34;, state=&#34;float&#34;)
    centermap.dor_back1 = CenterDor(&#34; &#34;, state=&#34;float&#34;)
    centermap.dor_back2 = CenterDor(&#34; &#34;, state=&#34;float&#34;)
    centermap.trader = NPC(&#34;trader&#34;,
                           [&#34; &lt; I&#39;m a trader.&#34;,
                            &#34; &lt; Here you can trade one of your Poketes for another players&#39; one.&#34;],
                           &#34;swap_poke&#34;, ())
    # adding
    centermap.dor_back1.add(centermap, int(centermap.width / 2), 8)
    centermap.dor_back2.add(centermap, int(centermap.width / 2) + 1, 8)
    centermap.inner.add(centermap, int(centermap.width / 2) - 8, 1)
    centermap.interact.add(centermap, int(centermap.width / 2), 4)
    centermap.trader.add(centermap, int(centermap.width / 2) - 6, 3)
    
    # shopmap
    shopmap.inner = se.Text(&#34;&#34;&#34; __________________
     |________________|
     |      |a |      |
     |      Â¯ Â¯Â¯      |
     |                |
     |_______  _______|
     |______|  |______|&#34;&#34;&#34;, ignore=&#34; &#34;)
    shopmap.interact = ShopInteract(&#34;Â¯&#34;, state=&#34;float&#34;)
    shopmap.dor_back1 = CenterDor(&#34; &#34;, state=&#34;float&#34;)
    shopmap.dor_back2 = CenterDor(&#34; &#34;, state=&#34;float&#34;)
    # adding
    shopmap.dor_back1.add(shopmap, int(shopmap.width / 2), 8)
    shopmap.dor_back2.add(shopmap, int(shopmap.width / 2) + 1, 8)
    shopmap.inner.add(shopmap, int(shopmap.width / 2) - 9, 1)
    shopmap.interact.add(shopmap, int(shopmap.width / 2), 4)
    
    # objects relevant for fight()
    fightmap = se.Map(height - 1, width, &#34; &#34;)
    fightbox = ChooseBox(6, 25, &#34;Attacks&#34;, index_x=1)
    fight_invbox = ChooseBox(height - 3, 35, &#34;Inventory&#34;)
    fightmap.frame_big = StdFrame2(fightmap.height - 5, fightmap.width, state=&#34;float&#34;)
    fightmap.frame_small = se.Frame(height=4, width=fightmap.width, state=&#34;float&#34;)
    fightmap.e_underline = se.Text(&#34;----------------+&#34;, state=&#34;float&#34;)
    fightmap.e_sideline = se.Square(&#34;|&#34;, 1, 3, state=&#34;float&#34;)
    fightmap.p_upperline = se.Text(&#34;+----------------&#34;, state=&#34;float&#34;)
    fightmap.p_sideline = se.Square(&#34;|&#34;, 1, 4, state=&#34;float&#34;)
    fightmap.outp = OutP(&#34;&#34;, state=&#34;float&#34;)
    fightmap.label = se.Text(&#34;1: Attack  2: Run!  3: Inv.  4: Deck&#34;)
    deadico1 = se.Text(r&#34;&#34;&#34;
        \ /
         o
        / \ &#34;&#34;&#34;)
    deadico2 = se.Text(&#34;&#34;&#34;
    
         o
    &#34;&#34;&#34;)
    pball = se.Text(r&#34;&#34;&#34;   _____
      /_____\
      |__O__|
      \_____/&#34;&#34;&#34;)
    # adding
    fightmap.outp.add(fightmap, 1, fightmap.height - 4)
    fightmap.e_underline.add(fightmap, 1, 4)
    fightmap.e_sideline.add(fightmap, len(fightmap.e_underline.text), 1)
    fightmap.p_upperline.add(fightmap,
                             fightmap.width - 1 - len(fightmap.p_upperline.text),
                             fightmap.height - 10)
    fightmap.frame_big.add(fightmap, 0, 0)
    fightmap.p_sideline.add(fightmap,
                            fightmap.width - 1 - len(fightmap.p_upperline.text),
                            fightmap.height - 9)
    fightmap.frame_small.add(fightmap, 0, fightmap.height - 5)
    fightmap.label.add(fightmap, 0, fightmap.height - 1)
    
    # evomap
    evomap = se.Map(height - 1, width, &#34; &#34;)
    evomap.frame_small = se.Frame(height=4, width=evomap.width, state=&#34;float&#34;)
    evomap.outp = OutP(&#34;&#34;, state=&#34;float&#34;)
    # adding
    evomap.frame_small.add(evomap, 0, evomap.height - 5)
    evomap.outp.add(evomap, 1, evomap.height - 4)
    
    figure.set_args(session_info)
    
    __t = time.time() - __t
    ev = &#34;&#34;


    # Actual execution of the program
    try:
        main()
    except KeyboardInterrupt:
        print(&#34;KeyboardInterrupt&#34;)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="pokete.ask_bool"><code class="name flex">
<span>def <span class="ident">ask_bool</span></span>(<span>_map, text)</span>
</code></dt>
<dd>
<div class="desc"><p>Asks the player to aswer a yes/no question</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def ask_bool(_map, text):
    &#34;&#34;&#34;Asks the player to aswer a yes/no question&#34;&#34;&#34;
    global ev
    assert len(text) &gt;= 12, &#34;Text has to be longer then 12 characters!&#34;
    text_len = sorted([len(i) for i in text.split(&#39;\n&#39;)])[-1]
    with InfoBox(f&#34;{text}\n{round(text_len / 2 - 6) * &#39; &#39;}[Y]es   [N]o&#34;, _map):
        while True:
            if ev == &#34;&#39;y&#39;&#34;:
                ret = True
                break
            elif ev in [&#34;&#39;n&#39;&#34;, &#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                ret = False
                break
            std_loop()
            time.sleep(0.05)
            _map.show()
        ev = &#34;&#34;
    return ret</code></pre>
</details>
</dd>
<dt id="pokete.ask_text"><code class="name flex">
<span>def <span class="ident">ask_text</span></span>(<span>_map, infotext, introtext, text, max_len)</span>
</code></dt>
<dd>
<div class="desc"><p>Asks the player to input a text</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def ask_text(_map, infotext, introtext, text, max_len):
    &#34;&#34;&#34;Asks the player to input a text&#34;&#34;&#34;
    with InputBox(infotext, introtext, text, max_len, _map) as inputbox:
        ret = text_input(inputbox.text, _map, text, max_len + 1, max_len=max_len)
    return ret</code></pre>
</details>
</dd>
<dt id="pokete.autosave"><code class="name flex">
<span>def <span class="ident">autosave</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Autosaves the game every 5 mins</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def autosave():
    &#34;&#34;&#34;Autosaves the game every 5 mins&#34;&#34;&#34;
    while True:
        time.sleep(300)
        if settings.autosave:
            save()</code></pre>
</details>
</dd>
<dt id="pokete.balls_label_rechar"><code class="name flex">
<span>def <span class="ident">balls_label_rechar</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Rechars the balls label</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def balls_label_rechar():
    &#34;&#34;&#34;Rechars the balls label&#34;&#34;&#34;
    movemap.balls_label.text = &#34;&#34;
    for i in range(6):
        movemap.balls_label.text += &#34;-&#34; if i &gt;= len(figure.pokes) or figure.pokes[i].identifier == &#34;__fallback__&#34;\
                                        else &#34;o&#34; if figure.pokes[i].hp &gt; 0 else &#34;x&#34;
    movemap.balls_label.rechar(movemap.balls_label.text, esccode=Color.thicc)</code></pre>
</details>
</dd>
<dt id="pokete.check_version"><code class="name flex">
<span>def <span class="ident">check_version</span></span>(<span>sinfo)</span>
</code></dt>
<dd>
<div class="desc"><p>Checks if version in save file is the same as current version</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def check_version(sinfo):
    &#34;&#34;&#34;Checks if version in save file is the same as current version&#34;&#34;&#34;
    if &#34;ver&#34; not in sinfo:
        return
    else:
        ver = sinfo[&#34;ver&#34;]
    if VERSION != ver and sort_vers([VERSION, ver])[-1] == ver:
        if not ask_bool(loading_screen.map,
                        liner(f&#34;The save file was created \
on version &#39;{ver}&#39;, the current version is &#39;{VERSION}&#39;, \
such a downgrade may result in data loss! \
Do you want to continue?&#34;, int(width * 2 / 3))):
            exiter()</code></pre>
</details>
</dd>
<dt id="pokete.codes"><code class="name flex">
<span>def <span class="ident">codes</span></span>(<span>string)</span>
</code></dt>
<dd>
<div class="desc"><p>Cheats</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def codes(string):
    &#34;&#34;&#34;Cheats&#34;&#34;&#34;
    for i in string:
        if i == &#34;w&#34;:
            save()
        elif i == &#34;!&#34;:
            exec(string[string.index(&#34;!&#34;) + 2:])
            return
        elif i == &#34;e&#34;:
            try:
                exec(string[string.index(&#34;e&#34;) + 2:])
            except Exception as exc:
                print(exc)
            return
        elif i == &#34;q&#34;:
            exiter()</code></pre>
</details>
</dd>
<dt id="pokete.exiter"><code class="name flex">
<span>def <span class="ident">exiter</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Exit function</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def exiter():
    &#34;&#34;&#34;Exit function&#34;&#34;&#34;
    reset_terminal()
    sys.exit()</code></pre>
</details>
</dd>
<dt id="pokete.fast_change"><code class="name flex">
<span>def <span class="ident">fast_change</span></span>(<span>arr, setob)</span>
</code></dt>
<dd>
<div class="desc"><p>Changes fast between a list of texts</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def fast_change(arr, setob):
    &#34;&#34;&#34;Changes fast between a list of texts&#34;&#34;&#34;
    _i = 1
    while _i &lt; len(arr):
        arr[_i - 1].remove()
        arr[_i].add(fightmap, setob.x, setob.y)
        fightmap.show()
        time.sleep(0.1)
        _i += 1</code></pre>
</details>
</dd>
<dt id="pokete.fight"><code class="name flex">
<span>def <span class="ident">fight</span></span>(<span>player, enemy, info={'type': 'wild', 'player': ' '})</span>
</code></dt>
<dd>
<div class="desc"><p>Fight</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def fight(player, enemy, info={&#34;type&#34;: &#34;wild&#34;, &#34;player&#34;: &#34; &#34;}):
    &#34;&#34;&#34;Fight&#34;&#34;&#34;
    global ev
    # fancy stuff
    if settings.animations:
        fancymap = se.Map(background=&#34; &#34;, width=width, height=height - 1)
        vec_list = [se.Line(&#34; &#34;, i * int(width / 2), j * int((height - 1) / 2))
                    for i, j in zip([1, 1, -1, -1], [1, -1, -1, 1])]
        for i in vec_list:
            i.add(fancymap, int(width / 2), int((height - 1) / 2))
        fancymap.show()
        for j, l in zip(list(zip(*[i.obs for i in vec_list])),
                        list(zip(*[list(2 * &#34; &#34;) + k
                                   for k in [i.obs for i in vec_list]])), ):
            for i in j:
                i.rechar(&#34;-&#34;)
            for k in l:
                if k != &#34; &#34;:
                    k.rechar(&#34; &#34;)
            fancymap.show()
            time.sleep(0.005)
        for i in vec_list:
            i.remove()
        del fancymap
    # fancy stuff end
    players = fight_add_1(player, enemy)
    if info[&#34;type&#34;] == &#34;wild&#34;:
        fightmap.outp.outp(f&#34;A wild {enemy.name} appeared!&#34;)
    elif info[&#34;type&#34;] == &#34;duel&#34;:
        fightmap.outp.outp(f&#34;{info[&#39;player&#39;].name} started a fight!&#34;)
        time.sleep(1)
        fightmap.outp.outp(f&#39;{fightmap.outp.text}\n{info[&#34;player&#34;].gender} used {enemy.name} against you!&#39;)
    time.sleep(1)
    fight_add_2(player, enemy)
    if player.identifier != &#34;__fallback__&#34;:
        fast_change([player.ico, deadico2, deadico1, player.ico], player.ico)
        fightmap.outp.outp(f&#34;You used {player.name}&#34;)
    fightmap.show()
    time.sleep(0.5)
    if player.identifier == &#34;__fallback__&#34;:
        obj, enem = players
    else:
        enem = sorted(zip([i.initiative for i in players],
                          [1, 0], players))[0][-1]  # The [1, 0] array is needed to avoid comparing two Poke objects
        obj = [i for i in players if i != enem][-1]
    for i in players:
        for j in i.effects:
            j.readd()
    while True:
        if obj.player:
            fightmap.outp.append(se.Text((&#34;\n&#34;
                                          if &#34;\n&#34; not in fightmap.outp.text
                                          else &#34;&#34;) +
                                         &#34;What do you want to do?&#34;, state=&#34;float&#34;))
            if obj.identifier == &#34;__fallback__&#34;:
                time.sleep(1)
                fightmap.outp.outp(&#34;You don&#39;t have any living poketes left!&#34;)
            while True:  # Inputloop for general options
                if ev == &#34;&#39;1&#39;&#34;:
                    ev = &#34;&#34;
                    if player.identifier == &#34;__fallback__&#34;:
                        continue
                    with fightbox.add(fightmap, 1, fightmap.height - 7):
                        while True:  # Inputloop for attack options
                            if ev in [&#34;&#39;s&#39;&#34;, &#34;&#39;w&#39;&#34;]:
                                fightbox.input(ev)
                                fightmap.show()
                                ev = &#34;&#34;
                            elif ev in [f&#34;&#39;{i + 1}&#39;&#34; for i in
                                        range(len(obj.attac_obs))] + [&#34;Key.enter&#34;]:
                                attack = obj.attac_obs[fightbox.index.index
                                                       if ev == &#34;Key.enter&#34;
                                                       else int(ev.strip(&#34;&#39;&#34;)) - 1]
                                ev = &#34;&#34;
                                if attack.ap == 0:
                                    continue
                                break
                            elif ev in [&#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                                ev = &#34;&#34;
                                attack = &#34;&#34;
                                break
                            std_loop()
                            time.sleep(0.05)
                    if attack != &#34;&#34;:
                        break
                elif ev == &#34;&#39;2&#39;&#34;:
                    ev = &#34;&#34;
                    if ((info[&#34;type&#34;] == &#34;duel&#34;
                         and player.identifier != &#34;__fallback__&#34;)
                            or not ask_bool(fightmap, &#34;Do you really want to run away?&#34;)):
                        continue
                    fightmap.outp.outp(&#34;You ran away!&#34;)
                    time.sleep(1)
                    fight_clean_up(player, enemy)
                    return enem
                elif ev == &#34;&#39;3&#39;&#34;:
                    ev = &#34;&#34;
                    items = [getattr(Inv, i)
                             for i in figure.inv
                             if getattr(Inv, i).fn is not None
                             and figure.inv[i] &gt; 0]
                    if not items:
                        fightmap.outp.outp(&#34;You don&#39;t have any items left!\nWhat do you want to do?&#34;)
                        continue
                    fight_invbox.add_c_obs([se.Text(f&#34;{i.pretty_name}s : {figure.inv[i.name]}&#34;) for i in items])
                    fight_invbox.set_index(0)
                    with fight_invbox.add(fightmap, fightmap.width - 35, 0):
                        while True:
                            if ev in [&#34;&#39;s&#39;&#34;, &#34;&#39;w&#39;&#34;]:
                                fight_invbox.input(ev)
                                fightmap.show()
                                ev = &#34;&#34;
                            elif ev in [&#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                                item = &#34;&#34;
                                break
                            elif ev == &#34;Key.enter&#34;:
                                item = items[fight_invbox.index.index]
                                break
                            std_loop()
                            time.sleep(0.05)
                    fight_invbox.remove_c_obs()
                    if item == &#34;&#34;:
                        continue
                    i = eval(item.fn)(obj, enem, info)  # I hate you python for not having switch statements
                    if i == 1:
                        continue
                    elif i == 2:
                        return
                    attack = &#34;&#34;
                    break
                elif ev == &#34;&#39;4&#39;&#34;:
                    ev = &#34;&#34;
                    if obj.identifier == &#34;__fallback__&#34;:
                        continue
                    fight_clean_up(player, enemy)
                    index = deck(figure.pokes[:6], &#34;Your deck&#34;, True)
                    player = player if index is None else figure.pokes[index]
                    fight_add_1(player, enemy)
                    fightbox.set_index(0)
                    players = fight_add_3(player, enemy)
                    fightmap.outp.outp(f&#34;You have choosen {player.name}&#34;)
                    for i in players:
                        for j in i.effects:
                            time.sleep(1)
                            j.readd()
                    attack = &#34;&#34;
                    break
                std_loop()
                time.sleep(0.1)
        else:
            attack = random.choices([i for i in obj.attac_obs],
                                    weights=[i.ap * ((1.5
                                                      if enem.type.name in i.type.effective
                                                      else 0.5
                                                      if enem.type.name in i.type.ineffective
                                                      else 1)
                                                     if info[&#34;type&#34;] == &#34;duel&#34;
                                                     else 1)
                                             for i in obj.attac_obs])[0]
        time.sleep(0.3)
        if attack != &#34;&#34;:
            obj.attack(attack, enem)
        fightmap.show()
        time.sleep(0.5)
        if any([i.hp &lt;= 0 for i in players]):
            winner = [i for i in players if i.hp &gt; 0][0]
            break
        elif all([i.ap == 0 for i in obj.attac_obs]):
            winner = [i for i in players if i != obj][0]
            time.sleep(2)
            fightmap.outp.outp(f&#34;{obj.ext_name} has used all its&#39; attacks!&#34;)
            time.sleep(3)
            break
        obj = [i for i in players if i != obj][-1]
        enem = [i for i in players if i != obj][-1]
    loser = [obj for obj in players if obj != winner][0]
    xp = (loser.lose_xp + (1 if loser.lvl() &gt; winner.lvl() else 0)) * (2 if info[&#34;type&#34;] == &#34;duel&#34; else 1)
    fightmap.outp.outp(f&#34;{winner.ext_name} won!&#34; + (f&#39;\nXP + {xp}&#39;
                                                    if winner.player else &#39;&#39;))
    if winner.player:
        old_lvl = winner.lvl()
        winner.xp += xp
        winner.text_xp.rechar(
            f&#34;XP:{winner.xp - (winner.lvl() ** 2 - 1)}/{((winner.lvl() + 1) ** 2 - 1) - (winner.lvl() ** 2 - 1)}&#34;)
        winner.text_lvl.rechar(f&#34;Lvl:{winner.lvl()}&#34;)
        if old_lvl &lt; winner.lvl():
            time.sleep(1)
            fightmap.outp.outp(f&#34;{winner.name} reached lvl {winner.lvl()}!&#34;)
            winner.move_shine()
            time.sleep(0.5)
            winner.set_vars()
            if winner.lvl() % 5 == 0:
                LearnAttack(winner)()
            if winner.evolve_poke != &#34;&#34; and winner.lvl() &gt;= winner.evolve_lvl:
                winner.evolve()
    fightmap.show()
    time.sleep(1)
    ico = [obj for obj in players if obj != winner][0].ico
    fast_change([ico, deadico1, deadico2], ico)
    deadico2.remove()
    fightmap.show()
    fight_clean_up(player, enemy)
    balls_label_rechar()
    return winner</code></pre>
</details>
</dd>
<dt id="pokete.fight_add_1"><code class="name flex">
<span>def <span class="ident">fight_add_1</span></span>(<span>player, enemy)</span>
</code></dt>
<dd>
<div class="desc"><p>Adds enemy and general labels to fightmap</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def fight_add_1(player, enemy):
    &#34;&#34;&#34;Adds enemy and general labels to fightmap&#34;&#34;&#34;
    for obj, x, y in zip([enemy.tril, enemy.trir,
                          enemy.text_name, enemy.text_lvl,
                          enemy.text_hp, enemy.ico, enemy.hp_bar],
                         [7, 16, 1, 1, 1, fightmap.width - 14, 8],
                         [3, 3, 1, 2, 3, 2, 3]):
        obj.add(fightmap, x, y)
    if enemy.identifier in caught_poketes:
        enemy.pball_small.add(fightmap, len(fightmap.e_underline.text) - 1, 1)
    if player.identifier != &#34;__fallback__&#34;:
        fightbox.add_c_obs(player.atc_labels)
        fightbox.set_index(0)
    return [player, enemy]</code></pre>
</details>
</dd>
<dt id="pokete.fight_add_2"><code class="name flex">
<span>def <span class="ident">fight_add_2</span></span>(<span>player, enemy)</span>
</code></dt>
<dd>
<div class="desc"><p>Adds player labels with sleeps</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def fight_add_2(player, enemy):
    &#34;&#34;&#34;Adds player labels with sleeps&#34;&#34;&#34;
    if player.identifier != &#34;__fallback__&#34;:
        player.text_name.add(fightmap, fightmap.width - 17, fightmap.height - 9)
        time.sleep(0.05)
        fightmap.show()
        player.text_lvl.add(fightmap, fightmap.width - 17, fightmap.height - 8)
        time.sleep(0.05)
        fightmap.show()
        player.tril.add(fightmap, fightmap.width - 11, fightmap.height - 7)
        player.trir.add(fightmap, fightmap.width - 2, fightmap.height - 7)
        player.hp_bar.add(fightmap, fightmap.width - 10, fightmap.height - 7)
        player.text_hp.add(fightmap, fightmap.width - 17, fightmap.height - 7)
        time.sleep(0.05)
        fightmap.show()
        player.ico.add(fightmap, 3, fightmap.height - 10)</code></pre>
</details>
</dd>
<dt id="pokete.fight_add_3"><code class="name flex">
<span>def <span class="ident">fight_add_3</span></span>(<span>player, enemy)</span>
</code></dt>
<dd>
<div class="desc"><p>Adds player labels</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def fight_add_3(player, enemy):
    &#34;&#34;&#34;Adds player labels&#34;&#34;&#34;
    if player.identifier != &#34;__fallback__&#34;:
        player.text_name.add(fightmap, fightmap.width - 17, fightmap.height - 9)
        player.text_lvl.add(fightmap, fightmap.width - 17, fightmap.height - 8)
        player.tril.add(fightmap, fightmap.width - 11, fightmap.height - 7)
        player.trir.add(fightmap, fightmap.width - 2, fightmap.height - 7)
        player.hp_bar.add(fightmap, fightmap.width - 10, fightmap.height - 7)
        player.text_hp.add(fightmap, fightmap.width - 17, fightmap.height - 7)
        player.ico.add(fightmap, 3, fightmap.height - 10)
    return [player, enemy]</code></pre>
</details>
</dd>
<dt id="pokete.fight_ap_potion"><code class="name flex">
<span>def <span class="ident">fight_ap_potion</span></span>(<span>obj, enem, info)</span>
</code></dt>
<dd>
<div class="desc"><p>AP potion function</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def fight_ap_potion(obj, enem, info):
    &#34;&#34;&#34;AP potion function&#34;&#34;&#34;
    figure.remove_item(&#34;ap_potion&#34;)
    for atc in obj.attac_obs:
        atc.ap = atc.max_ap
    obj.label_rechar()</code></pre>
</details>
</dd>
<dt id="pokete.fight_clean_up"><code class="name flex">
<span>def <span class="ident">fight_clean_up</span></span>(<span>player, enemy)</span>
</code></dt>
<dd>
<div class="desc"><p>Removes all labels from fightmap</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def fight_clean_up(player, enemy):
    &#34;&#34;&#34;Removes all labels from fightmap&#34;&#34;&#34;
    for obj in [enemy.text_name, enemy.text_lvl, enemy.text_hp, enemy.ico,
                enemy.hp_bar, enemy.tril, enemy.trir, player.text_name,
                player.text_lvl, player.text_hp, player.ico, player.hp_bar,
                player.tril, player.trir, enemy.pball_small]:
        obj.remove()
    fightbox.remove_c_obs()
    for i in [player, enemy]:
        for j in i.effects:
            j.cleanup()</code></pre>
</details>
</dd>
<dt id="pokete.fight_heal_potion"><code class="name flex">
<span>def <span class="ident">fight_heal_potion</span></span>(<span>obj, enem, info)</span>
</code></dt>
<dd>
<div class="desc"><p>Healing potion function</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def fight_heal_potion(obj, enem, info):
    &#34;&#34;&#34;Healing potion function&#34;&#34;&#34;
    return fight_potion(obj, enem, info, 5, &#34;healing_potion&#34;)</code></pre>
</details>
</dd>
<dt id="pokete.fight_hyperball"><code class="name flex">
<span>def <span class="ident">fight_hyperball</span></span>(<span>obj, enem, info)</span>
</code></dt>
<dd>
<div class="desc"><p>Hyperball function</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def fight_hyperball(obj, enem, info):
    &#34;&#34;&#34;Hyperball function&#34;&#34;&#34;
    return fight_throw(obj, enem, info, 1000, &#34;hyperball&#34;)</code></pre>
</details>
</dd>
<dt id="pokete.fight_poketeball"><code class="name flex">
<span>def <span class="ident">fight_poketeball</span></span>(<span>obj, enem, info)</span>
</code></dt>
<dd>
<div class="desc"><p>Poketeball function</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def fight_poketeball(obj, enem, info):
    &#34;&#34;&#34;Poketeball function&#34;&#34;&#34;
    return fight_throw(obj, enem, info, 1, &#34;poketeball&#34;)</code></pre>
</details>
</dd>
<dt id="pokete.fight_potion"><code class="name flex">
<span>def <span class="ident">fight_potion</span></span>(<span>obj, enem, info, hp, name)</span>
</code></dt>
<dd>
<div class="desc"><p>Potion function</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def fight_potion(obj, enem, info, hp, name):
    &#34;&#34;&#34;Potion function&#34;&#34;&#34;
    figure.remove_item(name)
    obj.oldhp = obj.hp
    if obj.hp + hp &gt; obj.full_hp:
        obj.hp = obj.full_hp
    else:
        obj.hp += hp
    obj.hp_bar.update(obj.oldhp)
    return</code></pre>
</details>
</dd>
<dt id="pokete.fight_super_potion"><code class="name flex">
<span>def <span class="ident">fight_super_potion</span></span>(<span>obj, enem, info)</span>
</code></dt>
<dd>
<div class="desc"><p>Super potion function</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def fight_super_potion(obj, enem, info):
    &#34;&#34;&#34;Super potion function&#34;&#34;&#34;
    return fight_potion(obj, enem, info, 15, &#34;super_potion&#34;)</code></pre>
</details>
</dd>
<dt id="pokete.fight_superball"><code class="name flex">
<span>def <span class="ident">fight_superball</span></span>(<span>obj, enem, info)</span>
</code></dt>
<dd>
<div class="desc"><p>Superball function</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def fight_superball(obj, enem, info):
    &#34;&#34;&#34;Superball function&#34;&#34;&#34;
    return fight_throw(obj, enem, info, 6, &#34;superball&#34;)</code></pre>
</details>
</dd>
<dt id="pokete.fight_throw"><code class="name flex">
<span>def <span class="ident">fight_throw</span></span>(<span>obj, enem, info, chance, name)</span>
</code></dt>
<dd>
<div class="desc"><p>Throws a Poketeball</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def fight_throw(obj, enem, info, chance, name):
    &#34;&#34;&#34;Throws a Poketeball&#34;&#34;&#34;
    if obj.identifier == &#34;__fallback__&#34; or info[&#34;type&#34;] == &#34;duel&#34;:
        return 1
    fightmap.outp.rechar(f&#34;You threw a {name.capitalize()}!&#34;)
    fast_change([enem.ico, deadico1, deadico2, pball], enem.ico)
    time.sleep(random.choice([1, 2, 3, 4]))
    figure.remove_item(name)
    catch_chance = 20 if figure.map == ob_maps[&#34;playmap_1&#34;] else 0
    for effect in enem.effects:
        catch_chance += effect.catch_chance
    if random.choices([True, False],
                      weights=[(enem.full_hp / enem.hp) * chance + catch_chance,
                               enem.full_hp], k=1)[0]:
        figure.add_poke(enem)
        fightmap.outp.outp(f&#34;You catched {enem.name}&#34;)
        time.sleep(2)
        pball.remove()
        fight_clean_up(obj, enem)
        balls_label_rechar()
        return 2
    else:
        fightmap.outp.outp(&#34;You missed!&#34;)
        fightmap.show()
        pball.remove()
        enem.ico.add(fightmap, enem.ico.x, enem.ico.y)
        fightmap.show()</code></pre>
</details>
</dd>
<dt id="pokete.game"><code class="name flex">
<span>def <span class="ident">game</span></span>(<span>_map)</span>
</code></dt>
<dd>
<div class="desc"><p>Game function</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def game(_map):
    &#34;&#34;&#34;Game function&#34;&#34;&#34;
    global ev, width, height
    ev = &#34;&#34;
    print(&#34;\033]0;Pokete - &#34; + _map.pretty_name + &#34;\a&#34;, end=&#34;&#34;)
    if _map.name not in visited_maps:
        visited_maps.append(_map.name)
    movemap.code_label.rechar(figure.map.pretty_name)
    movemap.set(0, 0)
    movemap.bmap = _map
    movemap.full_show()
    inp_dict = {&#34;&#39;1&#39;&#34;: &#39;deck(figure.pokes[:6], &#34;Your deck&#34;)&#39;,
                &#34;&#39;3&#39;&#34;: &#39;roadmap()&#39;, &#34;&#39;4&#39;&#34;: &#39;inv()&#39;,
                &#34;&#39;5&#39;&#34;: &#39;pokete_dex(pokes)&#39;, &#34;&#39;e&#39;&#34;: &#39;menu()&#39;,
                &#34;&#39;?&#39;&#34;: &#39;help_page()&#39;}
    while True:
        for name, _dir, x, y in zip([&#34;&#39;w&#39;&#34;, &#34;&#39;a&#39;&#34;, &#34;&#39;s&#39;&#34;, &#34;&#39;d&#39;&#34;],
                                    [&#34;t&#34;, &#34;l&#34;, &#34;b&#34;, &#34;r&#34;],  # Directions are not beening used yet
                                    [0, -1, 0, 1], [-1, 0, 1, 0]):
            if ev == name:
                figure.direction = _dir
                figure.set(figure.x + x, figure.y + y)
                ev = &#34;&#34;
                break
        else:
            if ev in inp_dict:
                exec(inp_dict[ev])
                ev = &#34;&#34;
                movemap.show(init=True)
            elif ev == &#34;&#39;2&#39;&#34;:
                ev = &#34;&#34;
                if ask_bool(movemap, &#34;Do you realy want to exit?&#34;):
                    save()
                    exiter()
            elif ev == &#34;&#39;:&#39;&#34;:
                ev = &#34;&#34;
                inp = text_input(movemap.code_label, movemap, &#34;:&#34;,
                                 movemap.width,
                                 (movemap.width - 2) * movemap.height - 1)[1:]
                movemap.code_label.outp(figure.map.pretty_name)
                codes(inp)
                ev = &#34;&#34;
        std_loop()
        _map.extra_actions()
        for trainer in _map.trainers:
            trainer.do(_map)
        time.sleep(0.05)
        for statement, x, y in zip([figure.x + 6 &gt; movemap.x + movemap.width,
                                    figure.x &lt; movemap.x + 6,
                                    figure.y + 6 &gt; movemap.y + movemap.height,
                                    figure.y &lt; movemap.y + 6],
                                   [1, -1, 0, 0], [0, 0, 1, -1]):
            if statement:
                movemap.set(movemap.x + x, movemap.y + y)
        # checking for resizing
        width, height = os.get_terminal_size()
        if movemap.width != width or movemap.height != height - 1:
            for obj in [movemap.underline, movemap.label, movemap.code_label,
                        movemap.name_label, movemap.balls_label]:
                obj.remove()
            movemap.resize(height - 1, width, &#34; &#34;)
            movemap_add_obs()
        movemap.full_show()</code></pre>
</details>
</dd>
<dt id="pokete.gen_maps"><code class="name flex">
<span>def <span class="ident">gen_maps</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Genrates all maps</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def gen_maps():
    &#34;&#34;&#34;Genrates all maps&#34;&#34;&#34;
    maps = {}
    for ob_map in p_data.maps:
        args = p_data.maps[ob_map]
        args[&#34;extra_actions&#34;] = (getattr(ExtraActions, args[&#34;extra_actions&#34;],
                                         None)
                                 if args[&#34;extra_actions&#34;] is not None
                                 else None)
        maps[ob_map] = PlayMap(name=ob_map, **args)
    return maps</code></pre>
</details>
</dd>
<dt id="pokete.gen_obs"><code class="name flex">
<span>def <span class="ident">gen_obs</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Genrates all objests on the maps</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def gen_obs():
    &#34;&#34;&#34;Genrates all objests on the maps&#34;&#34;&#34;
    map_data = p_data.map_data
    npcs = p_data.npcs
    trainers = p_data.trainers
    # generating objects from map_data
    for ob_map in map_data:
        _map = ob_maps[ob_map]
        for hard_ob in map_data[ob_map][&#34;hard_obs&#34;]:
            parse_obj(_map, hard_ob,
                      se.Text(map_data[ob_map][&#34;hard_obs&#34;][hard_ob][&#34;txt&#34;],
                              ignore=&#34; &#34;),
                      map_data[ob_map][&#34;hard_obs&#34;][hard_ob])
        for soft_ob in map_data[ob_map][&#34;soft_obs&#34;]:
            parse_obj(_map, soft_ob,
                      se.Text(map_data[ob_map][&#34;soft_obs&#34;][soft_ob][&#34;txt&#34;],
                              ignore=Color.green + &#34; &#34; + Color.reset,
                              ob_class=HightGrass,
                              ob_args=_map.poke_args,
                              state=&#34;float&#34;, esccode=Color.green),
                      map_data[ob_map][&#34;soft_obs&#34;][soft_ob])
        for dor in map_data[ob_map][&#34;dors&#34;]:
            parse_obj(_map, dor,
                      Dor(&#34; &#34;, state=&#34;float&#34;,
                          arg_proto=map_data[ob_map][&#34;dors&#34;][dor][&#34;args&#34;]),
                      map_data[ob_map][&#34;dors&#34;][dor])
        for ball in map_data[ob_map][&#34;balls&#34;]:
            if f&#39;{ob_map}.{ball}&#39; not in used_npcs or not settings.save_trainers:
                parse_obj(_map, ball,
                          Poketeball(f&#34;{ob_map}.{ball}&#34;),
                          map_data[ob_map][&#34;balls&#34;][ball])
    # NPCs
    for npc in npcs:
        parse_obj(ob_maps[npcs[npc][&#34;map&#34;]], npc,
                  NPC(npc, npcs[npc][&#34;texts&#34;], npcs[npc][&#34;fn&#34;],
                      npcs[npc][&#34;args&#34;]),
                  npcs[npc])

    # adding all trainer to map
    for i in trainers:
        _map = ob_maps[i]
        for j in trainers[i]:
            _map.trainers.append(Trainer(Poke(*j[&#34;poke&#34;], player=False),
                                         *j[&#34;args&#34;]))
    for ob_map in map_data:
        _map = ob_maps[ob_map]
        for trainer in _map.trainers:
            trainer.add(_map, trainer.sx, trainer.sy)</code></pre>
</details>
</dd>
<dt id="pokete.heal"><code class="name flex">
<span>def <span class="ident">heal</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Heals all poketes</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def heal():
    &#34;&#34;&#34;Heals all poketes&#34;&#34;&#34;
    for poke in figure.pokes:
        poke.hp = poke.full_hp
        poke.effects = []
        poke.miss_chance = poke.full_miss_chance
        poke.text_hp.rechar(f&#34;HP:{poke.hp}&#34;)
        poke.set_vars()
        poke.hp_bar.make(poke.hp)
        for atc in poke.attac_obs:
            atc.ap = atc.max_ap
        poke.label_rechar()
        balls_label_rechar()</code></pre>
</details>
</dd>
<dt id="pokete.intro"><code class="name flex">
<span>def <span class="ident">intro</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Intro to Pokete</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def intro():
    &#34;&#34;&#34;Intro to Pokete&#34;&#34;&#34;
    movemap.set(0, 0)
    movemap.bmap = ob_maps[&#34;intromap&#34;]
    movemap.full_show()
    while figure.name in [&#34;DEFAULT&#34;, &#34;&#34;]:
        figure.name = ask_text(movemap,
                               &#34;Welcome to Pokete!\nPlease choose your name!\n&#34;,
                               &#34;Name:&#34;, &#34;&#34;, 17)
    movemap.underline.remove()
    movemap.balls_label.set(0, 1)
    movemap.name_label.rechar(figure.name, esccode=Color.thicc)
    movemap.balls_label.set(4 + len(movemap.name_label.text), movemap.height - 2)
    movemap.underline.add(movemap, 0, movemap.height - 2)
    movemap_text(4, 3, [&#34; &lt; Hello my child.&#34;,
                        &#34; &lt; You&#39;re now ten years old.&#34;,
                        &#34; &lt; And I think it&#39;s now time for you to travel the world and be a Pokete-trainer.&#34;,
                        &#34;&lt; Therefore I give you this powerfull &#39;Steini&#39;, 15 &#39;Poketeballs&#39; to catch Poketes and a &#34;
                        &#34;&#39;Healing potion&#39;.&#34;,
                        &#34; &lt; You will be the best Pokete-Trainer in Nice town.&#34;,
                        &#34; &lt; Now go out and become the best!&#34;])
    game(ob_maps[&#34;intromap&#34;])</code></pre>
</details>
</dd>
<dt id="pokete.main"><code class="name flex">
<span>def <span class="ident">main</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Main function</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def main():
    &#34;&#34;&#34;Main function&#34;&#34;&#34;
    os.system(&#34;&#34;)
    recognising = threading.Thread(target=recogniser)
    autosaveing = threading.Thread(target=autosave)
    recognising.daemon = True
    autosaveing.daemon = True
    recognising.start()
    autosaveing.start()
    check_version(session_info)
    if figure.name == &#34;DEFAULT&#34;:
        intro()
    game(figure.map)</code></pre>
</details>
</dd>
<dt id="pokete.map_additions"><code class="name flex">
<span>def <span class="ident">map_additions</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def map_additions():
    # playmap_1
    _map = ob_maps[&#34;playmap_1&#34;]
    _map.dor = DorToCenter()
    # adding
    _map.dor.add(_map, 25, 4)

    # cave_1
    _map = ob_maps[&#34;cave_1&#34;]
    _map.inner = se.Text(&#34;&#34;&#34;##########################################
##        ################################
#         ################################
#         ######################        ##
#                    ###########   #######
#         #########  ###########   #######
#         #########  ###########   #######
###################  ###########   #######
##############                     #######
##############                     #######
##############  ##########################
##############  ##########################
########        ##########################
#######  ###    ##########################
#######  ###    ##########################
#######         ##########################
##############  ##########################
##############  ##########################
##############  ##########################
##############  ##########################&#34;&#34;&#34;, ignore=&#34;#&#34;,
                         ob_class=HightGrass,
                         ob_args={&#34;pokes&#34;: [&#34;steini&#34;, &#34;bato&#34;, &#34;lilstone&#34;, &#34;rato&#34;], &#34;minlvl&#34;: 40,
                                  &#34;maxlvl&#34;: 128},
                         state=&#34;float&#34;)
    # adding
    _map.inner.add(_map, 0, 0)

    # playmap_3
    _map = ob_maps[&#34;playmap_3&#34;]
    _map.dor = DorToCenter()
    _map.shopdor = DorToShop()
    # adding
    _map.dor.add(_map, 25, 6)
    _map.shopdor.add(_map, 61, 6)

    # playmap_4
    _map = ob_maps[&#34;playmap_4&#34;]
    _map.dor_playmap_5 = ChanceDor(&#34;~&#34;, state=&#34;float&#34;,
                                   arg_proto={&#34;chance&#34;: 6,
                                              &#34;map&#34;: &#34;playmap_5&#34;,
                                              &#34;x&#34;: 17, &#34;y&#34;: 16})
    _map.lake_1 = se.Text(&#34;&#34;&#34;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~         ~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~                 ~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~                    ~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~                                ~~~~~~~~~~~~~~
~~~~~~~~~                                           ~~~~~~~~
~~~&#34;&#34;&#34;, esccode=Color.blue, ignore=Color.blue + &#34; &#34; + Color.reset,
                          ob_class=HightGrass,
                          ob_args={&#34;pokes&#34;: [&#34;karpi&#34;, &#34;blub&#34;], &#34;minlvl&#34;: 180, &#34;maxlvl&#34;: 230},
                          state=&#34;float&#34;)
    # adding
    _map.dor_playmap_5.add(_map, 56, 1)
    _map.lake_1.add(_map, 0, 0)

    # playmap_5
    _map = ob_maps[&#34;playmap_5&#34;]
    _map.inner = se.Square(&#34; &#34;, 11, 11, state=&#34;float&#34;, ob_class=HightGrass,
                           ob_args=_map.poke_args)
    # adding
    _map.inner.add(_map, 26, 1)

    # playmap_7
    _map = ob_maps[&#34;playmap_7&#34;]
    _map.inner = se.Text(&#34;&#34;&#34;##############################
#########        #############
#########        #############
#########        #############
#########        #############
#########               ######
##   ####     ####      ######
#    ####     ####     #######
#             ################
#    ####     ################
#########     ################
#########     ################
#########                   ##
#########     ################
#########     ################
#########     ################
#########             ########
###################   ########
####################  ########
##############################&#34;&#34;&#34;, ignore=&#34;#&#34;, ob_class=HightGrass,
                         ob_args=_map.poke_args, state=&#34;float&#34;)
    for ob in (_map.inner_walls.obs + _map.trainers +
               [getattr(_map, i) for i in p_data.map_data[&#34;playmap_7&#34;][&#34;balls&#34;]
                if &#34;playmap_7.&#34; + i not in used_npcs
                   or not settings.save_trainers]):
        ob.bchar = ob.char
        ob.rechar(&#34; &#34;)
    # adding
    _map.inner.add(_map, 0, 0)

    # playmap_9
    _map = ob_maps[&#34;playmap_9&#34;]
    _map.inner = se.Text(&#34;&#34;&#34;
#########################
#########################
###       #  #         ##
#         ####          #
#                       #
##                      #
#               #########
############ ############
#########################&#34;&#34;&#34;, ignore=&#34;#&#34;, ob_class=HightGrass,
                         ob_args=_map.poke_args, state=&#34;float&#34;)
    # adding
    _map.inner.add(_map, 2, 1)

    # playmap_11
    _map = ob_maps[&#34;playmap_11&#34;]
    _map.lake_1 = se.Text(&#34;&#34;&#34;~~~~~                                                 ~~~~~~
~~~~~~~~~~~~                                 ~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~                       ~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~                   ~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~          ~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&#34;&#34;&#34;,
                          esccode=Color.blue, ignore=Color.blue + &#34; &#34; + Color.reset,
                          ob_class=HightGrass,
                          ob_args={&#34;pokes&#34;: [&#34;karpi&#34;, &#34;clampi&#34;, &#34;clampi&#34;], &#34;minlvl&#34;: 290,
                                   &#34;maxlvl&#34;: 350},
                          state=&#34;float&#34;)
    # adding
    _map.lake_1.add(_map, 0, 12)

    # playmap_13
    _map = ob_maps[&#34;playmap_13&#34;]
    _map.dor = DorToCenter()
    _map.shopdor = DorToShop()
    # adding
    _map.dor.add(_map, 14, 29)
    _map.shopdor.add(_map, 52, 29)

    # playmap_18
    _map = ob_maps[&#34;playmap_18&#34;]
    _map.lake_1 = se.Text(&#34;&#34;&#34;  ~~
 ~~~~
~~~~~~~
~~~~~~~~
~~~~~~~~
~~~~~~~~
~~~~~~
 ~~~~
 ~~&#34;&#34;&#34;, esccode=Color.blue, ignore=Color.blue + &#34; &#34; + Color.reset,
                          ob_class=HightGrass,
                          ob_args={&#34;pokes&#34;: [&#34;karpi&#34;, &#34;blub&#34;, &#34;clampi&#34;],
                                   &#34;minlvl&#34;: 540, &#34;maxlvl&#34;: 640},
                          state=&#34;float&#34;)
    # adding
    _map.lake_1.add(_map, 72, 7)

    # playmap_19
    _map = ob_maps[&#34;playmap_19&#34;]
    _map.inner = se.Text(&#34;&#34;&#34;                         ####
                         #  #   ############
                         #  #   #          #
                         #  #   #          #
        ##############   #  #####          #
        ##           #   #                 #
        #            #   #  #####          #
        #            #####  #   #          #
        #                   #   #         ##
        #            #####  #   ############
        ##############   #  #
                         #  #
         #################  ####################
         #                                    ##
     #####                                     #
     #                                         #
     #                        #######          #
     #                        #     #          #
     ######## #################     ######  ####
            # #                          #  #
            # #                          #  #
            # #                          #  #
            # #                          #  #
            # #                          #  #
            # #                   ########  #
            # #                  ##         #
            # #                   ###########
            # #
            # #
            ###&#34;&#34;&#34;, ignore=&#34;#&#34;, ob_class=HightGrass,
                         ob_args=_map.poke_args, state=&#34;float&#34;)
    # adding
    _map.inner.add(_map, 0, 0)

    # playmap_21
    _map = ob_maps[&#34;playmap_21&#34;]
    _map.dor_playmap_19 = Dor(&#34;_&#34;, state=&#34;float&#34;,
                              arg_proto={&#34;map&#34;: ob_maps[&#34;playmap_19&#34;],
                                         &#34;x&#34;: 26, &#34;y&#34;: 1})
    _map.dor = DorToCenter()
    _map.shopdor = DorToShop()
    _map.lake_1 = se.Text(&#34;&#34;&#34;       ~~~~~~~~~~~
   ~~~~~~~~~~~~~~~~~~
 ~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~
 ~~~~~~~~~~~~~~~~~~~~~
    ~~~~~~~~~~~~~~
       ~~~~~~~~&#34;&#34;&#34;, esccode=Color.blue, ignore=Color.blue + &#34; &#34; + Color.reset,
                          ob_class=HightGrass,
                          ob_args={&#34;pokes&#34;: [&#34;karpi&#34;, &#34;blub&#34;], &#34;minlvl&#34;: 540, &#34;maxlvl&#34;: 640},
                          state=&#34;float&#34;)
    # adding
    _map.dor_playmap_19.add(_map, 5, 26)
    _map.dor.add(_map, 10, 7)
    _map.shopdor.add(_map, 34, 7)
    _map.lake_1.add(_map, 65, 10)

    # playmap_30
    _map = ob_maps[&#34;playmap_30&#34;]
    _map.dor = DorToCenter()
    _map.shopdor = DorToShop()
    # adding
    _map.dor.add(_map, 13, 7)
    _map.shopdor.add(_map, 30, 7)</code></pre>
</details>
</dd>
<dt id="pokete.mapresize"><code class="name flex">
<span>def <span class="ident">mapresize</span></span>(<span>_map)</span>
</code></dt>
<dd>
<div class="desc"><p>Resizes a map</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def mapresize(_map):
    &#34;&#34;&#34;Resizes a map&#34;&#34;&#34;
    width, height = os.get_terminal_size()
    if _map.width != width or _map.height != height - 1:
        _map.resize(height - 1, width, &#34; &#34;)
        return True
    return False</code></pre>
</details>
</dd>
<dt id="pokete.movemap_add_obs"><code class="name flex">
<span>def <span class="ident">movemap_add_obs</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Adds needed labels to movemap</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def movemap_add_obs():
    &#34;&#34;&#34;Adds needed labels to movemap&#34;&#34;&#34;
    movemap.underline = se.Square(&#34;-&#34;, movemap.width, 1)
    movemap.name_label.add(movemap, 2, movemap.height - 2)
    movemap.balls_label.add(movemap, 4 + len(movemap.name_label.text),
                            movemap.height - 2)
    movemap.underline.add(movemap, 0, movemap.height - 2)
    movemap.label.add(movemap, 0, movemap.height - 1)
    movemap.code_label.add(movemap, 0, 0)</code></pre>
</details>
</dd>
<dt id="pokete.movemap_text"><code class="name flex">
<span>def <span class="ident">movemap_text</span></span>(<span>x, y, arr)</span>
</code></dt>
<dd>
<div class="desc"><p>Shows dialog text on movemap</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def movemap_text(x, y, arr):
    &#34;&#34;&#34;Shows dialog text on movemap&#34;&#34;&#34;
    global ev
    # This ensures the game does not crash when big chunks of text are displayed
    for c, i, j, k in zip([x, y], [&#34;x&#34;, &#34;y&#34;],
                          [movemap.width, movemap.height], [17, 10]):
        while c - getattr(movemap, i) + k &gt;= j:
            movemap.set(movemap.x + (1 if i == &#34;x&#34; else 0),
                        movemap.y + (1 if i == &#34;y&#34; else 0))
            movemap.show()
            time.sleep(0.045)
    # End section
    multitext.rechar(&#34;&#34;)
    multitext.add(movemap, x - movemap.x + 1, y - movemap.y)
    arr = [arr[i] + (&#34; &gt;&#34; if i != len(arr) - 1 else &#34;&#34;) for i in range(len(arr))]
    for t in arr:
        ev = &#34;&#34;
        multitext.rechar(&#34;&#34;)
        for i in range(len(t) + 1):
            multitext.outp(liner(t[:i], movemap.width - (x - movemap.x + 1), &#34;   &#34;))
            time.sleep(0.045)
            std_loop()
            if ev != &#34;&#34;:
                ev = &#34;&#34;
                break
        multitext.outp(liner(t, movemap.width - (x - movemap.x + 1), &#34;   &#34;))
        while True:
            std_loop()
            if ev != &#34;&#34;:
                break
            time.sleep(0.05)
    multitext.remove()</code></pre>
</details>
</dd>
<dt id="pokete.on_press"><code class="name flex">
<span>def <span class="ident">on_press</span></span>(<span>key)</span>
</code></dt>
<dd>
<div class="desc"><p>Sets the ev variable</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def on_press(key):
    &#34;&#34;&#34;Sets the ev variable&#34;&#34;&#34;
    global ev
    ev = str(key)</code></pre>
</details>
</dd>
<dt id="pokete.parse_obj"><code class="name flex">
<span>def <span class="ident">parse_obj</span></span>(<span>_map, name, obj, _dict)</span>
</code></dt>
<dd>
<div class="desc"><p>Parses an object to an maps attribute and adds it</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def parse_obj(_map, name, obj, _dict):
    &#34;&#34;&#34;Parses an object to an maps attribute and adds it&#34;&#34;&#34;
    setattr(_map, name, obj)
    obj.add(_map, _dict[&#34;x&#34;], _dict[&#34;y&#34;])</code></pre>
</details>
</dd>
<dt id="pokete.playmap_17_boy"><code class="name flex">
<span>def <span class="ident">playmap_17_boy</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Interaction with boy</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def playmap_17_boy():
    &#34;&#34;&#34;Interaction with boy&#34;&#34;&#34;
    npc = ob_maps[&#34;playmap_17&#34;].boy_1
    if &#34;choka&#34; in [i.identifier for i in figure.pokes[:6]]:
        movemap_text(npc.x, npc.y,
                     [&#34; &lt; Oh, cool!&#34;, &#34; &lt; You have a Choka!&#34;,
                      &#34; &lt; I&#39;ve never seen one before!&#34;, &#34; &lt; Here you go, 200$&#34;])
        if ask_bool(movemap, &#34;Young boy gifted you 200$. Do you want to accept it?&#34;):
            figure.add_money(200)
        npc.will = False
        used_npcs.append(npc.name)
    else:
        movemap_text(npc.x, npc.y,
                     [&#34; &lt; In this region lives the wÃ¼rgos Pokete.&#34;,
                      f&#34; &lt; At level {p_data.pokes[&#39;wÃ¼rgos&#39;][&#39;evolve_lvl&#39;]} it evolves to Choka.&#34;,
                      &#34; &lt; I have never seen one before!&#34;])</code></pre>
</details>
</dd>
<dt id="pokete.playmap_20_trader"><code class="name flex">
<span>def <span class="ident">playmap_20_trader</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Interaction with trader</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def playmap_20_trader():
    &#34;&#34;&#34;Interaction with trader&#34;&#34;&#34;
    npc = ob_maps[&#34;playmap_20&#34;].trader_2
    movemap_text(npc.x, npc.y,
                 [&#34; &lt; I&#39;ve lived in this town for long time and therefore have found some cool Poketes.&#34;,
                  &#34; &lt; Do you want to trade my cool Pokete?&#34;])
    if ask_bool(movemap, &#34;Do you want to trade a Pokete?&#34;):
        if (index := deck(figure.pokes[:6], &#34;Your deck&#34;, True)) is None:
            return
        figure.add_poke(Poke(&#34;ostri&#34;, 500), index)
        used_npcs.append(npc.name)
        with InfoBox(f&#34;You received: {figure.pokes[index].name.capitalize()} at level {figure.pokes[index].lvl()}.&#34;,
                     movemap):
            time.sleep(3)
        movemap_text(npc.x, npc.y, [&#34; &lt; Cool, huh?&#34;])</code></pre>
</details>
</dd>
<dt id="pokete.playmap_23_npc_8"><code class="name flex">
<span>def <span class="ident">playmap_23_npc_8</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Interaction with npc_8</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def playmap_23_npc_8():
    &#34;&#34;&#34;Interaction with npc_8&#34;&#34;&#34;
    npc = ob_maps[&#34;playmap_23&#34;].npc_8
    if ask_bool(movemap, &#34;The man gifted you 100$. Do you want to accept it?&#34;):
        npc.will = False
        used_npcs.append(npc.name)
        figure.add_money(100)</code></pre>
</details>
</dd>
<dt id="pokete.reset_terminal"><code class="name flex">
<span>def <span class="ident">reset_terminal</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Resets the terminals state</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def reset_terminal():
    &#34;&#34;&#34;Resets the terminals state&#34;&#34;&#34;
    if sys.platform == &#34;linux&#34;:
        termios.tcsetattr(fd, termios.TCSADRAIN, old_settings)</code></pre>
</details>
</dd>
<dt id="pokete.save"><code class="name flex">
<span>def <span class="ident">save</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Saves all relevant data to savefile</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def save():
    &#34;&#34;&#34;Saves all relevant data to savefile&#34;&#34;&#34;
    session_info = {
        &#34;user&#34;: figure.name,
        &#34;ver&#34;: VERSION,
        &#34;map&#34;: figure.map.name,
        &#34;oldmap&#34;: figure.oldmap.name,
        &#34;x&#34;: figure.x,
        &#34;y&#34;: figure.y,
        &#34;pokes&#34;: {i: poke.dict() for i, poke in enumerate(figure.pokes)},
        &#34;inv&#34;: figure.inv,
        &#34;money&#34;: figure.get_money(),
        &#34;settings&#34;: settings.dict(),
        &#34;caught_poketes&#34;: list(dict.fromkeys(caught_poketes + [i.identifier for i in figure.pokes])),
        &#34;visited_maps&#34;: visited_maps,
        &#34;startup_time&#34;: __t,
        &#34;used_npcs&#34;: list(dict.fromkeys(used_npcs)),  # filters doublicates from used_npcs
    }
    with open(home + SAVEPATH + &#34;/pokete.py&#34;, &#34;w+&#34;) as file:
        # writes the data to the save file in a nice format
        file.write(f&#34;session_info = {pp.pformat(session_info, sort_dicts=False)}&#34;)</code></pre>
</details>
</dd>
<dt id="pokete.std_loop"><code class="name flex">
<span>def <span class="ident">std_loop</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Standart action executed in most loops</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def std_loop():
    &#34;&#34;&#34;Standart action executed in most loops&#34;&#34;&#34;
    global ev
    if ev == &#34;exit&#34;:
        raise KeyboardInterrupt</code></pre>
</details>
</dd>
<dt id="pokete.swap_poke"><code class="name flex">
<span>def <span class="ident">swap_poke</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Trading with other players in the local network</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def swap_poke():
    &#34;&#34;&#34;Trading with other players in the local network&#34;&#34;&#34;
    if not ask_bool(movemap, &#34;Do you want to trade with another trainer?&#34;):
        return
    port = 65432
    save()
    do = ask_bool(movemap, &#34;Do you want to be the host?&#34;)
    if (index := deck(figure.pokes[:6], &#34;Your deck&#34;, True)) is None:
        return
    if do:
        with InfoBox(f&#34;Hostname: {socket.gethostname()}\nWaiting...&#34;, movemap):
            host = &#39;&#39;
            with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:
                s.bind((host, port))
                s.listen()
                conn, addr = s.accept()
                with conn:
                    while True:
                        data = conn.recv(1024)
                        if not data:
                            break
                        decode_data = json.loads(data.decode())
                        conn.sendall(str.encode(json.dumps({&#34;name&#34;: figure.name,
                                                            &#34;poke&#34;: figure.pokes[index].dict()})))
    else:
        host = &#34;&#34;
        while host == &#34;&#34;:
            host = ask_text(movemap, &#34;Please type in the hosts hostname&#34;,
                            &#34;Host:&#34;, &#34;&#34;, 30)
            if host in [&#34;localhost&#34;, &#34;127.0.0.1&#34;, socket.gethostname()]:
                with InfoBox(&#34;You&#39;re not allowed trade with your self!\nYou fool!&#34;, movemap):
                    time.sleep(5)
                host = &#34;&#34;
        with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:
            try:
                s.connect((host, port))
            except Exception as err:
                with InfoBox(str(err), movemap):
                    time.sleep(5)
                return
            s.sendall(str.encode(json.dumps({&#34;name&#34;: figure.name,
                                             &#34;poke&#34;: figure.pokes[index].dict()})))
            data = s.recv(1024)
            decode_data = json.loads(data.decode())
    figure.add_poke(Poke(decode_data[&#34;poke&#34;][&#34;name&#34;],
                         decode_data[&#34;poke&#34;][&#34;xp&#34;],
                         decode_data[&#34;poke&#34;][&#34;hp&#34;]), index)
    figure.pokes[index].set_ap(decode_data[&#34;poke&#34;][&#34;ap&#34;])
    save()  # to avoid duping
    with InfoBox(
            f&#34;You received: {figure.pokes[index].name.capitalize()} at level {figure.pokes[index].lvl()} from {decode_data[&#39;name&#39;]}.&#34;,
            movemap):
        time.sleep(3)</code></pre>
</details>
</dd>
<dt id="pokete.teleport"><code class="name flex">
<span>def <span class="ident">teleport</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Teleports the player to another towns pokecenter</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def teleport():
    &#34;&#34;&#34;Teleports the player to another towns pokecenter&#34;&#34;&#34;
    if (obj := roadmap(choose=True)) is None:
        return
    else:
        cen_d = p_data.map_data[obj.name][&#34;hard_obs&#34;][&#34;pokecenter&#34;]
        Dor(&#34;&#34;, state=&#34;float&#34;, arg_proto={&#34;map&#34;: obj.name,
                                          &#34;x&#34;: cen_d[&#34;x&#34;] + 5, &#34;y&#34;: cen_d[&#34;y&#34;] + 6}).action(None)</code></pre>
</details>
</dd>
<dt id="pokete.text_input"><code class="name flex">
<span>def <span class="ident">text_input</span></span>(<span>obj, _map, name, wrap_len, max_len=1000000)</span>
</code></dt>
<dd>
<div class="desc"><p>Processes text input</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def text_input(obj, _map, name, wrap_len, max_len=1000000):
    &#34;&#34;&#34;Processes text input&#34;&#34;&#34;
    global ev
    ev = &#34;&#34;
    obj.rechar(hard_liner(wrap_len, name + &#34;â–ˆ&#34;))
    bname = name
    _map.show()
    while True:
        if ev in [&#34;Key.enter&#34;, &#34;Key.esc&#34;]:
            ev = &#34;&#34;
            obj.rechar(hard_liner(wrap_len, name))
            _map.show()
            return name
        elif ev == &#34;Key.backspace&#34;:
            if len(name) &lt;= 0:
                ev = &#34;&#34;
                obj.rechar(bname)
                _map.show()
                return bname
            name = name[:-1]
            obj.rechar(hard_liner(wrap_len, name + &#34;â–ˆ&#34;))
            _map.show()
            ev = &#34;&#34;
        elif ev not in [&#34;&#34;, &#34;Key.enter&#34;, &#34;exit&#34;, &#34;Key.backspace&#34;, &#34;Key.shift&#34;,
                        &#34;Key.shift_r&#34;, &#34;Key.esc&#34;] and len(name) &lt; max_len:
            if ev == &#34;Key.space&#34;:
                ev = &#34;&#39; &#39;&#34;
            name += str(ev.strip(&#34;&#39;&#34;))
            obj.rechar(hard_liner(wrap_len, name + &#34;â–ˆ&#34;))
            _map.show()
            ev = &#34;&#34;
        std_loop()
        time.sleep(0.05)</code></pre>
</details>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="pokete.About"><code class="flex name class">
<span>class <span class="ident">About</span></span>
</code></dt>
<dd>
<div class="desc"><p>The about text, that can be triggered in the menu</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class About:
    &#34;&#34;&#34;The about text, that can be triggered in the menu&#34;&#34;&#34;

    def __init__(self):
        self.box = InfoBox(liner(f&#34;&#34;&#34;Pokete v{VERSION} -- {CODENAME}
by  lxgr-linux &lt;lxgr@protonmail.com&gt;

This  software is licensed under the GPL3, you should have gotten a copy of the GPL3 license alongside this software.
Feel  free to contribute what ever you want to this game, new Pokete contributions are especially welcome.
For  this see the comments in the definations area.
You  can contribute here: https://github.com/lxgr-linux/pokete&#34;&#34;&#34;,
                                 60, pre=&#34;&#34;), map=movemap)

    def __call__(self):
        &#34;&#34;&#34;Shows the about text&#34;&#34;&#34;
        global ev
        with self.box:
            while True:
                if ev in [&#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                    ev = &#34;&#34;
                    break
                std_loop()
                time.sleep(0.05)</code></pre>
</details>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="pokete.Help" href="#pokete.Help">Help</a></li>
</ul>
</dd>
<dt id="pokete.Attack"><code class="flex name class">
<span>class <span class="ident">Attack</span></span>
<span>(</span><span>index)</span>
</code></dt>
<dd>
<div class="desc"><p>Attack that can be used by a Pokete</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Attack:
    &#34;&#34;&#34;Attack that can be used by a Pokete&#34;&#34;&#34;

    def __init__(self, index):
        inf = p_data.attacks[index]
        # Attributes
        self.name = inf[&#34;name&#34;]
        self.factor = inf[&#34;factor&#34;]
        self.action = inf[&#34;action&#34;]
        self.world_action = inf[&#34;world_action&#34;]
        self.move = inf[&#34;move&#34;]
        self.miss_chance = inf[&#34;miss_chance&#34;]
        self.min_lvl = inf[&#34;min_lvl&#34;]
        self.desc = inf[&#34;desc&#34;]
        self.effect = inf[&#34;effect&#34;]
        self.is_generic = inf[&#34;is_generic&#34;]
        self.ap = inf[&#34;ap&#34;]
        self.type = getattr(types, inf[&#34;type&#34;])
        self.max_ap = self.ap
        # labels
        self.label_name = se.Text(self.name, esccode=Color.underlined,
                                  state=&#34;float&#34;)
        self.label_ap = se.Text(f&#34;AP:{self.ap}/{self.max_ap}&#34;, state=&#34;float&#34;)
        self.label_factor = se.Text(f&#34;Attack:{self.factor}&#34;, state=&#34;float&#34;)
        self.label_desc = se.Text(self.desc[:int(width / 2 - 1)], state=&#34;float&#34;)
        self.label_type_1 = se.Text(&#34;Type:&#34;, state=&#34;float&#34;)
        self.label_type_2 = se.Text(self.type.name.capitalize(),
                                    esccode=self.type.color, state=&#34;float&#34;)

    def give_effect(self, enem):
        &#34;&#34;&#34;Gives the associated effect to a Pokete&#34;&#34;&#34;
        if self.effect is not None:
            time.sleep(1.5)
            getattr(effects, self.effect)().add(enem)</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="pokete.Attack.give_effect"><code class="name flex">
<span>def <span class="ident">give_effect</span></span>(<span>self, enem)</span>
</code></dt>
<dd>
<div class="desc"><p>Gives the associated effect to a Pokete</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def give_effect(self, enem):
    &#34;&#34;&#34;Gives the associated effect to a Pokete&#34;&#34;&#34;
    if self.effect is not None:
        time.sleep(1.5)
        getattr(effects, self.effect)().add(enem)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="pokete.Buy"><code class="flex name class">
<span>class <span class="ident">Buy</span></span>
</code></dt>
<dd>
<div class="desc"><p>Menu to buy items in, is triggered in shop</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Buy:
    &#34;&#34;&#34;Menu to buy items in, is triggered in shop&#34;&#34;&#34;

    def __init__(self):
        self.box = ChooseBox(height - 3, 35, &#34;Shop&#34;)
        self.box2 = Box(7, 21)
        self.items = [Inv.poketeball, Inv.superball, Inv.healing_potion,
                      Inv.super_potion, Inv.ap_potion]
        self.box.add_c_obs([se.Text(f&#34;{obj.pretty_name} : {obj.price}$&#34;)
                            for obj in self.items])
        self.money_label = se.Text(f&#34;{figure.get_money()}$&#34;)
        self.desc_label = se.Text(&#34; &#34;)
        # adding
        self.box.add_ob(self.money_label,
                        self.box.width - 2 - len(self.money_label.text), 0)
        self.box2.add_ob(self.desc_label, 1, 1)

    def __call__(self):
        &#34;&#34;&#34;Opens the buy menu&#34;&#34;&#34;
        global ev
        ev = &#34;&#34;
        with self.box.add(movemap, movemap.width - 35, 0):
            self.box2.add(movemap, self.box.x - 19, 3)
            self.rechar()
            movemap.show()
            while True:
                if ev in [&#34;&#39;s&#39;&#34;, &#34;&#39;w&#39;&#34;]:
                    self.box.input(ev)
                    self.rechar()
                    ev = &#34;&#34;
                elif ev in [&#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                    break
                elif ev == &#34;Key.enter&#34;:
                    obj = self.items[self.box.index.index]
                    if figure.get_money() - obj.price &gt;= 0:
                        figure.add_money(-obj.price)
                        figure.give_item(obj.name)
                    ev = &#34;&#34;
                std_loop()
                time.sleep(0.05)
                movemap.show()
        self.box2.remove()

    def rechar(self):
        &#34;&#34;&#34;Rechars the detail text&#34;&#34;&#34;
        obj = self.items[self.box.index.index]
        self.box2.name_label.rechar(obj.pretty_name)
        self.desc_label.rechar(liner(obj.desc, 19))</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="pokete.Buy.rechar"><code class="name flex">
<span>def <span class="ident">rechar</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Rechars the detail text</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def rechar(self):
    &#34;&#34;&#34;Rechars the detail text&#34;&#34;&#34;
    obj = self.items[self.box.index.index]
    self.box2.name_label.rechar(obj.pretty_name)
    self.desc_label.rechar(liner(obj.desc, 19))</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="pokete.CenterDor"><code class="flex name class">
<span>class <span class="ident">CenterDor</span></span>
<span>(</span><span>char, state='solid', arg_proto=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Dor class for the map to enter centers and shops</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class CenterDor(se.Object):
    &#34;&#34;&#34;Dor class for the map to enter centers and shops&#34;&#34;&#34;

    def action(self, ob):
        &#34;&#34;&#34;Trigger&#34;&#34;&#34;
        figure.remove()
        i = figure.map.name
        figure.add(figure.oldmap,
                   figure.oldmap.dor.x
                   if figure.map == centermap
                   else figure.oldmap.shopdor.x,
                   figure.oldmap.dor.y + 1
                   if figure.map == centermap
                   else figure.oldmap.shopdor.y + 1)
        figure.oldmap = ob_maps[i]
        game(figure.map)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>scrap_engine.Object</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="pokete.CenterDor.action"><code class="name flex">
<span>def <span class="ident">action</span></span>(<span>self, ob)</span>
</code></dt>
<dd>
<div class="desc"><p>Trigger</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def action(self, ob):
    &#34;&#34;&#34;Trigger&#34;&#34;&#34;
    figure.remove()
    i = figure.map.name
    figure.add(figure.oldmap,
               figure.oldmap.dor.x
               if figure.map == centermap
               else figure.oldmap.shopdor.x,
               figure.oldmap.dor.y + 1
               if figure.map == centermap
               else figure.oldmap.shopdor.y + 1)
    figure.oldmap = ob_maps[i]
    game(figure.map)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="pokete.CenterInteract"><code class="flex name class">
<span>class <span class="ident">CenterInteract</span></span>
<span>(</span><span>char, state='solid', arg_proto=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Triggers a conversation in the Pokete center</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class CenterInteract(se.Object):
    &#34;&#34;&#34;Triggers a conversation in the Pokete center&#34;&#34;&#34;

    def action(self, ob):
        &#34;&#34;&#34;Triggers the interaction in the Pokete center&#34;&#34;&#34;
        global ev
        ev = &#34;&#34;
        movemap.full_show()
        movemap_text(int(movemap.width / 2), 3,
                     [&#34; &lt; Welcome to the Pokete-Center&#34;,
                      &#34; &lt; What do you want to do?&#34;,
                      &#34; &lt; a: See your full deck\n b: Heal all your Poketes\n c: Go&#34;])
        while True:
            if ev == &#34;&#39;a&#39;&#34;:
                ev = &#34;&#34;
                while &#34;__fallback__&#34; in [p.identifier for p in figure.pokes]:
                    figure.pokes.pop([p.identifier for p in figure.pokes].index(&#34;__fallback__&#34;))
                balls_label_rechar()
                deck(figure.pokes)
                break
            elif ev == &#34;&#39;b&#39;&#34;:
                ev = &#34;&#34;
                heal()
                time.sleep(0.5)
                movemap_text(int(movemap.width / 2), 3, [&#34; &lt; ...&#34;,
                                                         &#34; &lt; Your Poketes are now healed!&#34;])
                break
            elif ev == &#34;&#39;c&#39;&#34;:
                ev = &#34;&#34;
                break
            std_loop()
            time.sleep(0.05)
        movemap.full_show(init=True)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>scrap_engine.Object</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="pokete.CenterInteract.action"><code class="name flex">
<span>def <span class="ident">action</span></span>(<span>self, ob)</span>
</code></dt>
<dd>
<div class="desc"><p>Triggers the interaction in the Pokete center</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def action(self, ob):
    &#34;&#34;&#34;Triggers the interaction in the Pokete center&#34;&#34;&#34;
    global ev
    ev = &#34;&#34;
    movemap.full_show()
    movemap_text(int(movemap.width / 2), 3,
                 [&#34; &lt; Welcome to the Pokete-Center&#34;,
                  &#34; &lt; What do you want to do?&#34;,
                  &#34; &lt; a: See your full deck\n b: Heal all your Poketes\n c: Go&#34;])
    while True:
        if ev == &#34;&#39;a&#39;&#34;:
            ev = &#34;&#34;
            while &#34;__fallback__&#34; in [p.identifier for p in figure.pokes]:
                figure.pokes.pop([p.identifier for p in figure.pokes].index(&#34;__fallback__&#34;))
            balls_label_rechar()
            deck(figure.pokes)
            break
        elif ev == &#34;&#39;b&#39;&#34;:
            ev = &#34;&#34;
            heal()
            time.sleep(0.5)
            movemap_text(int(movemap.width / 2), 3, [&#34; &lt; ...&#34;,
                                                     &#34; &lt; Your Poketes are now healed!&#34;])
            break
        elif ev == &#34;&#39;c&#39;&#34;:
            ev = &#34;&#34;
            break
        std_loop()
        time.sleep(0.05)
    movemap.full_show(init=True)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="pokete.ChanceDor"><code class="flex name class">
<span>class <span class="ident">ChanceDor</span></span>
<span>(</span><span>char, state='solid', arg_proto=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Same as dor but with a chance</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ChanceDor(Dor):
    &#34;&#34;&#34;Same as dor but with a chance&#34;&#34;&#34;

    def action(self, ob):
        &#34;&#34;&#34;Trigger&#34;&#34;&#34;
        if random.randint(0, self.arg_proto[&#34;chance&#34;]) == 0:
            super().action(ob)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="pokete.Dor" href="#pokete.Dor">Dor</a></li>
<li>scrap_engine.Object</li>
</ul>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="pokete.Dor" href="#pokete.Dor">Dor</a></b></code>:
<ul class="hlist">
<li><code><a title="pokete.Dor.action" href="#pokete.Dor.action">action</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="pokete.Debug"><code class="flex name class">
<span>class <span class="ident">Debug</span></span>
</code></dt>
<dd>
<div class="desc"><p>Debug class</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Debug:
    &#34;&#34;&#34;Debug class&#34;&#34;&#34;

    @classmethod
    def pos(cls):
        &#34;&#34;&#34;Prints the position&#34;&#34;&#34;
        print(figure.x, figure.y, figure.map.name)</code></pre>
</details>
<h3>Static methods</h3>
<dl>
<dt id="pokete.Debug.pos"><code class="name flex">
<span>def <span class="ident">pos</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Prints the position</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@classmethod
def pos(cls):
    &#34;&#34;&#34;Prints the position&#34;&#34;&#34;
    print(figure.x, figure.y, figure.map.name)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="pokete.Deck"><code class="flex name class">
<span>class <span class="ident">Deck</span></span>
</code></dt>
<dd>
<div class="desc"><p>Deck to see Poketes in</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Deck:
    &#34;&#34;&#34;Deck to see Poketes in&#34;&#34;&#34;

    def __init__(self):
        self.map = se.Map(height - 1, width, &#34; &#34;)
        self.submap = se.Submap(self.map, 0, 0, height=height - 1, width=width)
        self.exit_label = se.Text(&#34;1: Exit  &#34;)
        self.move_label = se.Text(&#34;2: Move    &#34;)
        self.move_free = se.Text(&#34;3: Free&#34;)
        self.index = se.Object(&#34;*&#34;)
        # adding
        self.exit_label.add(self.submap, 0, self.submap.height - 1)
        self.move_label.add(self.submap, 9, self.submap.height - 1)
        self.move_free.add(self.submap, 20, self.submap.height - 1)

    def rem_pokes(self, pokes):
        &#34;&#34;&#34;Removes all Poketes from the Deck&#34;&#34;&#34;
        for poke in pokes:
            self.remove(poke)

    def __call__(self, pokes, label=&#34;Your full deck&#34;, in_fight=False):
        &#34;&#34;&#34;Opens the deck&#34;&#34;&#34;
        global ev
        ev = &#34;&#34;
        ret_action = None
        self.map.resize(5 * int((len(pokes) + 1) / 2) + 2, width, self.map.background)
        # decksubmap.resize(height-1, width)
        se.Text(label, esccode=Color.thicc).add(self.map, 2, 0)
        se.Square(&#34;|&#34;, 1, self.map.height - 2).add(self.map,
                                                   round(self.map.width / 2), 1)
        StdFrame2(self.map.height - 1, self.map.width).add(self.map, 0, 0)
        self.move_label.rechar(&#34;2: Move    &#34;)
        indici = []
        self.add_all(pokes, True)
        self.index.index = 0
        if len(pokes) &gt; 0:
            self.index.add(self.map,
                           pokes[self.index.index].text_name.x + len(pokes[self.index.index].text_name.text) + 1,
                           pokes[self.index.index].text_name.y)
        self.submap.full_show(init=True)
        while True:
            if ev in [&#34;&#39;1&#39;&#34;, &#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                ev = &#34;&#34;
                self.rem_pokes(pokes)
                while len(self.map.obs) &gt; 0:
                    self.map.obs[0].remove()
                self.submap.set(0, 0)
                if ret_action is not None:
                    abb_funcs[ret_action]()
                return
            elif ev == &#34;&#39;2&#39;&#34;:
                ev = &#34;&#34;
                if len(pokes) == 0:
                    continue
                if not indici:
                    indici.append(self.index.index)
                    self.move_label.rechar(&#34;2: Move to &#34;)
                else:
                    indici.append(self.index.index)
                    figure.pokes[indici[0]], figure.pokes[indici[1]] = pokes[indici[1]], pokes[indici[0]]
                    pokes = figure.pokes[:len(pokes)]
                    indici = []
                    self.rem_pokes(pokes)
                    self.index.set(0, self.map.height - 1)
                    self.add_all(pokes)
                    self.index.set(
                        pokes[self.index.index].text_name.x + len(pokes[self.index.index].text_name.text) + 1,
                        pokes[self.index.index].text_name.y)
                    self.move_label.rechar(&#34;2: Move    &#34;)
                    self.submap.full_show()
            elif ev == &#34;&#39;3&#39;&#34;:
                ev = &#34;&#34;
                if ask_bool(self.submap, f&#34;Do you really want to free {figure.pokes[self.index.index].name}?&#34;):
                    self.rem_pokes(pokes)
                    figure.pokes[self.index.index] = Poke(&#34;__fallback__&#34;, 10, 0)
                    pokes = figure.pokes[:len(pokes)]
                    self.add_all(pokes)
                    self.index.set(
                        pokes[self.index.index].text_name.x + len(pokes[self.index.index].text_name.text) + 1,
                        pokes[self.index.index].text_name.y)
                    balls_label_rechar()
            elif ev in [&#34;&#39;w&#39;&#34;, &#34;&#39;a&#39;&#34;, &#34;&#39;s&#39;&#34;, &#34;&#39;d&#39;&#34;]:
                self.control(pokes, ev)
                ev = &#34;&#34;
            elif ev == &#34;Key.enter&#34;:
                ev = &#34;&#34;
                if len(pokes) == 0:
                    continue
                if in_fight:
                    if pokes[self.index.index].hp &gt; 0:
                        self.rem_pokes(pokes)
                        while len(self.map.obs) &gt; 0:
                            self.map.obs[0].remove()
                        self.submap.set(0, 0)
                        return self.index.index
                else:
                    self.rem_pokes(pokes)
                    ret_action = detail(pokes[self.index.index])
                    self.add_all(pokes)
                    if ret_action is not None:
                        ev = &#34;&#39;q&#39;&#34;
                        continue
                    self.submap.full_show(init=True)
            std_loop()
            if len(pokes) &gt; 0 and self.index.y - self.submap.y + 6 &gt; self.submap.height:
                self.submap.set(self.submap.x, self.submap.y + 1)
            elif len(pokes) &gt; 0 and self.index.y - 1 &lt; self.submap.y:
                self.submap.set(self.submap.x, self.submap.y - 1)
            time.sleep(0.05)
            self.submap.full_show()

    @staticmethod
    def add(poke, _map, x, y, in_deck=True):
        &#34;&#34;&#34;Adds a Pokete to the deck&#34;&#34;&#34;
        poke.text_name.add(_map, x + 12, y + 0)
        if poke.identifier != &#34;__fallback__&#34;:
            for obj, _x, _y in zip([poke.ico, poke.text_lvl, poke.text_hp,
                                    poke.tril, poke.trir, poke.hp_bar, poke.text_xp],
                                   [0, 12, 12, 18, 27, 19, 12],
                                   [0, 1, 2, 2, 2, 2, 3]):
                obj.add(_map, x + _x, y + _y)
            if figure.pokes.index(poke) &lt; 6 and in_deck:
                poke.pball_small.add(_map,
                                     round(_map.width / 2) - 1 if figure.pokes.index(poke) % 2 == 0 else _map.width - 2,
                                     y)
            for e in poke.effects:
                e.add_label()

    @staticmethod
    def remove(poke):
        &#34;&#34;&#34;Removes a Pokete from the deck&#34;&#34;&#34;
        for obj in [poke.ico, poke.text_name, poke.text_lvl, poke.text_hp,
                    poke.tril, poke.trir, poke.hp_bar, poke.text_xp,
                    poke.pball_small]:
            obj.remove()
        for e in poke.effects:
            e.cleanup()

    def add_all(self, pokes, init=False):
        &#34;&#34;&#34;Adds all Poketes to the deck&#34;&#34;&#34;
        j = 0
        for i, poke in enumerate(pokes):
            self.add(poke, self.map, 1 if i % 2 == 0 else round(self.map.width / 2) + 1, j * 5 + 1)
            if i % 2 == 0 and init:
                se.Square(&#34;-&#34;, self.map.width - 2, 1).add(self.map, 1, j * 5 + 5)
            if i % 2 == 1:
                j += 1

    def control(self, pokes, ev):
        &#34;&#34;&#34;Processes inputs&#34;&#34;&#34;
        if len(pokes) &lt;= 1:
            return
        for con, stat, fir, sec in zip([&#34;&#39;a&#39;&#34;, &#34;&#39;d&#39;&#34;, &#34;&#39;s&#39;&#34;, &#34;&#39;w&#39;&#34;],
                                       [self.index.index != 0, self.index.index != len(pokes) - 1,
                                        self.index.index + 2 &lt; len(pokes), self.index.index - 2 &gt;= 0],
                                       [-1, 1, 2, -2],
                                       [len(pokes) - 1, 0, self.index.index % 2,
                                        [i for i in range(len(pokes)) if i % 2 == self.index.index % 2][-1]]):
            if ev == con:
                if stat:
                    self.index.index += fir
                else:
                    self.index.index = sec
                break
        self.index.set(pokes[self.index.index].text_name.x + len(pokes[self.index.index].text_name.text) + 1,
                       pokes[self.index.index].text_name.y)</code></pre>
</details>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="pokete.Detail" href="#pokete.Detail">Detail</a></li>
</ul>
<h3>Static methods</h3>
<dl>
<dt id="pokete.Deck.add"><code class="name flex">
<span>def <span class="ident">add</span></span>(<span>poke, _map, x, y, in_deck=True)</span>
</code></dt>
<dd>
<div class="desc"><p>Adds a Pokete to the deck</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def add(poke, _map, x, y, in_deck=True):
    &#34;&#34;&#34;Adds a Pokete to the deck&#34;&#34;&#34;
    poke.text_name.add(_map, x + 12, y + 0)
    if poke.identifier != &#34;__fallback__&#34;:
        for obj, _x, _y in zip([poke.ico, poke.text_lvl, poke.text_hp,
                                poke.tril, poke.trir, poke.hp_bar, poke.text_xp],
                               [0, 12, 12, 18, 27, 19, 12],
                               [0, 1, 2, 2, 2, 2, 3]):
            obj.add(_map, x + _x, y + _y)
        if figure.pokes.index(poke) &lt; 6 and in_deck:
            poke.pball_small.add(_map,
                                 round(_map.width / 2) - 1 if figure.pokes.index(poke) % 2 == 0 else _map.width - 2,
                                 y)
        for e in poke.effects:
            e.add_label()</code></pre>
</details>
</dd>
<dt id="pokete.Deck.remove"><code class="name flex">
<span>def <span class="ident">remove</span></span>(<span>poke)</span>
</code></dt>
<dd>
<div class="desc"><p>Removes a Pokete from the deck</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def remove(poke):
    &#34;&#34;&#34;Removes a Pokete from the deck&#34;&#34;&#34;
    for obj in [poke.ico, poke.text_name, poke.text_lvl, poke.text_hp,
                poke.tril, poke.trir, poke.hp_bar, poke.text_xp,
                poke.pball_small]:
        obj.remove()
    for e in poke.effects:
        e.cleanup()</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="pokete.Deck.add_all"><code class="name flex">
<span>def <span class="ident">add_all</span></span>(<span>self, pokes, init=False)</span>
</code></dt>
<dd>
<div class="desc"><p>Adds all Poketes to the deck</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_all(self, pokes, init=False):
    &#34;&#34;&#34;Adds all Poketes to the deck&#34;&#34;&#34;
    j = 0
    for i, poke in enumerate(pokes):
        self.add(poke, self.map, 1 if i % 2 == 0 else round(self.map.width / 2) + 1, j * 5 + 1)
        if i % 2 == 0 and init:
            se.Square(&#34;-&#34;, self.map.width - 2, 1).add(self.map, 1, j * 5 + 5)
        if i % 2 == 1:
            j += 1</code></pre>
</details>
</dd>
<dt id="pokete.Deck.control"><code class="name flex">
<span>def <span class="ident">control</span></span>(<span>self, pokes, ev)</span>
</code></dt>
<dd>
<div class="desc"><p>Processes inputs</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def control(self, pokes, ev):
    &#34;&#34;&#34;Processes inputs&#34;&#34;&#34;
    if len(pokes) &lt;= 1:
        return
    for con, stat, fir, sec in zip([&#34;&#39;a&#39;&#34;, &#34;&#39;d&#39;&#34;, &#34;&#39;s&#39;&#34;, &#34;&#39;w&#39;&#34;],
                                   [self.index.index != 0, self.index.index != len(pokes) - 1,
                                    self.index.index + 2 &lt; len(pokes), self.index.index - 2 &gt;= 0],
                                   [-1, 1, 2, -2],
                                   [len(pokes) - 1, 0, self.index.index % 2,
                                    [i for i in range(len(pokes)) if i % 2 == self.index.index % 2][-1]]):
        if ev == con:
            if stat:
                self.index.index += fir
            else:
                self.index.index = sec
            break
    self.index.set(pokes[self.index.index].text_name.x + len(pokes[self.index.index].text_name.text) + 1,
                   pokes[self.index.index].text_name.y)</code></pre>
</details>
</dd>
<dt id="pokete.Deck.rem_pokes"><code class="name flex">
<span>def <span class="ident">rem_pokes</span></span>(<span>self, pokes)</span>
</code></dt>
<dd>
<div class="desc"><p>Removes all Poketes from the Deck</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def rem_pokes(self, pokes):
    &#34;&#34;&#34;Removes all Poketes from the Deck&#34;&#34;&#34;
    for poke in pokes:
        self.remove(poke)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="pokete.Detail"><code class="flex name class">
<span>class <span class="ident">Detail</span></span>
</code></dt>
<dd>
<div class="desc"><p>Shows details about a Pokete</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Detail(Deck):
    &#34;&#34;&#34;Shows details about a Pokete&#34;&#34;&#34;

    def __init__(self):
        self.map = se.Map(height - 1, width, &#34; &#34;)
        self.name_label = se.Text(&#34;Details&#34;, esccode=Color.thicc)
        self.name_attacks = se.Text(&#34;Attacks&#34;, esccode=Color.thicc)
        self.frame = StdFrame2(17, self.map.width, state=&#34;float&#34;)
        self.attack_defense = se.Text(&#34;Attack:   Defense:&#34;)
        self.world_actions_label = se.Text(&#34;Abilities:&#34;)
        self.type_label = se.Text(&#34;Type:&#34;)
        self.initiative_label = se.Text(&#34;Initiative:&#34;)
        self.exit_label = se.Text(&#34;1: Exit&#34;)
        self.ability_label = se.Text(&#34;2: Use ability&#34;)
        self.line_sep1 = se.Square(&#34;-&#34;, self.map.width - 2, 1, state=&#34;float&#34;)
        self.line_sep2 = se.Square(&#34;-&#34;, self.map.width - 2, 1, state=&#34;float&#34;)
        self.line_middle = se.Square(&#34;|&#34;, 1, 10, state=&#34;float&#34;)
        # adding
        self.name_label.add(self.map, 2, 0)
        self.name_attacks.add(self.map, 2, 6)
        self.attack_defense.add(self.map, 13, 5)
        self.world_actions_label.add(self.map, 24, 4)
        self.type_label.add(self.map, 36, 5)
        self.initiative_label.add(self.map, 49, 5)
        self.exit_label.add(self.map, 0, self.map.height - 1)
        self.ability_label.add(self.map, 9, self.map.height - 1)
        self.line_sep1.add(self.map, 1, 6)
        self.line_sep2.add(self.map, 1, 11)
        self.frame.add(self.map, 0, 0)
        self.line_middle.add(self.map, round(self.map.width / 2), 7)

    def __call__(self, poke, abb=True):
        &#34;&#34;&#34;Shows details&#34;&#34;&#34;
        global ev
        ret_action = None
        self.add(poke, self.map, 1, 1, False)
        abb_obs = [i for i in poke.attac_obs
                   if i.world_action != &#34;&#34;]
        if abb_obs != [] and abb:
            self.world_actions_label.rechar(&#34;Abilities:&#34; + &#34; &#34;.join([i.name
                                                                     for i in abb_obs]))
            self.ability_label.rechar(&#34;2: Use ability&#34;)
        else:
            self.world_actions_label.rechar(&#34;&#34;)
            self.ability_label.rechar(&#34;&#34;)
        self.attack_defense.rechar(f&#34;Attack:{poke.atc}{(4 - len(str(poke.atc))) * &#39; &#39;}Defense:{poke.defense}&#34;)
        self.initiative_label.rechar(f&#34;Initiative:{poke.initiative}&#34;)
        for obj, x, y in zip([poke.desc, poke.text_type], [34, 41], [2, 5]):
            obj.add(self.map, x, y)
        for atc, x, y in zip(poke.attac_obs, [1, round(self.map.width / 2) + 1, 1,
                                              round(self.map.width / 2) + 1], [7, 7, 12, 12]):
            atc.temp_i = 0
            atc.temp_j = -30
            atc.label_desc.rechar(atc.desc[:int(width / 2 - 1)])
            atc.label_ap.rechar(f&#34;AP:{atc.ap}/{atc.max_ap}&#34;)
            for label, _x, _y in zip([atc.label_name, atc.label_factor,
                                      atc.label_type_1, atc.label_type_2,
                                      atc.label_ap, atc.label_desc],
                                     [0, 0, 11, 16, 0, 0], [0, 1, 1, 1, 2, 3]):
                label.add(self.map, x + _x, y + _y)
        self.map.show(init=True)
        while True:
            if ev in [&#34;&#39;1&#39;&#34;, &#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                ev = &#34;&#34;
                self.remove(poke)
                for obj in [poke.desc, poke.text_type]:
                    obj.remove()
                for atc in poke.attac_obs:
                    for obj in [atc.label_name, atc.label_factor, atc.label_ap,
                                atc.label_desc, atc.label_type_1, atc.label_type_2]:
                        obj.remove()
                    del atc.temp_i, atc.temp_j
                return ret_action
            elif ev == &#34;&#39;2&#39;&#34; and abb_obs != [] and abb:
                with ChooseBox(len(abb_obs) + 2, 25, name=&#34;Abilities&#34;,
                               c_obs=[se.Text(i.name)
                                      for i in abb_obs]).center_add(self.map) as box:
                    while True:
                        if ev in [&#34;&#39;s&#39;&#34;, &#34;&#39;w&#39;&#34;]:
                            box.input(ev)
                            self.map.show()
                            ev = &#34;&#34;
                        elif ev == &#34;Key.enter&#34;:
                            ret_action = abb_obs[box.index.index].world_action
                            ev = &#34;&#39;q&#39;&#34;
                            break
                        elif ev in [&#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                            ev = &#34;&#34;
                            break
                        std_loop()
                        time.sleep(0.05)
            std_loop()
            for atc in poke.attac_obs:  # This section generates the Text effect for attack labels
                if len(atc.desc) &gt; int((width - 3) / 2 - 1):
                    if atc.temp_j == 5:
                        atc.temp_i += 1
                        atc.temp_j = 0
                        if atc.temp_i == len(atc.desc) - int(width / 2 - 1) + 10:
                            atc.temp_i = 0
                            atc.temp_j = -30
                        atc.label_desc.rechar(atc.desc[atc.temp_i:int(width / 2 - 1) + atc.temp_i])
                    else:
                        atc.temp_j += 1
            time.sleep(0.05)
            self.map.show()</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="pokete.Deck" href="#pokete.Deck">Deck</a></li>
</ul>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="pokete.Deck" href="#pokete.Deck">Deck</a></b></code>:
<ul class="hlist">
<li><code><a title="pokete.Deck.add" href="#pokete.Deck.add">add</a></code></li>
<li><code><a title="pokete.Deck.add_all" href="#pokete.Deck.add_all">add_all</a></code></li>
<li><code><a title="pokete.Deck.control" href="#pokete.Deck.control">control</a></code></li>
<li><code><a title="pokete.Deck.rem_pokes" href="#pokete.Deck.rem_pokes">rem_pokes</a></code></li>
<li><code><a title="pokete.Deck.remove" href="#pokete.Deck.remove">remove</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="pokete.Dex"><code class="flex name class">
<span>class <span class="ident">Dex</span></span>
<span>(</span><span>_map)</span>
</code></dt>
<dd>
<div class="desc"><p>The Pokete dex that shows stats about all Poketes ever caught</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Dex:
    &#34;&#34;&#34;The Pokete dex that shows stats about all Poketes ever caught&#34;&#34;&#34;

    def __init__(self, _map):
        self.box = ChooseBox(_map.height - 3, 35, &#34;Poketedex&#34;)
        self.detail_box = Box(16, 35)
        self.map = _map
        self.idx = 0
        self.obs = []
        self.detail_info = se.Text(&#34;&#34;, state=&#34;float&#34;)
        self.detail_desc = se.Text(&#34;&#34;, state=&#34;float&#34;)
        self.detail_box.add_ob(self.detail_info, 16, 1)
        self.detail_box.add_ob(self.detail_desc, 3, 7)

    def add_c_obs(self):
        &#34;&#34;&#34;Adds c_obs to box&#34;&#34;&#34;
        self.box.add_c_obs(self.obs[self.idx * (self.box.height - 2):(self.idx + 1) * (self.box.height - 2)])

    def rem_c_obs(self):
        &#34;&#34;&#34;Removes c_obs to box&#34;&#34;&#34;
        for c_ob in self.box.c_obs:
            c_ob.remove()
        self.box.remove_c_obs()

    def detail(self, poke):
        &#34;&#34;&#34;Shows details about the Pokete&#34;&#34;&#34;
        global ev
        ev = &#34;&#34;

        poke = Poke(poke, 0)
        desc_text = liner(poke.desc.text.replace(&#34;\n&#34;, &#34; &#34;) +
                          (f&#34;\n\n Evolves to {poke.evolve_poke if poke.evolve_poke in caught_poketes else &#39;???&#39;}.&#34;
                           if poke.evolve_lvl != 0 else &#34;&#34;), 29)
        self.detail_box.resize(9 + len(desc_text.split(&#34;\n&#34;)), 35)
        self.detail_box.name_label.rechar(poke.name)
        self.detail_box.add_ob(poke.ico, 3, 2)
        self.detail_desc.rechar(desc_text)
        self.detail_info.rechar(&#34;Type: &#34;)
        self.detail_info += se.Text(poke.type.name.capitalize(),
                                    esccode=poke.type.color) + se.Text((f&#34;&#34;&#34;
HP: {poke.hp}
Attack: {poke.atc}
Defense: {poke.defense}
Initiative: {poke.initiative}&#34;&#34;&#34;))
        with self.detail_box.center_add(self.map):
            while True:
                if ev in [&#34;&#39;e&#39;&#34;, &#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                    ev = &#34;&#34;
                    break
                std_loop()
                time.sleep(0.05)
                self.map.show()
        self.detail_box.rem_ob(poke.ico)

    def __call__(self, pokes):
        &#34;&#34;&#34;Opens the dex&#34;&#34;&#34;
        global ev
        ev = &#34;&#34;
        self.idx = 0

        p_dict = {i[1]: i[-1] for i in
                  sorted([(pokes[j][&#34;types&#34;][0], j, pokes[j])
                          for j in list(pokes)[1:]])}
        self.obs = [se.Text(f&#34;{i + 1} {p_dict[poke][&#39;name&#39;] if poke in caught_poketes else &#39;???&#39;}&#34;, state=&#34;float&#34;)
                    for i, poke in enumerate(p_dict)]
        self.add_c_obs()
        with self.box.add(self.map, self.map.width - self.box.width, 0):
            while True:
                for event, idx, n_idx, add, idx_2 in zip([&#34;&#39;s&#39;&#34;, &#34;&#39;w&#39;&#34;],
                                                         [len(self.box.c_obs) - 1, 0], [0, self.box.height - 3],
                                                         [1, -1], [-1, 0]):
                    if ev == event and self.box.index.index == idx:
                        if self.box.c_obs[self.box.index.index] != self.obs[idx_2]:
                            self.rem_c_obs()
                            self.idx += add
                            self.add_c_obs()
                            self.box.set_index(n_idx)
                        ev = &#34;&#34;
                if ev == &#34;Key.enter&#34;:
                    if &#34;???&#34; not in self.box.c_obs[self.box.index.index].text:
                        self.detail(list(p_dict)[self.idx * (self.box.height - 2)
                                                 + self.box.index.index])
                    ev = &#34;&#34;
                elif ev in [&#34;&#39;s&#39;&#34;, &#34;&#39;w&#39;&#34;]:
                    self.box.input(ev)
                    ev = &#34;&#34;
                elif ev in [&#34;&#39;e&#39;&#34;, &#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                    ev = &#34;&#34;
                    break
                std_loop()
                time.sleep(0.05)
                self.map.show()
            self.rem_c_obs()</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="pokete.Dex.add_c_obs"><code class="name flex">
<span>def <span class="ident">add_c_obs</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Adds c_obs to box</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_c_obs(self):
    &#34;&#34;&#34;Adds c_obs to box&#34;&#34;&#34;
    self.box.add_c_obs(self.obs[self.idx * (self.box.height - 2):(self.idx + 1) * (self.box.height - 2)])</code></pre>
</details>
</dd>
<dt id="pokete.Dex.detail"><code class="name flex">
<span>def <span class="ident">detail</span></span>(<span>self, poke)</span>
</code></dt>
<dd>
<div class="desc"><p>Shows details about the Pokete</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">    def detail(self, poke):
        &#34;&#34;&#34;Shows details about the Pokete&#34;&#34;&#34;
        global ev
        ev = &#34;&#34;

        poke = Poke(poke, 0)
        desc_text = liner(poke.desc.text.replace(&#34;\n&#34;, &#34; &#34;) +
                          (f&#34;\n\n Evolves to {poke.evolve_poke if poke.evolve_poke in caught_poketes else &#39;???&#39;}.&#34;
                           if poke.evolve_lvl != 0 else &#34;&#34;), 29)
        self.detail_box.resize(9 + len(desc_text.split(&#34;\n&#34;)), 35)
        self.detail_box.name_label.rechar(poke.name)
        self.detail_box.add_ob(poke.ico, 3, 2)
        self.detail_desc.rechar(desc_text)
        self.detail_info.rechar(&#34;Type: &#34;)
        self.detail_info += se.Text(poke.type.name.capitalize(),
                                    esccode=poke.type.color) + se.Text((f&#34;&#34;&#34;
HP: {poke.hp}
Attack: {poke.atc}
Defense: {poke.defense}
Initiative: {poke.initiative}&#34;&#34;&#34;))
        with self.detail_box.center_add(self.map):
            while True:
                if ev in [&#34;&#39;e&#39;&#34;, &#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                    ev = &#34;&#34;
                    break
                std_loop()
                time.sleep(0.05)
                self.map.show()
        self.detail_box.rem_ob(poke.ico)</code></pre>
</details>
</dd>
<dt id="pokete.Dex.rem_c_obs"><code class="name flex">
<span>def <span class="ident">rem_c_obs</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Removes c_obs to box</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def rem_c_obs(self):
    &#34;&#34;&#34;Removes c_obs to box&#34;&#34;&#34;
    for c_ob in self.box.c_obs:
        c_ob.remove()
    self.box.remove_c_obs()</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="pokete.Dor"><code class="flex name class">
<span>class <span class="ident">Dor</span></span>
<span>(</span><span>char, state='solid', arg_proto=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Dor class for the map to enter other maps</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Dor(se.Object):
    &#34;&#34;&#34;Dor class for the map to enter other maps&#34;&#34;&#34;

    def action(self, ob):
        &#34;&#34;&#34;Trigger&#34;&#34;&#34;
        figure.remove()
        i = figure.map.name
        figure.add(ob_maps[self.arg_proto[&#34;map&#34;]], self.arg_proto[&#34;x&#34;],
                   self.arg_proto[&#34;y&#34;])
        figure.oldmap = ob_maps[i]
        game(ob_maps[self.arg_proto[&#34;map&#34;]])</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>scrap_engine.Object</li>
</ul>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="pokete.ChanceDor" href="#pokete.ChanceDor">ChanceDor</a></li>
<li><a title="pokete.DorToCenter" href="#pokete.DorToCenter">DorToCenter</a></li>
<li><a title="pokete.DorToShop" href="#pokete.DorToShop">DorToShop</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="pokete.Dor.action"><code class="name flex">
<span>def <span class="ident">action</span></span>(<span>self, ob)</span>
</code></dt>
<dd>
<div class="desc"><p>Trigger</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def action(self, ob):
    &#34;&#34;&#34;Trigger&#34;&#34;&#34;
    figure.remove()
    i = figure.map.name
    figure.add(ob_maps[self.arg_proto[&#34;map&#34;]], self.arg_proto[&#34;x&#34;],
               self.arg_proto[&#34;y&#34;])
    figure.oldmap = ob_maps[i]
    game(ob_maps[self.arg_proto[&#34;map&#34;]])</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="pokete.DorToCenter"><code class="flex name class">
<span>class <span class="ident">DorToCenter</span></span>
</code></dt>
<dd>
<div class="desc"><p>Dor that leads to the Pokete center</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class DorToCenter(Dor):
    &#34;&#34;&#34;Dor that leads to the Pokete center&#34;&#34;&#34;

    def __init__(self):
        super().__init__(&#34;#&#34;, state=&#34;float&#34;,
                         arg_proto={&#34;map&#34;: &#34;centermap&#34;,
                                    &#34;x&#34;: int(centermap.width / 2), &#34;y&#34;: 7})</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="pokete.Dor" href="#pokete.Dor">Dor</a></li>
<li>scrap_engine.Object</li>
</ul>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="pokete.Dor" href="#pokete.Dor">Dor</a></b></code>:
<ul class="hlist">
<li><code><a title="pokete.Dor.action" href="#pokete.Dor.action">action</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="pokete.DorToShop"><code class="flex name class">
<span>class <span class="ident">DorToShop</span></span>
</code></dt>
<dd>
<div class="desc"><p>Dor that leads to the shop</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class DorToShop(Dor):
    &#34;&#34;&#34;Dor that leads to the shop&#34;&#34;&#34;

    def __init__(self):
        super().__init__(&#34;#&#34;, state=&#34;float&#34;,
                         arg_proto={&#34;map&#34;: &#34;shopmap&#34;,
                                    &#34;x&#34;: int(shopmap.width / 2), &#34;y&#34;: 7})</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="pokete.Dor" href="#pokete.Dor">Dor</a></li>
<li>scrap_engine.Object</li>
</ul>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="pokete.Dor" href="#pokete.Dor">Dor</a></b></code>:
<ul class="hlist">
<li><code><a title="pokete.Dor.action" href="#pokete.Dor.action">action</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="pokete.ExtraActions"><code class="flex name class">
<span>class <span class="ident">ExtraActions</span></span>
</code></dt>
<dd>
<div class="desc"><p>Extra actions class to keep track of extra actions</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ExtraActions:
    &#34;&#34;&#34;Extra actions class to keep track of extra actions&#34;&#34;&#34;

    @staticmethod
    def water(obs):
        &#34;&#34;&#34;Water animation&#34;&#34;&#34;
        if settings.animations:
            for obj in obs:
                if random.randint(0, 9) == 0:
                    if &#34; &#34; not in obj.char:
                        obj.rechar([i for i in
                                    [Color.lightblue + &#34;~&#34; + Color.reset,
                                     Color.blue + &#34;~&#34; + Color.reset]
                                    if i != obj.char][0])
                        if obj.x == figure.x and obj.y == figure.y:
                            figure.redraw()

    @staticmethod
    def playmap_4():
        &#34;&#34;&#34;Water animation&#34;&#34;&#34;
        ExtraActions.water(ob_maps[&#34;playmap_4&#34;].lake_1.obs)

    @staticmethod
    def playmap_11():
        &#34;&#34;&#34;Water animation&#34;&#34;&#34;
        ExtraActions.water(ob_maps[&#34;playmap_11&#34;].lake_1.obs)

    @staticmethod
    def playmap_18():
        &#34;&#34;&#34;Water animation&#34;&#34;&#34;
        ExtraActions.water(ob_maps[&#34;playmap_18&#34;].lake_1.obs)

    @staticmethod
    def playmap_21():
        &#34;&#34;&#34;Water animation&#34;&#34;&#34;
        ExtraActions.water(ob_maps[&#34;playmap_21&#34;].lake_1.obs)

    @staticmethod
    def playmap_7():
        &#34;&#34;&#34;Cave animation&#34;&#34;&#34;
        for obj in ob_maps[&#34;playmap_7&#34;].inner_walls.obs + ob_maps[&#34;playmap_7&#34;].trainers + [
            getattr(ob_maps[&#34;playmap_7&#34;], i) for i in p_data.map_data[&#34;playmap_7&#34;][&#34;balls&#34;] if
                &#34;playmap_7.&#34; + i not in used_npcs or not save_trainers]:
            if obj.added and math.sqrt((obj.y - figure.y) ** 2 + (obj.x - figure.x) ** 2) &lt;= 3:
                obj.rechar(obj.bchar)
            else:
                obj.rechar(&#34; &#34;)</code></pre>
</details>
<h3>Static methods</h3>
<dl>
<dt id="pokete.ExtraActions.playmap_11"><code class="name flex">
<span>def <span class="ident">playmap_11</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Water animation</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def playmap_11():
    &#34;&#34;&#34;Water animation&#34;&#34;&#34;
    ExtraActions.water(ob_maps[&#34;playmap_11&#34;].lake_1.obs)</code></pre>
</details>
</dd>
<dt id="pokete.ExtraActions.playmap_18"><code class="name flex">
<span>def <span class="ident">playmap_18</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Water animation</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def playmap_18():
    &#34;&#34;&#34;Water animation&#34;&#34;&#34;
    ExtraActions.water(ob_maps[&#34;playmap_18&#34;].lake_1.obs)</code></pre>
</details>
</dd>
<dt id="pokete.ExtraActions.playmap_21"><code class="name flex">
<span>def <span class="ident">playmap_21</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Water animation</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def playmap_21():
    &#34;&#34;&#34;Water animation&#34;&#34;&#34;
    ExtraActions.water(ob_maps[&#34;playmap_21&#34;].lake_1.obs)</code></pre>
</details>
</dd>
<dt id="pokete.ExtraActions.playmap_4"><code class="name flex">
<span>def <span class="ident">playmap_4</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Water animation</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def playmap_4():
    &#34;&#34;&#34;Water animation&#34;&#34;&#34;
    ExtraActions.water(ob_maps[&#34;playmap_4&#34;].lake_1.obs)</code></pre>
</details>
</dd>
<dt id="pokete.ExtraActions.playmap_7"><code class="name flex">
<span>def <span class="ident">playmap_7</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Cave animation</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def playmap_7():
    &#34;&#34;&#34;Cave animation&#34;&#34;&#34;
    for obj in ob_maps[&#34;playmap_7&#34;].inner_walls.obs + ob_maps[&#34;playmap_7&#34;].trainers + [
        getattr(ob_maps[&#34;playmap_7&#34;], i) for i in p_data.map_data[&#34;playmap_7&#34;][&#34;balls&#34;] if
            &#34;playmap_7.&#34; + i not in used_npcs or not save_trainers]:
        if obj.added and math.sqrt((obj.y - figure.y) ** 2 + (obj.x - figure.x) ** 2) &lt;= 3:
            obj.rechar(obj.bchar)
        else:
            obj.rechar(&#34; &#34;)</code></pre>
</details>
</dd>
<dt id="pokete.ExtraActions.water"><code class="name flex">
<span>def <span class="ident">water</span></span>(<span>obs)</span>
</code></dt>
<dd>
<div class="desc"><p>Water animation</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def water(obs):
    &#34;&#34;&#34;Water animation&#34;&#34;&#34;
    if settings.animations:
        for obj in obs:
            if random.randint(0, 9) == 0:
                if &#34; &#34; not in obj.char:
                    obj.rechar([i for i in
                                [Color.lightblue + &#34;~&#34; + Color.reset,
                                 Color.blue + &#34;~&#34; + Color.reset]
                                if i != obj.char][0])
                    if obj.x == figure.x and obj.y == figure.y:
                        figure.redraw()</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="pokete.Figure"><code class="flex name class">
<span>class <span class="ident">Figure</span></span>
<span>(</span><span>char, state='solid', arg_proto={})</span>
</code></dt>
<dd>
<div class="desc"><p>The figure that moves around on the map and represents the player</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Figure(se.Object):
    &#34;&#34;&#34;The figure that moves around on the map and represents the player&#34;&#34;&#34;

    def __init__(self, char, state=&#34;solid&#34;, arg_proto={}):
        super().__init__(char, state=&#34;solid&#34;, arg_proto={})
        self.__money = 10
        self.inv = {&#34;poketeballs&#34;: 10}
        self.name = &#34;&#34;
        self.pokes = []
        self.oldmap = ob_maps[&#34;playmap_1&#34;]
        self.direction = &#34;t&#34;

    def set_args(self, si):
        &#34;&#34;&#34;Processes data from save file&#34;&#34;&#34;
        self.name = si[&#34;user&#34;]
        self.pokes = [Poke((si[&#34;pokes&#34;][poke][&#34;name&#34;]
                            if type(poke) is int else poke),
                           si[&#34;pokes&#34;][poke][&#34;xp&#34;], si[&#34;pokes&#34;][poke][&#34;hp&#34;],
                           shiny=(False
                                  if &#34;shiny&#34; not in si[&#34;pokes&#34;][poke]
                                  else si[&#34;pokes&#34;][poke][&#34;shiny&#34;]),
                           _attacks=(si[&#34;pokes&#34;][poke][&#34;attacks&#34;]
                                     if &#34;attacks&#34; in si[&#34;pokes&#34;][poke]
                                     else None)
                           )
                      for poke in si[&#34;pokes&#34;]]
        for j, poke in enumerate(self.pokes):
            poke.set_ap(si[&#34;pokes&#34;][j][&#34;ap&#34;])
            if &#34;effects&#34; in si[&#34;pokes&#34;][j]:
                for e in si[&#34;pokes&#34;][j][&#34;effects&#34;]:
                    poke.effects.append(getattr(effects, e)(poke))
        try:
            # Looking if figure would be in centermap, so the player may spawn out of the center
            if si[&#34;map&#34;] in [&#34;centermap&#34;,
                             &#34;shopmap&#34;]:
                _map = ob_maps[si[&#34;map&#34;]]
                self.add(_map, _map.dor_back1.x, _map.dor_back1.y - 1)
            else:
                if self.add(ob_maps[si[&#34;map&#34;]], si[&#34;x&#34;], si[&#34;y&#34;]) == 1:
                    raise se.CoordinateError(self, ob_maps[si[&#34;map&#34;]], si[&#34;x&#34;], si[&#34;y&#34;])
        except se.CoordinateError:
            self.add(ob_maps[&#34;playmap_1&#34;], 6, 5)
        # Those if statemnets are important to ensure compatibility with older versions
        if &#34;oldmap&#34; in si:
            self.oldmap = ob_maps[si[&#34;oldmap&#34;]]
        if &#34;inv&#34; in si:
            self.inv = si[&#34;inv&#34;]
        if &#34;money&#34; in si:
            self.set_money(si[&#34;money&#34;])
        movemap.name_label = se.Text(self.name, esccode=Color.thicc)
        movemap.balls_label = se.Text(&#34;&#34;, esccode=Color.thicc)
        movemap.code_label.rechar(self.map.pretty_name)
        balls_label_rechar()
        movemap_add_obs()

    def add_money(self, money):
        &#34;&#34;&#34;Adds money&#34;&#34;&#34;
        self.set_money(self.__money + money)

    def get_money(self):
        &#34;&#34;&#34;Returns the current money&#34;&#34;&#34;
        return self.__money

    def set_money(self, money):
        &#34;&#34;&#34;Sets the money to a certain value&#34;&#34;&#34;
        assert money &gt;= 0, &#34;money has to be positive&#34;
        self.__money = money
        for cls in [inv, buy]:
            cls.money_label.rechar(str(self.__money) + &#34;$&#34;)
            cls.box.set_ob(cls.money_label,
                           cls.box.width - 2 - len(cls.money_label.text), 0)

    def add_poke(self, poke, idx=None):
        &#34;&#34;&#34;Adds a Pokete to the players Poketes&#34;&#34;&#34;
        poke.set_player(True)
        caught_poketes.append(poke.identifier)
        if idx is None:
            self.pokes.append(poke)
        else:
            self.pokes[idx] = poke

    def give_item(self, item, amount=1):
        &#34;&#34;&#34;Gives an item to the player&#34;&#34;&#34;
        assert amount &gt; 0, &#34;Amounts have to be positive&#34;
        if item not in self.inv:
            self.inv[item] = amount
        else:
            self.inv[item] += amount

    def has_item(self, item):
        &#34;&#34;&#34;Checks if an item is already present&#34;&#34;&#34;
        if item not in self.inv:
            return False
        elif self.inv[item] &gt; 0:
            return True
        else:
            return False

    def remove_item(self, item, amount=1):
        &#34;&#34;&#34;Removes a certain amount of an item from the inv&#34;&#34;&#34;
        assert amount &gt; 0, &#34;Amounts have to be positive&#34;
        assert item in self.inv, f&#34;Item {item} is not in the inventory&#34;
        assert self.inv[item] - amount &gt;= 0, f&#34;There are not enought {item}s in the inventory&#34;
        self.inv[item] -= amount</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>scrap_engine.Object</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="pokete.Figure.add_money"><code class="name flex">
<span>def <span class="ident">add_money</span></span>(<span>self, money)</span>
</code></dt>
<dd>
<div class="desc"><p>Adds money</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_money(self, money):
    &#34;&#34;&#34;Adds money&#34;&#34;&#34;
    self.set_money(self.__money + money)</code></pre>
</details>
</dd>
<dt id="pokete.Figure.add_poke"><code class="name flex">
<span>def <span class="ident">add_poke</span></span>(<span>self, poke, idx=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Adds a Pokete to the players Poketes</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_poke(self, poke, idx=None):
    &#34;&#34;&#34;Adds a Pokete to the players Poketes&#34;&#34;&#34;
    poke.set_player(True)
    caught_poketes.append(poke.identifier)
    if idx is None:
        self.pokes.append(poke)
    else:
        self.pokes[idx] = poke</code></pre>
</details>
</dd>
<dt id="pokete.Figure.get_money"><code class="name flex">
<span>def <span class="ident">get_money</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the current money</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_money(self):
    &#34;&#34;&#34;Returns the current money&#34;&#34;&#34;
    return self.__money</code></pre>
</details>
</dd>
<dt id="pokete.Figure.give_item"><code class="name flex">
<span>def <span class="ident">give_item</span></span>(<span>self, item, amount=1)</span>
</code></dt>
<dd>
<div class="desc"><p>Gives an item to the player</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def give_item(self, item, amount=1):
    &#34;&#34;&#34;Gives an item to the player&#34;&#34;&#34;
    assert amount &gt; 0, &#34;Amounts have to be positive&#34;
    if item not in self.inv:
        self.inv[item] = amount
    else:
        self.inv[item] += amount</code></pre>
</details>
</dd>
<dt id="pokete.Figure.has_item"><code class="name flex">
<span>def <span class="ident">has_item</span></span>(<span>self, item)</span>
</code></dt>
<dd>
<div class="desc"><p>Checks if an item is already present</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def has_item(self, item):
    &#34;&#34;&#34;Checks if an item is already present&#34;&#34;&#34;
    if item not in self.inv:
        return False
    elif self.inv[item] &gt; 0:
        return True
    else:
        return False</code></pre>
</details>
</dd>
<dt id="pokete.Figure.remove_item"><code class="name flex">
<span>def <span class="ident">remove_item</span></span>(<span>self, item, amount=1)</span>
</code></dt>
<dd>
<div class="desc"><p>Removes a certain amount of an item from the inv</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def remove_item(self, item, amount=1):
    &#34;&#34;&#34;Removes a certain amount of an item from the inv&#34;&#34;&#34;
    assert amount &gt; 0, &#34;Amounts have to be positive&#34;
    assert item in self.inv, f&#34;Item {item} is not in the inventory&#34;
    assert self.inv[item] - amount &gt;= 0, f&#34;There are not enought {item}s in the inventory&#34;
    self.inv[item] -= amount</code></pre>
</details>
</dd>
<dt id="pokete.Figure.set_args"><code class="name flex">
<span>def <span class="ident">set_args</span></span>(<span>self, si)</span>
</code></dt>
<dd>
<div class="desc"><p>Processes data from save file</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_args(self, si):
    &#34;&#34;&#34;Processes data from save file&#34;&#34;&#34;
    self.name = si[&#34;user&#34;]
    self.pokes = [Poke((si[&#34;pokes&#34;][poke][&#34;name&#34;]
                        if type(poke) is int else poke),
                       si[&#34;pokes&#34;][poke][&#34;xp&#34;], si[&#34;pokes&#34;][poke][&#34;hp&#34;],
                       shiny=(False
                              if &#34;shiny&#34; not in si[&#34;pokes&#34;][poke]
                              else si[&#34;pokes&#34;][poke][&#34;shiny&#34;]),
                       _attacks=(si[&#34;pokes&#34;][poke][&#34;attacks&#34;]
                                 if &#34;attacks&#34; in si[&#34;pokes&#34;][poke]
                                 else None)
                       )
                  for poke in si[&#34;pokes&#34;]]
    for j, poke in enumerate(self.pokes):
        poke.set_ap(si[&#34;pokes&#34;][j][&#34;ap&#34;])
        if &#34;effects&#34; in si[&#34;pokes&#34;][j]:
            for e in si[&#34;pokes&#34;][j][&#34;effects&#34;]:
                poke.effects.append(getattr(effects, e)(poke))
    try:
        # Looking if figure would be in centermap, so the player may spawn out of the center
        if si[&#34;map&#34;] in [&#34;centermap&#34;,
                         &#34;shopmap&#34;]:
            _map = ob_maps[si[&#34;map&#34;]]
            self.add(_map, _map.dor_back1.x, _map.dor_back1.y - 1)
        else:
            if self.add(ob_maps[si[&#34;map&#34;]], si[&#34;x&#34;], si[&#34;y&#34;]) == 1:
                raise se.CoordinateError(self, ob_maps[si[&#34;map&#34;]], si[&#34;x&#34;], si[&#34;y&#34;])
    except se.CoordinateError:
        self.add(ob_maps[&#34;playmap_1&#34;], 6, 5)
    # Those if statemnets are important to ensure compatibility with older versions
    if &#34;oldmap&#34; in si:
        self.oldmap = ob_maps[si[&#34;oldmap&#34;]]
    if &#34;inv&#34; in si:
        self.inv = si[&#34;inv&#34;]
    if &#34;money&#34; in si:
        self.set_money(si[&#34;money&#34;])
    movemap.name_label = se.Text(self.name, esccode=Color.thicc)
    movemap.balls_label = se.Text(&#34;&#34;, esccode=Color.thicc)
    movemap.code_label.rechar(self.map.pretty_name)
    balls_label_rechar()
    movemap_add_obs()</code></pre>
</details>
</dd>
<dt id="pokete.Figure.set_money"><code class="name flex">
<span>def <span class="ident">set_money</span></span>(<span>self, money)</span>
</code></dt>
<dd>
<div class="desc"><p>Sets the money to a certain value</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_money(self, money):
    &#34;&#34;&#34;Sets the money to a certain value&#34;&#34;&#34;
    assert money &gt;= 0, &#34;money has to be positive&#34;
    self.__money = money
    for cls in [inv, buy]:
        cls.money_label.rechar(str(self.__money) + &#34;$&#34;)
        cls.box.set_ob(cls.money_label,
                       cls.box.width - 2 - len(cls.money_label.text), 0)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="pokete.Help"><code class="flex name class">
<span>class <span class="ident">Help</span></span>
<span>(</span><span>_map)</span>
</code></dt>
<dd>
<div class="desc"><p>Helptext that can be displayed by pressing '?'</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Help(About):
    &#34;&#34;&#34;Helptext that can be displayed by pressing &#39;?&#39;&#34;&#34;&#34;

    def __init__(self, _map):
        self.map = _map
        self.help_text = &#34;&#34;&#34;
Controls:
&#39;w&#39;:up, &#39;a&#39;:left,
&#39;s&#39;:down, &#39;d&#39;:right,
&#39;e&#39;:menu

When walking into the high grass (&#39;;&#39;) you may get attacked
by wild Poketes, those can be killed or weakened and caught.
NPCs will talk to you when walking up to them.
For more information about how to play this game, check out
https://git.io/JRRqe
&#34;&#34;&#34;
        self.box = InfoBox(self.help_text, self.map)
        self.box.name_label.rechar(&#34;Help&#34;)
        self.box.info_label.rechar(&#34;q:close&#34;)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="pokete.About" href="#pokete.About">About</a></li>
</ul>
</dd>
<dt id="pokete.HightGrass"><code class="flex name class">
<span>class <span class="ident">HightGrass</span></span>
<span>(</span><span>char, state='solid', arg_proto=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Object on the map, that triggers a fight</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class HightGrass(se.Object):
    &#34;&#34;&#34;Object on the map, that triggers a fight&#34;&#34;&#34;

    def action(self, ob):
        &#34;&#34;&#34;Action triggers the fight&#34;&#34;&#34;
        if random.randint(0, 8) == 0:
            fight(Poke(&#34;__fallback__&#34;, 0)
                  if len([poke for poke in figure.pokes[:6]
                          if poke.hp &gt; 0]) == 0
                  else [poke for poke in figure.pokes[:6] if poke.hp &gt; 0][0],
                  Poke(random.choices(self.arg_proto[&#34;pokes&#34;],
                                      weights=[p_data.pokes[i][&#34;rarity&#34;]
                                               for i in self.arg_proto[&#34;pokes&#34;]])[0],
                       random.choices(list(range(self.arg_proto[&#34;minlvl&#34;],
                                                 self.arg_proto[&#34;maxlvl&#34;])))[0],
                       player=False, shiny=(random.randint(0, 500) == 0)))</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>scrap_engine.Object</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="pokete.HightGrass.action"><code class="name flex">
<span>def <span class="ident">action</span></span>(<span>self, ob)</span>
</code></dt>
<dd>
<div class="desc"><p>Action triggers the fight</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def action(self, ob):
    &#34;&#34;&#34;Action triggers the fight&#34;&#34;&#34;
    if random.randint(0, 8) == 0:
        fight(Poke(&#34;__fallback__&#34;, 0)
              if len([poke for poke in figure.pokes[:6]
                      if poke.hp &gt; 0]) == 0
              else [poke for poke in figure.pokes[:6] if poke.hp &gt; 0][0],
              Poke(random.choices(self.arg_proto[&#34;pokes&#34;],
                                  weights=[p_data.pokes[i][&#34;rarity&#34;]
                                           for i in self.arg_proto[&#34;pokes&#34;]])[0],
                   random.choices(list(range(self.arg_proto[&#34;minlvl&#34;],
                                             self.arg_proto[&#34;maxlvl&#34;])))[0],
                   player=False, shiny=(random.randint(0, 500) == 0)))</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="pokete.Inv"><code class="flex name class">
<span>class <span class="ident">Inv</span></span>
</code></dt>
<dd>
<div class="desc"><p>Inventory to see and manage items in</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Inv:
    &#34;&#34;&#34;Inventory to see and manage items in&#34;&#34;&#34;

    def __init__(self):
        self.box = ChooseBox(height - 3, 35, &#34;Inventory&#34;, &#34;R:remove&#34;)
        self.box2 = Box(7, 21)
        self.money_label = se.Text(str(figure.get_money()) + &#34;$&#34;)
        self.desc_label = se.Text(&#34; &#34;)
        # adding
        self.box.add_ob(self.money_label, self.box.width - 2 - len(self.money_label.text), 0)
        self.box2.add_ob(self.desc_label, 1, 1)

    def __call__(self):
        &#34;&#34;&#34;Opens the inventory&#34;&#34;&#34;
        global ev
        ev = &#34;&#34;
        items = self.add()
        with self.box.add(movemap, movemap.width - 35, 0):
            while True:
                if ev in [&#34;&#39;s&#39;&#34;, &#34;&#39;w&#39;&#34;]:
                    self.box.input(ev)
                    ev = &#34;&#34;
                elif ev in [&#34;&#39;4&#39;&#34;, &#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                    break
                elif ev == &#34;Key.enter&#34;:
                    obj = items[self.box.index.index]
                    self.box2.name_label.rechar(obj.pretty_name)
                    self.desc_label.rechar(liner(obj.desc, 19))
                    self.box2.add(movemap, self.box.x - 19, 3)
                    ev = &#34;&#34;
                    while True:
                        if ev == &#34;exit&#34;:
                            raise KeyboardInterrupt
                        elif ev in [&#34;Key.enter&#34;, &#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                            ev = &#34;&#34;
                            self.box2.remove()
                            if type(obj) is LearnDisc:
                                if ask_bool(movemap, f&#34;Do you want to teach &#39;{obj.attack_dict[&#39;name&#39;]}&#39;?&#34;):
                                    ex_cond = True
                                    while ex_cond:
                                        index = deck(figure.pokes[:6],
                                                     label=&#34;Your deck&#34;,
                                                     in_fight=True)
                                        if index is None:
                                            ex_cond = False
                                            movemap.show(init=True)
                                            break
                                        poke = figure.pokes[index]
                                        if getattr(types, obj.attack_dict[&#39;type&#39;]) in poke.types:
                                            break
                                        else:
                                            ex_cond = ask_bool(movemap,
                                                               f&#34;You cant&#39;t teach &#39;{obj.attack_dict[&#39;name&#39;]}&#39; to &#39;{poke.name}&#39;! \nDo you want to continue?&#34;)
                                    if not ex_cond:
                                        break
                                    if LearnAttack(poke, movemap)(obj.attack_name):
                                        items = self.rem_item(obj.name, items)
                                        if len(items) == 0:
                                            break
                                    ev = &#34;&#34;
                            break
                        time.sleep(0.05)
                        movemap.show()
                elif ev == &#34;&#39;r&#39;&#34;:
                    if ask_bool(movemap,
                                f&#34;Do you really want to throw {items[self.box.index.index].pretty_name} away?&#34;):
                        items = self.rem_item(items[self.box.index.index].name, items)
                        if len(items) == 0:
                            break
                    ev = &#34;&#34;
                std_loop()
                time.sleep(0.05)
                movemap.show()
        self.box.remove_c_obs()

    def rem_item(self, name, items):
        &#34;&#34;&#34;Removes an item to the inv&#34;&#34;&#34;
        figure.remove_item(name)
        for obj in self.box.c_obs:
            obj.remove()
        self.box.remove_c_obs()
        items = self.add()
        if not items:
            return items
        if self.box.index.index &gt;= len(items):
            self.box.set_index(len(items) - 1)
        return items

    def add(self):
        &#34;&#34;&#34;Adds all items to the box&#34;&#34;&#34;
        items = [getattr(self, i) for i in figure.inv if figure.inv[i] &gt; 0]
        self.box.add_c_obs([se.Text(f&#34;{i.pretty_name}s : {figure.inv[i.name]}&#34;) for i in items])
        return items</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="pokete.Inv.add"><code class="name flex">
<span>def <span class="ident">add</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Adds all items to the box</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add(self):
    &#34;&#34;&#34;Adds all items to the box&#34;&#34;&#34;
    items = [getattr(self, i) for i in figure.inv if figure.inv[i] &gt; 0]
    self.box.add_c_obs([se.Text(f&#34;{i.pretty_name}s : {figure.inv[i.name]}&#34;) for i in items])
    return items</code></pre>
</details>
</dd>
<dt id="pokete.Inv.rem_item"><code class="name flex">
<span>def <span class="ident">rem_item</span></span>(<span>self, name, items)</span>
</code></dt>
<dd>
<div class="desc"><p>Removes an item to the inv</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def rem_item(self, name, items):
    &#34;&#34;&#34;Removes an item to the inv&#34;&#34;&#34;
    figure.remove_item(name)
    for obj in self.box.c_obs:
        obj.remove()
    self.box.remove_c_obs()
    items = self.add()
    if not items:
        return items
    if self.box.index.index &gt;= len(items):
        self.box.set_index(len(items) - 1)
    return items</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="pokete.LearnAttack"><code class="flex name class">
<span>class <span class="ident">LearnAttack</span></span>
<span>(</span><span>poke)</span>
</code></dt>
<dd>
<div class="desc"><p>Lets a Pokete learn a new attack</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class LearnAttack:
    &#34;&#34;&#34;Lets a Pokete learn a new attack&#34;&#34;&#34;

    def __init__(self, poke, _map=None):
        if _map is None:
            self.map = fightmap
        else:
            self.map = _map
        self.poke = poke
        self.box = ChooseBox(6, 25, name=&#34;Attacks&#34;, info=&#34;1: Details&#34;)

    def __call__(self, attack=None):
        &#34;&#34;&#34;Starts the learning process&#34;&#34;&#34;
        global ev
        attacks = p_data.attacks
        if attack is None:
            pool = [i for i in attacks
                    if attacks[i][&#34;type&#34;] in
                    [i.name for i in self.poke.types]
                    and attacks[i][&#34;is_generic&#34;]]
            full_pool = [i for i in self.poke.inf[&#34;attacks&#34;] +
                         self.poke.inf[&#34;pool&#34;] + pool
                         if i not in self.poke.attacks
                         and attacks[i][&#34;min_lvl&#34;] &lt;= self.poke.lvl()]
            if len(full_pool) == 0:
                return False
            new_attack = random.choice(full_pool)
        else:
            new_attack = attack
        if ask_bool(self.map, f&#34;{self.poke.name} wants to learn {attacks[new_attack][&#39;name&#39;]}!&#34;):
            if len(self.poke.attac_obs) != len(self.poke.attacks):
                self.poke.attacks[-1] = new_attack
            elif len(self.poke.attacks) &lt; 4:
                self.poke.attacks.append(new_attack)
            else:
                self.box.add_c_obs([se.Text(f&#34;{i + 1}: {j.name}&#34;, state=float)
                                    for i, j in enumerate(self.poke.attac_obs)])
                with self.box.center_add(self.map):
                    while True:
                        if ev in [&#34;&#39;s&#39;&#34;, &#34;&#39;w&#39;&#34;]:
                            self.box.input(ev)
                            self.map.show()
                            ev = &#34;&#34;
                        elif ev == &#34;Key.enter&#34;:
                            self.poke.attacks[self.box.index.index] = new_attack
                            with InfoBox(f&#34;{self.poke.name} learned {attacks[new_attack][&#39;name&#39;]}!&#34;, self.map):
                                time.sleep(3)
                            ev = &#34;&#34;
                            break
                        elif ev == &#34;&#39;1&#39;&#34;:
                            ev = &#34;&#34;
                            detail(self.poke, False)
                            self.map.show(init=True)
                        elif ev in [&#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                            ev = &#34;&#34;
                            break
                        std_loop()
                        time.sleep(0.05)
                self.box.remove_c_obs()
            self.poke.set_vars()
            return True
        else:
            return False</code></pre>
</details>
</dd>
<dt id="pokete.Menu"><code class="flex name class">
<span>class <span class="ident">Menu</span></span>
</code></dt>
<dd>
<div class="desc"><p>Menu to manage settings and other stuff in</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Menu:
    &#34;&#34;&#34;Menu to manage settings and other stuff in&#34;&#34;&#34;

    def __init__(self):
        self.box = ChooseBox(height - 3, 35, &#34;Menu&#34;)
        self.playername_label = se.Text(&#34;Playername: &#34;, state=&#34;float&#34;)
        self.about_label = se.Text(&#34;About&#34;, state=&#34;float&#34;)
        self.save_label = se.Text(&#34;Save&#34;, state=&#34;float&#34;)
        self.exit_label = se.Text(&#34;Exit&#34;, state=&#34;float&#34;)
        self.realname_label = se.Text(session_info[&#34;user&#34;], state=&#34;float&#34;)
        self.box.add_c_obs([self.playername_label,
                            Setting(&#34;Autosave&#34;, &#34;autosave&#34;,
                                    {True: &#34;On&#34;, False: &#34;Off&#34;}),
                            Setting(&#34;Animations&#34;, &#34;animations&#34;,
                                    {True: &#34;On&#34;, False: &#34;Off&#34;}),
                            Setting(&#34;Save trainers&#34;, &#34;save_trainers&#34;,
                                    {True: &#34;On&#34;, False: &#34;Off&#34;}),
                            self.about_label, self.save_label,
                            self.exit_label])
        # adding
        self.box.add_ob(self.realname_label,
                        self.playername_label.rx + len(self.playername_label.text),
                        self.playername_label.ry)

    def __call__(self):
        &#34;&#34;&#34;Opens the menu&#34;&#34;&#34;
        global ev
        ev = &#34;&#34;
        self.realname_label.rechar(figure.name)
        with self.box.add(movemap, movemap.width - self.box.width, 0):
            while True:
                if ev == &#34;Key.enter&#34;:
                    # Fuck python for not having case statements
                    if ((i := self.box.c_obs[self.box.index.index]) ==
                            self.playername_label):
                        figure.name = text_input(self.realname_label, movemap,
                                                 figure.name, 18, 17)
                        movemap.underline.remove()
                        movemap.balls_label.set(0, 1)
                        movemap.name_label.rechar(figure.name,
                                                  esccode=Color.thicc)
                        movemap.balls_label.set(4 + len(movemap.name_label.text),
                                                movemap.height - 2)
                        movemap.underline.add(movemap, 0, movemap.height - 2)
                    elif i == self.save_label:  # When will python3.10 come out?
                        with InfoBox(&#34;Saving....&#34;, movemap):  # Shows a box displaying &#34;Saving....&#34; while saving
                            save()
                            time.sleep(1.5)
                    elif i == self.exit_label:
                        save()
                        exiter()
                    elif i == self.about_label:
                        about()
                    else:
                        i.change()
                    ev = &#34;&#34;
                elif ev in [&#34;&#39;s&#39;&#34;, &#34;&#39;w&#39;&#34;]:
                    self.box.input(ev)
                    ev = &#34;&#34;
                elif ev in [&#34;&#39;e&#39;&#34;, &#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                    ev = &#34;&#34;
                    break
                std_loop()
                time.sleep(0.05)
                movemap.show()</code></pre>
</details>
</dd>
<dt id="pokete.NPC"><code class="flex name class">
<span>class <span class="ident">NPC</span></span>
<span>(</span><span>name, texts, fn=None, args=())</span>
</code></dt>
<dd>
<div class="desc"><p>An NPC to talk to</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class NPC(se.Box):
    &#34;&#34;&#34;An NPC to talk to&#34;&#34;&#34;

    def __init__(self, name, texts, fn=None, args=()):
        super().__init__(0, 0)
        self.will = True
        self.name = name
        self.texts = texts
        self.__fn = fn
        self.args = args
        for i, j in zip([-1, 1, 0, 0], [0, 0, 1, -1]):
            self.add_ob(NPCTrigger(self), i, j)
        self.add_ob(se.Object(&#34;a&#34;), 0, 0)

    def action(self):
        &#34;&#34;&#34;Interaction with the NPC triggered by NPCTrigger.action&#34;&#34;&#34;
        if not self.will or (self.name in used_npcs and settings.save_trainers):
            return
        movemap.full_show()
        time.sleep(0.7)
        try:
            exclamation.add(movemap, self.x - movemap.x, self.y - 1 - movemap.y)
        except se.CoordinateError:
            pass
        movemap.show()
        time.sleep(1)
        exclamation.remove()
        movemap_text(self.x, self.y, self.texts)
        self.fn()

    def fn(self):
        &#34;&#34;&#34;The function that&#39;s executed after the interaction&#34;&#34;&#34;
        if self.__fn is not None:
            eval(self.__fn)(*self.args)

    @staticmethod
    def give(_map, npc, name, item):
        &#34;&#34;&#34;Method thats gifts an item to the player&#34;&#34;&#34;
        item = getattr(Inv, item)
        _map = ob_maps[_map]
        npc = getattr(_map, npc)
        npc.will = False
        used_npcs.append(npc.name)
        if ask_bool(movemap,
                    f&#34;{name} gifted you a &#39;{item.pretty_name}&#39;. Do you want to accept it?&#34;):
            figure.give_item(item.name)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>scrap_engine.Box</li>
<li>scrap_engine.ObjectGroup</li>
</ul>
<h3>Static methods</h3>
<dl>
<dt id="pokete.NPC.give"><code class="name flex">
<span>def <span class="ident">give</span></span>(<span>_map, npc, name, item)</span>
</code></dt>
<dd>
<div class="desc"><p>Method thats gifts an item to the player</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def give(_map, npc, name, item):
    &#34;&#34;&#34;Method thats gifts an item to the player&#34;&#34;&#34;
    item = getattr(Inv, item)
    _map = ob_maps[_map]
    npc = getattr(_map, npc)
    npc.will = False
    used_npcs.append(npc.name)
    if ask_bool(movemap,
                f&#34;{name} gifted you a &#39;{item.pretty_name}&#39;. Do you want to accept it?&#34;):
        figure.give_item(item.name)</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="pokete.NPC.action"><code class="name flex">
<span>def <span class="ident">action</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Interaction with the NPC triggered by NPCTrigger.action</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def action(self):
    &#34;&#34;&#34;Interaction with the NPC triggered by NPCTrigger.action&#34;&#34;&#34;
    if not self.will or (self.name in used_npcs and settings.save_trainers):
        return
    movemap.full_show()
    time.sleep(0.7)
    try:
        exclamation.add(movemap, self.x - movemap.x, self.y - 1 - movemap.y)
    except se.CoordinateError:
        pass
    movemap.show()
    time.sleep(1)
    exclamation.remove()
    movemap_text(self.x, self.y, self.texts)
    self.fn()</code></pre>
</details>
</dd>
<dt id="pokete.NPC.fn"><code class="name flex">
<span>def <span class="ident">fn</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>The function that's executed after the interaction</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def fn(self):
    &#34;&#34;&#34;The function that&#39;s executed after the interaction&#34;&#34;&#34;
    if self.__fn is not None:
        eval(self.__fn)(*self.args)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="pokete.NPCTrigger"><code class="flex name class">
<span>class <span class="ident">NPCTrigger</span></span>
<span>(</span><span>npc)</span>
</code></dt>
<dd>
<div class="desc"><p>Object on the map, that triggers a npc</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class NPCTrigger(se.Object):
    &#34;&#34;&#34;Object on the map, that triggers a npc&#34;&#34;&#34;

    def __init__(self, npc):
        super().__init__(&#34; &#34;, state=&#34;float&#34;)
        self.npc = npc

    def action(self, ob):
        &#34;&#34;&#34;Action triggers the NPCs action&#34;&#34;&#34;
        self.npc.action()</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>scrap_engine.Object</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="pokete.NPCTrigger.action"><code class="name flex">
<span>def <span class="ident">action</span></span>(<span>self, ob)</span>
</code></dt>
<dd>
<div class="desc"><p>Action triggers the NPCs action</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def action(self, ob):
    &#34;&#34;&#34;Action triggers the NPCs action&#34;&#34;&#34;
    self.npc.action()</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="pokete.Poke"><code class="flex name class">
<span>class <span class="ident">Poke</span></span>
<span>(</span><span>poke, xp, player=True, shiny=False)</span>
</code></dt>
<dd>
<div class="desc"><p>The Pokete class</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Poke:
    &#34;&#34;&#34;The Pokete class&#34;&#34;&#34;

    def __init__(self, poke, xp, _hp=&#34;SKIP&#34;, _attacks=None,
                 player=True, shiny=False):
        self.inf = p_data.pokes[poke]
        # Attributes
        self.enem = None
        self.oldhp = 0
        self.xp = xp
        self.identifier = poke
        self.shiny = shiny
        self.atc = 0
        self.defense = 0
        self.initiative = 0
        self.hp = self.inf[&#34;hp&#34;]
        self.name = self.inf[&#34;name&#34;]
        self.miss_chance = self.inf[&#34;miss_chance&#34;]
        self.lose_xp = self.inf[&#34;lose_xp&#34;]
        self.evolve_poke = self.inf[&#34;evolve_poke&#34;]
        self.evolve_lvl = self.inf[&#34;evolve_lvl&#34;]
        self.types = [getattr(types, i) for i in self.inf[&#34;types&#34;]]
        self.type = self.types[0]
        self.attac_obs = []
        self.atc_labels = []
        self.effects = []
        if _attacks is not None:
            assert (len(_attacks) &lt;= 4), f&#34;A Pokete {poke} can&#39;t have more than 4 attacks!&#34;
            self.attacks = [atc for atc in _attacks
                            if self.lvl() &gt;= p_data.attacks[atc][&#34;min_lvl&#34;]]
        else:
            self.attacks = self.inf[&#34;attacks&#34;][:4]
        if self.shiny:
            self.hp += 5
        self.set_player(player)
        # Backup vars
        self.full_hp = self.hp
        self.full_miss_chance = self.miss_chance
        # Labels
        self.hp_bar = HealthBar(self)
        self.hp_bar.make(self.hp)
        self.desc = se.Text(liner(self.inf[&#34;desc&#34;], se.screen_width - 34))
        self.ico = se.Box(4, 11)
        for ico in self.inf[&#34;ico&#34;]:
            esccode = (str.join(&#34;&#34;, [getattr(Color, i) for i in ico[&#34;esc&#34;]])
                       if ico[&#34;esc&#34;] is not None
                       else &#34;&#34;)
            self.ico.add_ob(se.Text(ico[&#34;txt&#34;], state=&#34;float&#34;,
                                    esccode=esccode,
                                    ignore=f&#39;{esccode} {Color.reset}&#39;), 0, 0)
        self.text_hp = se.Text(f&#34;HP:{self.hp}&#34;, state=&#34;float&#34;)
        self.text_lvl = se.Text(f&#34;Lvl:{self.lvl()}&#34;, state=&#34;float&#34;)
        self.text_name = se.Text(self.name,
                                 esccode=Color.underlined + (Color.yellow
                                                             if self.shiny
                                                             else &#34;&#34;),
                                 state=&#34;float&#34;)
        self.text_xp = se.Text(
            f&#34;XP:{self.xp - (self.lvl() ** 2 - 1)}/{((self.lvl() + 1) ** 2 - 1) - (self.lvl() ** 2 - 1)}&#34;,
            state=&#34;float&#34;)
        self.text_type = se.Text(self.type.name.capitalize(),
                                 state=&#34;float&#34;, esccode=self.type.color)
        self.tril = se.Object(&#34;&lt;&#34;, state=&#34;float&#34;)
        self.trir = se.Object(&#34;&gt;&#34;, state=&#34;float&#34;)
        self.pball_small = se.Object(&#34;o&#34;)
        self.set_vars()

    def set_player(self, player):
        &#34;&#34;&#34;Sets the player attribute when the Pokete changes the owner&#34;&#34;&#34;
        self.player = player
        self.affil = &#34;you&#34; if self.player else &#34;enemy&#34;
        self.ext_name = f&#39;{self.name}({self.affil})&#39;

    def set_vars(self):
        &#34;&#34;&#34;Updates/sets some vars&#34;&#34;&#34;
        for name in [&#34;atc&#34;, &#34;defense&#34;, &#34;initiative&#34;]:
            setattr(self, name, self.lvl() + self.inf[name] + (2 if self.shiny else 0))
        i = [Attack(atc)
             for atc in self.attacks
             if self.lvl() &gt;= p_data.attacks[atc][&#34;min_lvl&#34;]]
        for old_ob, obj in zip(self.attac_obs, i):
            obj.ap = old_ob.ap
        self.attac_obs = i
        for obj in self.atc_labels:
            fightbox.rem_ob(obj)
        self.atc_labels = [se.Text(&#34;&#34;) for _ in self.attac_obs]
        self.label_rechar()

    def dict(self):
        &#34;&#34;&#34;Returns a dict with all information about the Pokete&#34;&#34;&#34;
        return {&#34;name&#34;: self.identifier, &#34;xp&#34;: self.xp, &#34;hp&#34;: self.hp,
                &#34;ap&#34;: [atc.ap for atc in self.attac_obs],
                &#34;effects&#34;: [e.c_name for e in self.effects],
                &#34;attacks&#34;: self.attacks,
                &#34;shiny&#34;: self.shiny}

    def set_ap(self, dic):
        &#34;&#34;&#34;Sets attack aps form a list&#34;&#34;&#34;
        for atc, ap in zip(self.attac_obs, dic):
            atc.ap = ap if ap != &#34;SKIP&#34; else atc.ap
        self.label_rechar()

    def label_rechar(self):
        &#34;&#34;&#34;Rechars the attack labels&#34;&#34;&#34;
        for i, atc in enumerate(self.attac_obs):
            self.atc_labels[i].rechar(f&#34;{i + 1}: &#34;)
            self.atc_labels[i] += se.Text(atc.name, esccode=atc.type.color) + se.Text(f&#34;-{atc.ap}&#34;)

    def lvl(self):
        &#34;&#34;&#34;Returns level&#34;&#34;&#34;
        return int(math.sqrt(self.xp + 1))

    def attack(self, attac, enem):
        &#34;&#34;&#34;Attack process&#34;&#34;&#34;
        if attac.ap &gt; 0:
            for e in self.effects:
                e.remove()
            for e in self.effects:
                if (i := e.effect()) == 1:
                    self.label_rechar()
                    return
                elif i == 0:
                    pass
            if any([type(i) is effects.confusion for i in self.effects]):
                self.enem = enem = self
            else:
                self.enem = enem
            enem.oldhp = enem.hp
            self.oldhp = self.hp
            effectivity = (1.3 if enem.type.name in attac.type.effective
                           else 0.5
                           if enem.type.name in attac.type.ineffective
                           else 1
                           )
            n_hp = round((self.atc * attac.factor / (enem.defense if enem.defense &gt;= 1 else 1)) *
                         random.choices([0, 0.75, 1, 1.26], weights=[attac.miss_chance + self.miss_chance, 1, 1, 1],
                                        k=1)[0] * effectivity)
            enem.hp -= max(n_hp, 0)
            enem.hp = max(enem.hp, 0)
            time.sleep(0.4)
            for i in attac.move:
                getattr(self, f&#34;move_{i}&#34;)()
            exec(attac.action)
            attac.ap -= 1
            fightmap.outp.outp(
                f&#39;{self.ext_name} used {attac.name}! {self.name + &#34; missed!&#34; if n_hp == 0 and attac.factor != 0 else &#34;&#34;}\n{&#34;That was very effective! &#34; if effectivity == 1.3 and n_hp &gt; 0 else &#34;&#34;}{&#34;That was not effective! &#34; if effectivity == 0.5 and n_hp &gt; 0 else &#34;&#34;}&#39;)
            if enem == self:
                time.sleep(1)
                fightmap.outp.outp(f&#39;{self.ext_name} hurt it self!&#39;)
            if n_hp != 0 or attac.factor == 0:
                attac.give_effect(enem)
            for obj in [enem, self] if enem != self else [enem]:
                obj.hp_bar.update(obj.oldhp)
            self.label_rechar()
            fightmap.show()

    def move_attack(self):
        &#34;&#34;&#34;Attack move&#34;&#34;&#34;
        for i, j, t in zip([3, -3], [2, -2], [0.3, 0]):
            self.ico.move(i if self.player else -i, -j if self.player else j)
            fightmap.show()
            time.sleep(t)

    def move_pound(self):
        &#34;&#34;&#34;Pound move&#34;&#34;&#34;
        for i in [-1, 1]:
            self.ico.move(0, i)
            fightmap.show()
            time.sleep(0.3)

    def move_arch(self):
        &#34;&#34;&#34;Arch move&#34;&#34;&#34;
        if self.enem == self:
            return
        line = se.Line(Color.thicc + Color.yellow + &#34;-&#34; + Color.reset,
                       self.enem.ico.x - self.ico.x + (-11 if self.player else 11),
                       self.enem.ico.y - self.ico.y, l_type=&#34;crippled&#34;)
        line.add(self.ico.map, self.ico.x + (11 if self.player else -1),
                 self.ico.y + 1)
        self.ico.map.show()
        time.sleep(1)
        line.remove()
        del line

    def move_throw(self, txt=&#34;#&#34;):
        &#34;&#34;&#34;Throw move&#34;&#34;&#34;
        if self.enem == self:
            return
        line = se.Line(&#34; &#34;, self.enem.ico.x - self.ico.x + (-11 if self.player else 11),
                       self.enem.ico.y - self.ico.y, l_type=&#34;crippled&#34;)
        line.add(self.ico.map, self.ico.x + (11 if self.player else -1),
                 self.ico.y + 1)
        self.ico.map.show()
        for i in range(len(line.obs)):
            line.obs[i].rechar(txt)
            if i != 0:
                line.obs[i - 1].rechar(line.char)
            time.sleep(0.05)
            self.ico.map.show()
        line.remove()
        del line

    def move_fireball(self):
        &#34;&#34;&#34;Fireball move&#34;&#34;&#34;
        self.move_throw(txt=Color.thicc + Color.red + &#34;*&#34; + Color.reset)

    def move_shine(self, ico=Color.thicc + Color.green + &#34;*&#34; + Color.reset):
        &#34;&#34;&#34;Shine Move&#34;&#34;&#34;
        shines = [se.Object(ico) for _ in range(4)]
        for i, x, y in zip(shines, [self.ico.x - 1, self.ico.x + 11, self.ico.x - 1,
                                    self.ico.x + 11],
                           [self.ico.y, self.ico.y, self.ico.y + 3, self.ico.y + 3]):
            i.add(self.ico.map, x, y)
            self.ico.map.show()
            time.sleep(0.2)
        time.sleep(0.2)
        for i in shines:
            i.remove()
        self.ico.map.show()

    def move_downgrade(self):
        &#34;&#34;&#34;Downgrade move&#34;&#34;&#34;
        self.enem.move_shine(ico=Color.thicc + Color.red + &#34;-&#34; + Color.reset)

    def evolve(self):
        &#34;&#34;&#34;Evolves the Pokete to its evolve_poke&#34;&#34;&#34;
        if not self.player:
            return
        new = Poke(self.evolve_poke, self.xp, _attacks=self.attacks)
        self.ico.remove()
        self.ico.add(evomap, round(evomap.width / 2 - 4),
                     round((evomap.height - 8) / 2))
        self.move_shine()
        evomap.outp.outp(&#34;Look!&#34;)
        time.sleep(0.5)
        evomap.outp.outp(f&#34;{evomap.outp.text}\n{self.name} is evolving!&#34;)
        time.sleep(1)
        for i in range(8):
            for j, k in zip([self.ico, new.ico], [new.ico, self.ico]):
                j.remove()
                k.add(evomap, round(evomap.width / 2 - 4),
                      round((evomap.height - 8) / 2))
                time.sleep(0.7 - i * 0.09999)
                evomap.show()
        self.ico.remove()
        new.ico.add(evomap, round(evomap.width / 2 - 4),
                    round((evomap.height - 8) / 2))
        evomap.show()
        time.sleep(0.01)
        new.move_shine()
        evomap.outp.outp(f&#34;{self.name} evolved to {new.name}!&#34;)
        time.sleep(5)
        figure.pokes[figure.pokes.index(self)] = new
        if new.identifier not in caught_poketes:
            caught_poketes.append(new.identifier)
        del self</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="pokete.Poke.attack"><code class="name flex">
<span>def <span class="ident">attack</span></span>(<span>self, attac, enem)</span>
</code></dt>
<dd>
<div class="desc"><p>Attack process</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def attack(self, attac, enem):
    &#34;&#34;&#34;Attack process&#34;&#34;&#34;
    if attac.ap &gt; 0:
        for e in self.effects:
            e.remove()
        for e in self.effects:
            if (i := e.effect()) == 1:
                self.label_rechar()
                return
            elif i == 0:
                pass
        if any([type(i) is effects.confusion for i in self.effects]):
            self.enem = enem = self
        else:
            self.enem = enem
        enem.oldhp = enem.hp
        self.oldhp = self.hp
        effectivity = (1.3 if enem.type.name in attac.type.effective
                       else 0.5
                       if enem.type.name in attac.type.ineffective
                       else 1
                       )
        n_hp = round((self.atc * attac.factor / (enem.defense if enem.defense &gt;= 1 else 1)) *
                     random.choices([0, 0.75, 1, 1.26], weights=[attac.miss_chance + self.miss_chance, 1, 1, 1],
                                    k=1)[0] * effectivity)
        enem.hp -= max(n_hp, 0)
        enem.hp = max(enem.hp, 0)
        time.sleep(0.4)
        for i in attac.move:
            getattr(self, f&#34;move_{i}&#34;)()
        exec(attac.action)
        attac.ap -= 1
        fightmap.outp.outp(
            f&#39;{self.ext_name} used {attac.name}! {self.name + &#34; missed!&#34; if n_hp == 0 and attac.factor != 0 else &#34;&#34;}\n{&#34;That was very effective! &#34; if effectivity == 1.3 and n_hp &gt; 0 else &#34;&#34;}{&#34;That was not effective! &#34; if effectivity == 0.5 and n_hp &gt; 0 else &#34;&#34;}&#39;)
        if enem == self:
            time.sleep(1)
            fightmap.outp.outp(f&#39;{self.ext_name} hurt it self!&#39;)
        if n_hp != 0 or attac.factor == 0:
            attac.give_effect(enem)
        for obj in [enem, self] if enem != self else [enem]:
            obj.hp_bar.update(obj.oldhp)
        self.label_rechar()
        fightmap.show()</code></pre>
</details>
</dd>
<dt id="pokete.Poke.dict"><code class="name flex">
<span>def <span class="ident">dict</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Returns a dict with all information about the Pokete</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def dict(self):
    &#34;&#34;&#34;Returns a dict with all information about the Pokete&#34;&#34;&#34;
    return {&#34;name&#34;: self.identifier, &#34;xp&#34;: self.xp, &#34;hp&#34;: self.hp,
            &#34;ap&#34;: [atc.ap for atc in self.attac_obs],
            &#34;effects&#34;: [e.c_name for e in self.effects],
            &#34;attacks&#34;: self.attacks,
            &#34;shiny&#34;: self.shiny}</code></pre>
</details>
</dd>
<dt id="pokete.Poke.evolve"><code class="name flex">
<span>def <span class="ident">evolve</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Evolves the Pokete to its evolve_poke</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def evolve(self):
    &#34;&#34;&#34;Evolves the Pokete to its evolve_poke&#34;&#34;&#34;
    if not self.player:
        return
    new = Poke(self.evolve_poke, self.xp, _attacks=self.attacks)
    self.ico.remove()
    self.ico.add(evomap, round(evomap.width / 2 - 4),
                 round((evomap.height - 8) / 2))
    self.move_shine()
    evomap.outp.outp(&#34;Look!&#34;)
    time.sleep(0.5)
    evomap.outp.outp(f&#34;{evomap.outp.text}\n{self.name} is evolving!&#34;)
    time.sleep(1)
    for i in range(8):
        for j, k in zip([self.ico, new.ico], [new.ico, self.ico]):
            j.remove()
            k.add(evomap, round(evomap.width / 2 - 4),
                  round((evomap.height - 8) / 2))
            time.sleep(0.7 - i * 0.09999)
            evomap.show()
    self.ico.remove()
    new.ico.add(evomap, round(evomap.width / 2 - 4),
                round((evomap.height - 8) / 2))
    evomap.show()
    time.sleep(0.01)
    new.move_shine()
    evomap.outp.outp(f&#34;{self.name} evolved to {new.name}!&#34;)
    time.sleep(5)
    figure.pokes[figure.pokes.index(self)] = new
    if new.identifier not in caught_poketes:
        caught_poketes.append(new.identifier)
    del self</code></pre>
</details>
</dd>
<dt id="pokete.Poke.label_rechar"><code class="name flex">
<span>def <span class="ident">label_rechar</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Rechars the attack labels</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def label_rechar(self):
    &#34;&#34;&#34;Rechars the attack labels&#34;&#34;&#34;
    for i, atc in enumerate(self.attac_obs):
        self.atc_labels[i].rechar(f&#34;{i + 1}: &#34;)
        self.atc_labels[i] += se.Text(atc.name, esccode=atc.type.color) + se.Text(f&#34;-{atc.ap}&#34;)</code></pre>
</details>
</dd>
<dt id="pokete.Poke.lvl"><code class="name flex">
<span>def <span class="ident">lvl</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Returns level</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def lvl(self):
    &#34;&#34;&#34;Returns level&#34;&#34;&#34;
    return int(math.sqrt(self.xp + 1))</code></pre>
</details>
</dd>
<dt id="pokete.Poke.move_arch"><code class="name flex">
<span>def <span class="ident">move_arch</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Arch move</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def move_arch(self):
    &#34;&#34;&#34;Arch move&#34;&#34;&#34;
    if self.enem == self:
        return
    line = se.Line(Color.thicc + Color.yellow + &#34;-&#34; + Color.reset,
                   self.enem.ico.x - self.ico.x + (-11 if self.player else 11),
                   self.enem.ico.y - self.ico.y, l_type=&#34;crippled&#34;)
    line.add(self.ico.map, self.ico.x + (11 if self.player else -1),
             self.ico.y + 1)
    self.ico.map.show()
    time.sleep(1)
    line.remove()
    del line</code></pre>
</details>
</dd>
<dt id="pokete.Poke.move_attack"><code class="name flex">
<span>def <span class="ident">move_attack</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Attack move</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def move_attack(self):
    &#34;&#34;&#34;Attack move&#34;&#34;&#34;
    for i, j, t in zip([3, -3], [2, -2], [0.3, 0]):
        self.ico.move(i if self.player else -i, -j if self.player else j)
        fightmap.show()
        time.sleep(t)</code></pre>
</details>
</dd>
<dt id="pokete.Poke.move_downgrade"><code class="name flex">
<span>def <span class="ident">move_downgrade</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Downgrade move</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def move_downgrade(self):
    &#34;&#34;&#34;Downgrade move&#34;&#34;&#34;
    self.enem.move_shine(ico=Color.thicc + Color.red + &#34;-&#34; + Color.reset)</code></pre>
</details>
</dd>
<dt id="pokete.Poke.move_fireball"><code class="name flex">
<span>def <span class="ident">move_fireball</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Fireball move</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def move_fireball(self):
    &#34;&#34;&#34;Fireball move&#34;&#34;&#34;
    self.move_throw(txt=Color.thicc + Color.red + &#34;*&#34; + Color.reset)</code></pre>
</details>
</dd>
<dt id="pokete.Poke.move_pound"><code class="name flex">
<span>def <span class="ident">move_pound</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Pound move</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def move_pound(self):
    &#34;&#34;&#34;Pound move&#34;&#34;&#34;
    for i in [-1, 1]:
        self.ico.move(0, i)
        fightmap.show()
        time.sleep(0.3)</code></pre>
</details>
</dd>
<dt id="pokete.Poke.move_shine"><code class="name flex">
<span>def <span class="ident">move_shine</span></span>(<span>self, ico='\x1b[1m\x1b[32m*\x1b[0m')</span>
</code></dt>
<dd>
<div class="desc"><p>Shine Move</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def move_shine(self, ico=Color.thicc + Color.green + &#34;*&#34; + Color.reset):
    &#34;&#34;&#34;Shine Move&#34;&#34;&#34;
    shines = [se.Object(ico) for _ in range(4)]
    for i, x, y in zip(shines, [self.ico.x - 1, self.ico.x + 11, self.ico.x - 1,
                                self.ico.x + 11],
                       [self.ico.y, self.ico.y, self.ico.y + 3, self.ico.y + 3]):
        i.add(self.ico.map, x, y)
        self.ico.map.show()
        time.sleep(0.2)
    time.sleep(0.2)
    for i in shines:
        i.remove()
    self.ico.map.show()</code></pre>
</details>
</dd>
<dt id="pokete.Poke.move_throw"><code class="name flex">
<span>def <span class="ident">move_throw</span></span>(<span>self, txt='#')</span>
</code></dt>
<dd>
<div class="desc"><p>Throw move</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def move_throw(self, txt=&#34;#&#34;):
    &#34;&#34;&#34;Throw move&#34;&#34;&#34;
    if self.enem == self:
        return
    line = se.Line(&#34; &#34;, self.enem.ico.x - self.ico.x + (-11 if self.player else 11),
                   self.enem.ico.y - self.ico.y, l_type=&#34;crippled&#34;)
    line.add(self.ico.map, self.ico.x + (11 if self.player else -1),
             self.ico.y + 1)
    self.ico.map.show()
    for i in range(len(line.obs)):
        line.obs[i].rechar(txt)
        if i != 0:
            line.obs[i - 1].rechar(line.char)
        time.sleep(0.05)
        self.ico.map.show()
    line.remove()
    del line</code></pre>
</details>
</dd>
<dt id="pokete.Poke.set_ap"><code class="name flex">
<span>def <span class="ident">set_ap</span></span>(<span>self, dic)</span>
</code></dt>
<dd>
<div class="desc"><p>Sets attack aps form a list</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_ap(self, dic):
    &#34;&#34;&#34;Sets attack aps form a list&#34;&#34;&#34;
    for atc, ap in zip(self.attac_obs, dic):
        atc.ap = ap if ap != &#34;SKIP&#34; else atc.ap
    self.label_rechar()</code></pre>
</details>
</dd>
<dt id="pokete.Poke.set_player"><code class="name flex">
<span>def <span class="ident">set_player</span></span>(<span>self, player)</span>
</code></dt>
<dd>
<div class="desc"><p>Sets the player attribute when the Pokete changes the owner</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_player(self, player):
    &#34;&#34;&#34;Sets the player attribute when the Pokete changes the owner&#34;&#34;&#34;
    self.player = player
    self.affil = &#34;you&#34; if self.player else &#34;enemy&#34;
    self.ext_name = f&#39;{self.name}({self.affil})&#39;</code></pre>
</details>
</dd>
<dt id="pokete.Poke.set_vars"><code class="name flex">
<span>def <span class="ident">set_vars</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Updates/sets some vars</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_vars(self):
    &#34;&#34;&#34;Updates/sets some vars&#34;&#34;&#34;
    for name in [&#34;atc&#34;, &#34;defense&#34;, &#34;initiative&#34;]:
        setattr(self, name, self.lvl() + self.inf[name] + (2 if self.shiny else 0))
    i = [Attack(atc)
         for atc in self.attacks
         if self.lvl() &gt;= p_data.attacks[atc][&#34;min_lvl&#34;]]
    for old_ob, obj in zip(self.attac_obs, i):
        obj.ap = old_ob.ap
    self.attac_obs = i
    for obj in self.atc_labels:
        fightbox.rem_ob(obj)
    self.atc_labels = [se.Text(&#34;&#34;) for _ in self.attac_obs]
    self.label_rechar()</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="pokete.Poketeball"><code class="flex name class">
<span>class <span class="ident">Poketeball</span></span>
<span>(</span><span>name)</span>
</code></dt>
<dd>
<div class="desc"><p>Poketeball that can be picked up on the map</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Poketeball(se.Object):
    &#34;&#34;&#34;Poketeball that can be picked up on the map&#34;&#34;&#34;

    def __init__(self, name):
        self.name = name
        super().__init__(Color.thicc + Color.red + &#34;o&#34; + Color.reset, state=&#34;float&#34;)

    def action(self, ob):
        &#34;&#34;&#34;Action triggers the pick up&#34;&#34;&#34;
        figure.give_item(&#34;poketeball&#34;)
        used_npcs.append(self.name)
        self.remove()</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>scrap_engine.Object</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="pokete.Poketeball.action"><code class="name flex">
<span>def <span class="ident">action</span></span>(<span>self, ob)</span>
</code></dt>
<dd>
<div class="desc"><p>Action triggers the pick up</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def action(self, ob):
    &#34;&#34;&#34;Action triggers the pick up&#34;&#34;&#34;
    figure.give_item(&#34;poketeball&#34;)
    used_npcs.append(self.name)
    self.remove()</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="pokete.RoadMap"><code class="flex name class">
<span>class <span class="ident">RoadMap</span></span>
<span>(</span><span>stations)</span>
</code></dt>
<dd>
<div class="desc"><p>Map you can see and navigate maps on</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class RoadMap:
    &#34;&#34;&#34;Map you can see and navigate maps on&#34;&#34;&#34;

    def __init__(self, stations):
        self.box = Box(11, 40, &#34;Roadmap&#34;)
        self.info_label = se.Text(&#34;&#34;)
        self.box.add_ob(self.info_label, 1, 1)
        for s in stations:
            obj = Station(ob_maps[s], **stations[s][&#39;gen&#39;])
            self.box.add_ob(obj, **stations[s][&#39;add&#39;])
            setattr(self, s, obj)

    def __call__(self, choose=False):
        &#34;&#34;&#34;Shows the roadmap&#34;&#34;&#34;
        global ev
        ev = &#34;&#34;
        for i in Station.obs:
            i.set_color(choose)
        [i for i in Station.obs
         if (figure.map
             if figure.map not in [shopmap, centermap]
             else figure.oldmap)
         in i.associates][0].choose()
        with self.box.add(movemap, movemap.width - self.box.width, 0):
            while True:
                if ev in [&#34;&#39;w&#39;&#34;, &#34;&#39;a&#39;&#34;, &#34;&#39;s&#39;&#34;, &#34;&#39;d&#39;&#34;]:
                    Station.choosen.next(ev)
                    ev = &#34;&#34;
                elif ev in [&#34;&#39;3&#39;&#34;, &#34;Key.esc&#34;, &#34;&#39;q&#39;&#34;]:
                    ev = &#34;&#34;
                    break
                elif (ev == &#34;Key.enter&#34; and choose
                      and Station.choosen.has_been_visited()
                      and Station.choosen.is_city()):
                    return Station.choosen.associates[0]
                std_loop()
                time.sleep(0.05)
                movemap.show()
        Station.choosen.unchoose()</code></pre>
</details>
</dd>
<dt id="pokete.Setting"><code class="flex name class">
<span>class <span class="ident">Setting</span></span>
<span>(</span><span>text, setting, options={})</span>
</code></dt>
<dd>
<div class="desc"><p>The setting label for the menu</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Setting(se.Box):
    &#34;&#34;&#34;The setting label for the menu&#34;&#34;&#34;

    def __init__(self, text, setting, options={}):
        super().__init__(0, 0)
        self.options = options
        self.setting = setting
        self.index = [j for j in self.options].index(getattr(settings, self.setting))
        self.text = se.Text(text + &#34;: &#34;, state=&#34;float&#34;)
        self.option_text = se.Text(self.options[getattr(settings, self.setting)],
                                   state=&#34;float&#34;)
        self.add_ob(self.text, 0, 0)
        self.add_ob(self.option_text, len(self.text.text), 0)

    def change(self):
        &#34;&#34;&#34;Change the setting&#34;&#34;&#34;
        self.index = self.index + 1 if self.index &lt; len(self.options) - 1 else 0
        setattr(settings, self.setting, [i for i in self.options][self.index])
        self.option_text.rechar(self.options[getattr(settings, self.setting)])</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>scrap_engine.Box</li>
<li>scrap_engine.ObjectGroup</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="pokete.Setting.change"><code class="name flex">
<span>def <span class="ident">change</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Change the setting</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def change(self):
    &#34;&#34;&#34;Change the setting&#34;&#34;&#34;
    self.index = self.index + 1 if self.index &lt; len(self.options) - 1 else 0
    setattr(settings, self.setting, [i for i in self.options][self.index])
    self.option_text.rechar(self.options[getattr(settings, self.setting)])</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="pokete.ShopInteract"><code class="flex name class">
<span>class <span class="ident">ShopInteract</span></span>
<span>(</span><span>char, state='solid', arg_proto=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Triggers an conversation in the shop</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ShopInteract(se.Object):
    &#34;&#34;&#34;Triggers an conversation in the shop&#34;&#34;&#34;

    def action(self, ob):
        &#34;&#34;&#34;Triggers an interaction in the shop&#34;&#34;&#34;
        global ev
        ev = &#34;&#34;
        movemap.full_show()
        movemap_text(int(movemap.width / 2), 3, [&#34; &lt; Welcome to the Pokete-Shop&#34;,
                                                 &#34; &lt; Wanna buy something?&#34;])
        buy()
        movemap.full_show(init=True)
        movemap_text(int(movemap.width / 2), 3, [&#34; &lt; Have a great day!&#34;])</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>scrap_engine.Object</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="pokete.ShopInteract.action"><code class="name flex">
<span>def <span class="ident">action</span></span>(<span>self, ob)</span>
</code></dt>
<dd>
<div class="desc"><p>Triggers an interaction in the shop</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def action(self, ob):
    &#34;&#34;&#34;Triggers an interaction in the shop&#34;&#34;&#34;
    global ev
    ev = &#34;&#34;
    movemap.full_show()
    movemap_text(int(movemap.width / 2), 3, [&#34; &lt; Welcome to the Pokete-Shop&#34;,
                                             &#34; &lt; Wanna buy something?&#34;])
    buy()
    movemap.full_show(init=True)
    movemap_text(int(movemap.width / 2), 3, [&#34; &lt; Have a great day!&#34;])</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="pokete.Station"><code class="flex name class">
<span>class <span class="ident">Station</span></span>
<span>(</span><span>associate, additionals, width, height, char='#', w_next='', a_next='', s_next='', d_next='', state='solid', arg_proto={})</span>
</code></dt>
<dd>
<div class="desc"><p>Selectable station for Roadmap</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Station(se.Square):
    &#34;&#34;&#34;Selectable station for Roadmap&#34;&#34;&#34;
    choosen = None
    obs = []

    def __init__(self, associate, additionals, width, height, char=&#34;#&#34;,
                 w_next=&#34;&#34;, a_next=&#34;&#34;, s_next=&#34;&#34;, d_next=&#34;&#34;, state=&#34;solid&#34;,
                 arg_proto={}):
        self.org_char = char
        self.associates = [associate] + [ob_maps[i] for i in additionals]
        self.color = &#34;&#34;
        super().__init__(char, width, height)
        for i in [&#34;w_next&#34;, &#34;a_next&#34;, &#34;s_next&#34;, &#34;d_next&#34;]:
            exec(f&#34;self.{i}={i}&#34;)
        Station.obs.append(self)

    def choose(self):
        &#34;&#34;&#34;Chooses and hightlights the station&#34;&#34;&#34;
        self.rechar(Color.red + Color.thicc + self.org_char + Color.reset)
        Station.choosen = self
        roadmap.info_label.rechar(self.associates[0].pretty_name if
                                  self.has_been_visited() else
                                  &#34;???&#34;)

    def unchoose(self):
        &#34;&#34;&#34;Unchooses the station&#34;&#34;&#34;
        self.rechar(self.color + self.org_char + Color.reset)

    def next(self, ev):
        &#34;&#34;&#34;Chooses the next station in a certain direction&#34;&#34;&#34;
        ev = ev.strip(&#34;&#39;&#34;)
        if (ne := getattr(self, ev + &#34;_next&#34;)) != &#34;&#34;:
            self.unchoose()
            getattr(roadmap, ne).choose()

    def has_been_visited(self):
        &#34;&#34;&#34;Returns if the stations map has been visited before&#34;&#34;&#34;
        return self.associates[0].name in visited_maps

    def is_city(self):
        &#34;&#34;&#34;Returns if the station is a city&#34;&#34;&#34;
        return &#34;pokecenter&#34; in p_data.map_data[self.associates[0].name][&#34;hard_obs&#34;]

    def set_color(self, choose=False):
        &#34;&#34;&#34;Marks a station as visited&#34;&#34;&#34;
        if self.has_been_visited() and (self.is_city() if choose else True):
            self.color = Color.yellow
        else:
            self.color = &#34;&#34;
        self.unchoose()</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>scrap_engine.Square</li>
<li>scrap_engine.ObjectGroup</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="pokete.Station.choosen"><code class="name">var <span class="ident">choosen</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="pokete.Station.obs"><code class="name">var <span class="ident">obs</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="pokete.Station.choose"><code class="name flex">
<span>def <span class="ident">choose</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Chooses and hightlights the station</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def choose(self):
    &#34;&#34;&#34;Chooses and hightlights the station&#34;&#34;&#34;
    self.rechar(Color.red + Color.thicc + self.org_char + Color.reset)
    Station.choosen = self
    roadmap.info_label.rechar(self.associates[0].pretty_name if
                              self.has_been_visited() else
                              &#34;???&#34;)</code></pre>
</details>
</dd>
<dt id="pokete.Station.has_been_visited"><code class="name flex">
<span>def <span class="ident">has_been_visited</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Returns if the stations map has been visited before</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def has_been_visited(self):
    &#34;&#34;&#34;Returns if the stations map has been visited before&#34;&#34;&#34;
    return self.associates[0].name in visited_maps</code></pre>
</details>
</dd>
<dt id="pokete.Station.is_city"><code class="name flex">
<span>def <span class="ident">is_city</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Returns if the station is a city</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def is_city(self):
    &#34;&#34;&#34;Returns if the station is a city&#34;&#34;&#34;
    return &#34;pokecenter&#34; in p_data.map_data[self.associates[0].name][&#34;hard_obs&#34;]</code></pre>
</details>
</dd>
<dt id="pokete.Station.next"><code class="name flex">
<span>def <span class="ident">next</span></span>(<span>self, ev)</span>
</code></dt>
<dd>
<div class="desc"><p>Chooses the next station in a certain direction</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def next(self, ev):
    &#34;&#34;&#34;Chooses the next station in a certain direction&#34;&#34;&#34;
    ev = ev.strip(&#34;&#39;&#34;)
    if (ne := getattr(self, ev + &#34;_next&#34;)) != &#34;&#34;:
        self.unchoose()
        getattr(roadmap, ne).choose()</code></pre>
</details>
</dd>
<dt id="pokete.Station.set_color"><code class="name flex">
<span>def <span class="ident">set_color</span></span>(<span>self, choose=False)</span>
</code></dt>
<dd>
<div class="desc"><p>Marks a station as visited</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_color(self, choose=False):
    &#34;&#34;&#34;Marks a station as visited&#34;&#34;&#34;
    if self.has_been_visited() and (self.is_city() if choose else True):
        self.color = Color.yellow
    else:
        self.color = &#34;&#34;
    self.unchoose()</code></pre>
</details>
</dd>
<dt id="pokete.Station.unchoose"><code class="name flex">
<span>def <span class="ident">unchoose</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Unchooses the station</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def unchoose(self):
    &#34;&#34;&#34;Unchooses the station&#34;&#34;&#34;
    self.rechar(self.color + self.org_char + Color.reset)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="pokete.Trainer"><code class="flex name class">
<span>class <span class="ident">Trainer</span></span>
<span>(</span><span>poke, name, gender, texts, lose_texts, no_poke_texts, win_texts, sx, sy, arg_proto={})</span>
</code></dt>
<dd>
<div class="desc"><p>Trauner class to fight against</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Trainer(se.Object):
    &#34;&#34;&#34;Trauner class to fight against&#34;&#34;&#34;

    def __init__(self, poke, name, gender, texts, lose_texts, no_poke_texts,
                 win_texts, sx, sy, arg_proto={}):
        super().__init__(&#34;a&#34;, state=&#34;solid&#34;)
        # attributes
        self.arg_proto = arg_proto
        self.name = name
        self.gender = gender
        self.poke = poke
        self.texts = texts
        self.lose_texts = lose_texts
        self.no_poke_texts = no_poke_texts
        self.win_texts = win_texts
        self.sx = sx
        self.sy = sy

    def do(self, _map):
        &#34;&#34;&#34;Interaction with the trainer&#34;&#34;&#34;
        if figure.has_item(&#34;shut_the_fuck_up_stone&#34;):
            return
        if figure.x == self.x and self.poke.hp &gt; 0 and (self.name not in used_npcs or not settings.save_trainers):
            for i in range(figure.y + 1 if figure.y &lt; self.y else self.y + 1,
                           self.y if figure.y &lt; self.y else figure.y):
                if any(j.state == &#34;solid&#34; for j in _map.obmap[i][self.x]):
                    return
            movemap.full_show()
            time.sleep(0.7)
            try:
                exclamation.add(movemap, self.x - movemap.x, self.y - 1 - movemap.y)
            except se.CoordinateError:
                pass
            movemap.show()
            time.sleep(1)
            exclamation.remove()
            while self.y != figure.y + (2 if self.y &gt; figure.y else -2):
                self.set(self.x, self.y + (-1 if self.y &gt; figure.y + 1 or self.y == figure.y - 1 else 1))
                movemap.full_show()
                time.sleep(0.3)
            if any([poke.hp &gt; 0 for poke in figure.pokes[:6]]):
                movemap_text(self.x, self.y, self.texts)
                winner = fight([poke for poke in figure.pokes[:6] if poke.hp &gt; 0][0],
                               self.poke, info={&#34;type&#34;: &#34;duel&#34;, &#34;player&#34;: self})
                movemap_text(self.x, self.y, {True: self.lose_texts,
                                              False: self.win_texts + [&#34; &lt; Here u go 20$&#34;]}[winner == self.poke])
                if winner != self.poke:
                    figure.add_money(20)
                    used_npcs.append(self.name)
            else:
                movemap_text(self.x, self.y, self.no_poke_texts)
                used_npcs.append(self.name)
            while self.y != self.sy:
                self.set(self.x, self.y + (1 if self.y &lt; self.sy else -1))
                movemap.full_show()
                time.sleep(0.3)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>scrap_engine.Object</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="pokete.Trainer.do"><code class="name flex">
<span>def <span class="ident">do</span></span>(<span>self, _map)</span>
</code></dt>
<dd>
<div class="desc"><p>Interaction with the trainer</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def do(self, _map):
    &#34;&#34;&#34;Interaction with the trainer&#34;&#34;&#34;
    if figure.has_item(&#34;shut_the_fuck_up_stone&#34;):
        return
    if figure.x == self.x and self.poke.hp &gt; 0 and (self.name not in used_npcs or not settings.save_trainers):
        for i in range(figure.y + 1 if figure.y &lt; self.y else self.y + 1,
                       self.y if figure.y &lt; self.y else figure.y):
            if any(j.state == &#34;solid&#34; for j in _map.obmap[i][self.x]):
                return
        movemap.full_show()
        time.sleep(0.7)
        try:
            exclamation.add(movemap, self.x - movemap.x, self.y - 1 - movemap.y)
        except se.CoordinateError:
            pass
        movemap.show()
        time.sleep(1)
        exclamation.remove()
        while self.y != figure.y + (2 if self.y &gt; figure.y else -2):
            self.set(self.x, self.y + (-1 if self.y &gt; figure.y + 1 or self.y == figure.y - 1 else 1))
            movemap.full_show()
            time.sleep(0.3)
        if any([poke.hp &gt; 0 for poke in figure.pokes[:6]]):
            movemap_text(self.x, self.y, self.texts)
            winner = fight([poke for poke in figure.pokes[:6] if poke.hp &gt; 0][0],
                           self.poke, info={&#34;type&#34;: &#34;duel&#34;, &#34;player&#34;: self})
            movemap_text(self.x, self.y, {True: self.lose_texts,
                                          False: self.win_texts + [&#34; &lt; Here u go 20$&#34;]}[winner == self.poke])
            if winner != self.poke:
                figure.add_money(20)
                used_npcs.append(self.name)
        else:
            movemap_text(self.x, self.y, self.no_poke_texts)
            used_npcs.append(self.name)
        while self.y != self.sy:
            self.set(self.x, self.y + (1 if self.y &lt; self.sy else -1))
            movemap.full_show()
            time.sleep(0.3)</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="two-column">
<li><code><a title="pokete.ask_bool" href="#pokete.ask_bool">ask_bool</a></code></li>
<li><code><a title="pokete.ask_text" href="#pokete.ask_text">ask_text</a></code></li>
<li><code><a title="pokete.autosave" href="#pokete.autosave">autosave</a></code></li>
<li><code><a title="pokete.balls_label_rechar" href="#pokete.balls_label_rechar">balls_label_rechar</a></code></li>
<li><code><a title="pokete.check_version" href="#pokete.check_version">check_version</a></code></li>
<li><code><a title="pokete.codes" href="#pokete.codes">codes</a></code></li>
<li><code><a title="pokete.exiter" href="#pokete.exiter">exiter</a></code></li>
<li><code><a title="pokete.fast_change" href="#pokete.fast_change">fast_change</a></code></li>
<li><code><a title="pokete.fight" href="#pokete.fight">fight</a></code></li>
<li><code><a title="pokete.fight_add_1" href="#pokete.fight_add_1">fight_add_1</a></code></li>
<li><code><a title="pokete.fight_add_2" href="#pokete.fight_add_2">fight_add_2</a></code></li>
<li><code><a title="pokete.fight_add_3" href="#pokete.fight_add_3">fight_add_3</a></code></li>
<li><code><a title="pokete.fight_ap_potion" href="#pokete.fight_ap_potion">fight_ap_potion</a></code></li>
<li><code><a title="pokete.fight_clean_up" href="#pokete.fight_clean_up">fight_clean_up</a></code></li>
<li><code><a title="pokete.fight_heal_potion" href="#pokete.fight_heal_potion">fight_heal_potion</a></code></li>
<li><code><a title="pokete.fight_hyperball" href="#pokete.fight_hyperball">fight_hyperball</a></code></li>
<li><code><a title="pokete.fight_poketeball" href="#pokete.fight_poketeball">fight_poketeball</a></code></li>
<li><code><a title="pokete.fight_potion" href="#pokete.fight_potion">fight_potion</a></code></li>
<li><code><a title="pokete.fight_super_potion" href="#pokete.fight_super_potion">fight_super_potion</a></code></li>
<li><code><a title="pokete.fight_superball" href="#pokete.fight_superball">fight_superball</a></code></li>
<li><code><a title="pokete.fight_throw" href="#pokete.fight_throw">fight_throw</a></code></li>
<li><code><a title="pokete.game" href="#pokete.game">game</a></code></li>
<li><code><a title="pokete.gen_maps" href="#pokete.gen_maps">gen_maps</a></code></li>
<li><code><a title="pokete.gen_obs" href="#pokete.gen_obs">gen_obs</a></code></li>
<li><code><a title="pokete.heal" href="#pokete.heal">heal</a></code></li>
<li><code><a title="pokete.intro" href="#pokete.intro">intro</a></code></li>
<li><code><a title="pokete.main" href="#pokete.main">main</a></code></li>
<li><code><a title="pokete.map_additions" href="#pokete.map_additions">map_additions</a></code></li>
<li><code><a title="pokete.mapresize" href="#pokete.mapresize">mapresize</a></code></li>
<li><code><a title="pokete.movemap_add_obs" href="#pokete.movemap_add_obs">movemap_add_obs</a></code></li>
<li><code><a title="pokete.movemap_text" href="#pokete.movemap_text">movemap_text</a></code></li>
<li><code><a title="pokete.on_press" href="#pokete.on_press">on_press</a></code></li>
<li><code><a title="pokete.parse_obj" href="#pokete.parse_obj">parse_obj</a></code></li>
<li><code><a title="pokete.playmap_17_boy" href="#pokete.playmap_17_boy">playmap_17_boy</a></code></li>
<li><code><a title="pokete.playmap_20_trader" href="#pokete.playmap_20_trader">playmap_20_trader</a></code></li>
<li><code><a title="pokete.playmap_23_npc_8" href="#pokete.playmap_23_npc_8">playmap_23_npc_8</a></code></li>
<li><code><a title="pokete.reset_terminal" href="#pokete.reset_terminal">reset_terminal</a></code></li>
<li><code><a title="pokete.save" href="#pokete.save">save</a></code></li>
<li><code><a title="pokete.std_loop" href="#pokete.std_loop">std_loop</a></code></li>
<li><code><a title="pokete.swap_poke" href="#pokete.swap_poke">swap_poke</a></code></li>
<li><code><a title="pokete.teleport" href="#pokete.teleport">teleport</a></code></li>
<li><code><a title="pokete.text_input" href="#pokete.text_input">text_input</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="pokete.About" href="#pokete.About">About</a></code></h4>
</li>
<li>
<h4><code><a title="pokete.Attack" href="#pokete.Attack">Attack</a></code></h4>
<ul class="">
<li><code><a title="pokete.Attack.give_effect" href="#pokete.Attack.give_effect">give_effect</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="pokete.Buy" href="#pokete.Buy">Buy</a></code></h4>
<ul class="">
<li><code><a title="pokete.Buy.rechar" href="#pokete.Buy.rechar">rechar</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="pokete.CenterDor" href="#pokete.CenterDor">CenterDor</a></code></h4>
<ul class="">
<li><code><a title="pokete.CenterDor.action" href="#pokete.CenterDor.action">action</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="pokete.CenterInteract" href="#pokete.CenterInteract">CenterInteract</a></code></h4>
<ul class="">
<li><code><a title="pokete.CenterInteract.action" href="#pokete.CenterInteract.action">action</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="pokete.ChanceDor" href="#pokete.ChanceDor">ChanceDor</a></code></h4>
</li>
<li>
<h4><code><a title="pokete.Debug" href="#pokete.Debug">Debug</a></code></h4>
<ul class="">
<li><code><a title="pokete.Debug.pos" href="#pokete.Debug.pos">pos</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="pokete.Deck" href="#pokete.Deck">Deck</a></code></h4>
<ul class="">
<li><code><a title="pokete.Deck.add" href="#pokete.Deck.add">add</a></code></li>
<li><code><a title="pokete.Deck.add_all" href="#pokete.Deck.add_all">add_all</a></code></li>
<li><code><a title="pokete.Deck.control" href="#pokete.Deck.control">control</a></code></li>
<li><code><a title="pokete.Deck.rem_pokes" href="#pokete.Deck.rem_pokes">rem_pokes</a></code></li>
<li><code><a title="pokete.Deck.remove" href="#pokete.Deck.remove">remove</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="pokete.Detail" href="#pokete.Detail">Detail</a></code></h4>
</li>
<li>
<h4><code><a title="pokete.Dex" href="#pokete.Dex">Dex</a></code></h4>
<ul class="">
<li><code><a title="pokete.Dex.add_c_obs" href="#pokete.Dex.add_c_obs">add_c_obs</a></code></li>
<li><code><a title="pokete.Dex.detail" href="#pokete.Dex.detail">detail</a></code></li>
<li><code><a title="pokete.Dex.rem_c_obs" href="#pokete.Dex.rem_c_obs">rem_c_obs</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="pokete.Dor" href="#pokete.Dor">Dor</a></code></h4>
<ul class="">
<li><code><a title="pokete.Dor.action" href="#pokete.Dor.action">action</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="pokete.DorToCenter" href="#pokete.DorToCenter">DorToCenter</a></code></h4>
</li>
<li>
<h4><code><a title="pokete.DorToShop" href="#pokete.DorToShop">DorToShop</a></code></h4>
</li>
<li>
<h4><code><a title="pokete.ExtraActions" href="#pokete.ExtraActions">ExtraActions</a></code></h4>
<ul class="two-column">
<li><code><a title="pokete.ExtraActions.playmap_11" href="#pokete.ExtraActions.playmap_11">playmap_11</a></code></li>
<li><code><a title="pokete.ExtraActions.playmap_18" href="#pokete.ExtraActions.playmap_18">playmap_18</a></code></li>
<li><code><a title="pokete.ExtraActions.playmap_21" href="#pokete.ExtraActions.playmap_21">playmap_21</a></code></li>
<li><code><a title="pokete.ExtraActions.playmap_4" href="#pokete.ExtraActions.playmap_4">playmap_4</a></code></li>
<li><code><a title="pokete.ExtraActions.playmap_7" href="#pokete.ExtraActions.playmap_7">playmap_7</a></code></li>
<li><code><a title="pokete.ExtraActions.water" href="#pokete.ExtraActions.water">water</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="pokete.Figure" href="#pokete.Figure">Figure</a></code></h4>
<ul class="two-column">
<li><code><a title="pokete.Figure.add_money" href="#pokete.Figure.add_money">add_money</a></code></li>
<li><code><a title="pokete.Figure.add_poke" href="#pokete.Figure.add_poke">add_poke</a></code></li>
<li><code><a title="pokete.Figure.get_money" href="#pokete.Figure.get_money">get_money</a></code></li>
<li><code><a title="pokete.Figure.give_item" href="#pokete.Figure.give_item">give_item</a></code></li>
<li><code><a title="pokete.Figure.has_item" href="#pokete.Figure.has_item">has_item</a></code></li>
<li><code><a title="pokete.Figure.remove_item" href="#pokete.Figure.remove_item">remove_item</a></code></li>
<li><code><a title="pokete.Figure.set_args" href="#pokete.Figure.set_args">set_args</a></code></li>
<li><code><a title="pokete.Figure.set_money" href="#pokete.Figure.set_money">set_money</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="pokete.Help" href="#pokete.Help">Help</a></code></h4>
</li>
<li>
<h4><code><a title="pokete.HightGrass" href="#pokete.HightGrass">HightGrass</a></code></h4>
<ul class="">
<li><code><a title="pokete.HightGrass.action" href="#pokete.HightGrass.action">action</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="pokete.Inv" href="#pokete.Inv">Inv</a></code></h4>
<ul class="">
<li><code><a title="pokete.Inv.add" href="#pokete.Inv.add">add</a></code></li>
<li><code><a title="pokete.Inv.rem_item" href="#pokete.Inv.rem_item">rem_item</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="pokete.LearnAttack" href="#pokete.LearnAttack">LearnAttack</a></code></h4>
</li>
<li>
<h4><code><a title="pokete.Menu" href="#pokete.Menu">Menu</a></code></h4>
</li>
<li>
<h4><code><a title="pokete.NPC" href="#pokete.NPC">NPC</a></code></h4>
<ul class="">
<li><code><a title="pokete.NPC.action" href="#pokete.NPC.action">action</a></code></li>
<li><code><a title="pokete.NPC.fn" href="#pokete.NPC.fn">fn</a></code></li>
<li><code><a title="pokete.NPC.give" href="#pokete.NPC.give">give</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="pokete.NPCTrigger" href="#pokete.NPCTrigger">NPCTrigger</a></code></h4>
<ul class="">
<li><code><a title="pokete.NPCTrigger.action" href="#pokete.NPCTrigger.action">action</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="pokete.Poke" href="#pokete.Poke">Poke</a></code></h4>
<ul class="two-column">
<li><code><a title="pokete.Poke.attack" href="#pokete.Poke.attack">attack</a></code></li>
<li><code><a title="pokete.Poke.dict" href="#pokete.Poke.dict">dict</a></code></li>
<li><code><a title="pokete.Poke.evolve" href="#pokete.Poke.evolve">evolve</a></code></li>
<li><code><a title="pokete.Poke.label_rechar" href="#pokete.Poke.label_rechar">label_rechar</a></code></li>
<li><code><a title="pokete.Poke.lvl" href="#pokete.Poke.lvl">lvl</a></code></li>
<li><code><a title="pokete.Poke.move_arch" href="#pokete.Poke.move_arch">move_arch</a></code></li>
<li><code><a title="pokete.Poke.move_attack" href="#pokete.Poke.move_attack">move_attack</a></code></li>
<li><code><a title="pokete.Poke.move_downgrade" href="#pokete.Poke.move_downgrade">move_downgrade</a></code></li>
<li><code><a title="pokete.Poke.move_fireball" href="#pokete.Poke.move_fireball">move_fireball</a></code></li>
<li><code><a title="pokete.Poke.move_pound" href="#pokete.Poke.move_pound">move_pound</a></code></li>
<li><code><a title="pokete.Poke.move_shine" href="#pokete.Poke.move_shine">move_shine</a></code></li>
<li><code><a title="pokete.Poke.move_throw" href="#pokete.Poke.move_throw">move_throw</a></code></li>
<li><code><a title="pokete.Poke.set_ap" href="#pokete.Poke.set_ap">set_ap</a></code></li>
<li><code><a title="pokete.Poke.set_player" href="#pokete.Poke.set_player">set_player</a></code></li>
<li><code><a title="pokete.Poke.set_vars" href="#pokete.Poke.set_vars">set_vars</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="pokete.Poketeball" href="#pokete.Poketeball">Poketeball</a></code></h4>
<ul class="">
<li><code><a title="pokete.Poketeball.action" href="#pokete.Poketeball.action">action</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="pokete.RoadMap" href="#pokete.RoadMap">RoadMap</a></code></h4>
</li>
<li>
<h4><code><a title="pokete.Setting" href="#pokete.Setting">Setting</a></code></h4>
<ul class="">
<li><code><a title="pokete.Setting.change" href="#pokete.Setting.change">change</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="pokete.ShopInteract" href="#pokete.ShopInteract">ShopInteract</a></code></h4>
<ul class="">
<li><code><a title="pokete.ShopInteract.action" href="#pokete.ShopInteract.action">action</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="pokete.Station" href="#pokete.Station">Station</a></code></h4>
<ul class="two-column">
<li><code><a title="pokete.Station.choose" href="#pokete.Station.choose">choose</a></code></li>
<li><code><a title="pokete.Station.choosen" href="#pokete.Station.choosen">choosen</a></code></li>
<li><code><a title="pokete.Station.has_been_visited" href="#pokete.Station.has_been_visited">has_been_visited</a></code></li>
<li><code><a title="pokete.Station.is_city" href="#pokete.Station.is_city">is_city</a></code></li>
<li><code><a title="pokete.Station.next" href="#pokete.Station.next">next</a></code></li>
<li><code><a title="pokete.Station.obs" href="#pokete.Station.obs">obs</a></code></li>
<li><code><a title="pokete.Station.set_color" href="#pokete.Station.set_color">set_color</a></code></li>
<li><code><a title="pokete.Station.unchoose" href="#pokete.Station.unchoose">unchoose</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="pokete.Trainer" href="#pokete.Trainer">Trainer</a></code></h4>
<ul class="">
<li><code><a title="pokete.Trainer.do" href="#pokete.Trainer.do">do</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>